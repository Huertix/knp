<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
            <script src="https://cdn.optimizely.com/js/421270022.js"></script>
    
                    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"Vg4HUlBbGwAHVlFSDgM="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(12),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{d?d-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,(new Date).getTime(),!0])}catch(s){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,(new Date).getTime()])}var i=t("handle"),a=t(13),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,d=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(5),t(4),"addEventListener"in window&&t(3),s.xhrWrappable&&t(6),u=!0)}c.on("fn-start",function(t,e,n){u&&(d+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&d>0&&(d-=1)}),c.on("internal-error",function(t){i("ierr",[t,(new Date).getTime(),!0])})},{}],3:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(14)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],4:[function(t,e,n){var r=t("ee").get("raf"),o=t(14)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],5:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(14)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],6:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,v,"fn-",c)}function i(t){y.push(t),h&&(w=-w,b.data=w)}function a(){for(var t=0;t<y.length;t++)r([],y[t]);y.length&&(y=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(3);var f=t("ee"),u=f.get("xhr"),d=t(14)(u),l=NREUM.o,p=l.XHR,h=l.MO,m="readystatechange",v=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],y=[];e.exports=u;var g=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(p,g),g.prototype=p.prototype,d.inPlace(g.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),h){var w=1,b=document.createTextNode(w);new h(a).observe(b,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],7:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var a=t.getResponseHeader("X-NewRelic-App-Data");a&&(e.cat=a.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return h(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(8),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,l=t("id"),p=t(11),h=t(10),m=window.XMLHttpRequest;a.features.xhr=!0,t(6),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=h(r);i&&(n.txSize=i)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var a=0;a<d;a++)e.addEventListener(u[a],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{}],8:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],9:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[(new Date).getTime()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(12),c=t(13),s=t("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var u=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit"],d="api-",l=d+"ixn-";a(u,function(t,e){f[e]=o(d+e,!0,"api")}),f.addPageAction=o(d+"addPageAction",!0),f.setCurrentRouteName=o(d+"routeName",!0),e.exports=newrelic,f.interaction=function(){return(new r).get()};var p=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(l+"tracer",[Date.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){p[e]=o(l+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,(new Date).getTime()])}},{}],10:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],11:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],12:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],13:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],14:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(13),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){l([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o)}catch(a){l([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){l([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function l(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o){if(!l.aborted){t&&t(n,r,o);for(var i=e(o),a=h(n),c=a.length,s=0;s<c;s++)a[s].apply(i,r);var f=u[g[n]];return f&&f.push([w,n,r,i]),i}}function p(t,e){y[t]=h(t).concat(e)}function h(t){return y[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",g[n]=e,e in u||(u[e]=[])})}var y={},g={},w={on:p,emit:n,get:m,listeners:h,context:e,buffer:v,abort:a,aborted:!1};return w}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var c="nr@context",s=t("gos"),f=t(12),u={},d={},l=e.exports=o();l.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!b++){var t=w.info=NREUM.info,e=d.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return f.abort();s(y,function(e,n){t[e]||(t[e]=n)}),c("mark",["onload",a()],null,"api");var n=d.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===d.readyState&&i()}function i(){c("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var c=t("handle"),s=t(12),f=t("ee"),u=window,d=u.document,l="addEventListener",p="attachEvent",h=u.XMLHttpRequest,m=h&&h.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:h,REQ:u.Request,EV:u.Event,PR:u.Promise,MO:u.MutationObserver},t(9);var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-998.min.js"},g=h&&m&&m[l]&&!/CriOS/.test(navigator.userAgent),w=e.exports={offset:a(),origin:v,features:{},xhrWrappable:g};d[l]?(d[l]("DOMContentLoaded",i,!1),u[l]("load",r,!1)):(d[p]("onreadystatechange",o),u[p]("onload",r)),c("mark",["firstbyte",a()],null,"api");var b=0},{}]},{},["loader",2,7]);</script>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Client Credentials > OAuth2 in 8 Steps | KnpUniversity</title>

                    <link href="../../builds/main-db6835bf19d99bcc09032789f3bd39e4.css" rel="stylesheet">

        <link href='https://fonts.googleapis.com/css?family=Rokkitt' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>
    

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/tomorrow-night.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/tomorrow-night.min.css">


        <link rel="stylesheet" href="../../builds/code_block_styles-2d783e385d9dbb1ef88d9053d1b8d675.css">



    <link href="../../builds/video-6b5fa6dfb768239b226d39d08bd4867e.css" rel="stylesheet">

                        <script src="../../bundles/fosjsrouting/js/router.js"></script>

        <script src="../../builds/main-1dfa89b76a105f9c2d98.js"></script>
        <script src="../../js/routing?callback=fos.Router.setData"></script>
            

    <script>
        // video settings
        window.video = {
            isCourseChapterPaid: true,
            courseChapterId: 20778
        };

                window.video.nextDetails = {
            'type': 'video',
            'title': 'Up Next: Authorization\x20Code\x20Grant\x20Type <i class="fa fa-play"></i>',
            'url': '/screencast/oauth/authorization-code#play'
        };
            </script>

    <script src="../../builds/video-1dfa89b76a105f9c2d98.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            var hashValue = window.location.hash.substr(1);
            if (hashValue.substr(0, 7) == 'comment') {
                // this is a #comment link - open up the comment tab!
                $('.nav-tabs a[href="#tab-comment"]').click();
            }
        });
    </script>

    <link rel="alternate" type="application/rss+xml" title="Blog feed with technical articles around PHP and screencast and tutorial updates from KnpUniversity.com" href="http://feeds.feedburner.com/knpuniversity" />

    <meta name="description" content="OAuth2: that mystical beast that you kind of understand and occasionally
wrestle to integrate with some social media site.

Time to master OAuth2... and why not do it by building a real app with
farmers, chickens and real-life providers like Facebook and Google Plus.
We&#039;ll show you how OAuth really works while looking at how OAuth will
feel by using SDK&#039;s and other tools that give you shortcuts.

And like always, we&#039;ll go directly at the ugly details, like token expiration
and having a user deny access to your application. Here&#039;s what you&#039;ll
be learning:

* 3 main OAuth grant types: client credentials, authorization code and implicit;
* The exact flow behind getting your application authorized, exchanging
  an authorization code for a token, and using the token;
* Authentication (single sign-on) using OAuth;
* Handling expired tokens;
* Using refresh tokens;
* Integrating and authentication with Facebook;
* OAuth integration with Google+;
* What to look out for with security and how you can tighten things.
">

    <meta property="og:site_name" content="KnpUniversity - PHP and Symfony Video Tutorial Screencasts">
    <meta name="twitter:site" content="@KnpUniversity"><link rel="shortcut icon" href="../../assets/images/favicon.ico">
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    <meta property="og:title" content="Client Credentials">
<meta property="og:description" content="OAuth2: that mystical beast that you kind of understand and occasionally
wrestle to integrate with some social media site.

Time to master OAuth2">
<meta property="og:url" content="http://knpuniversity.com/screencast/oauth/client-credentials">
    <meta property="og:image" content="http://knpuniversity.com/imagine/course_video_poster_large/uploads/screencast/oauth:1e115c422acb5c00225bfbab187b202cb86a0cb7/oauth.png">

<meta name="twitter:card" content="summary">


                            
    </head>
<body data-user-id="" >
<nav class="navbar navbar-inverse nav-margin navbar-learning-layout">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle toggle-button collapsed" data-toggle="collapse" data-target="#js-navbar" aria-expanded="false" aria-controls="js-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../logout" class="navbar-brand">
                <span class="knp-color-blue">Knp</span>
                <span class="knp-color-white">University</span>
            </a>
        </div>
        <form class="navbar-form navbar-left navbar-form-border" role="search" method="GET" action="http://knpuniversity.com/search">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search Tutorials" value="" name="q">

                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </form>
        <div id="js-navbar" class="collapse-fix collapse navbar-right navbar-collapse">
            

<ul class="nav navbar-nav nav-narrowerOnSmall">
            <li><a href="../../checkout/subscription/team_yearly/5" title="Cart"><i class="fa fa-shopping-cart"></i></a></li>
        <li class="dropdown"><a href="client-credentials#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <i class="fa fa-angle-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="../../tracks.1">Tracks</a></li>
          <li><a href="../../courses/all">All Courses</a></li>
        </ul>
    </li>
            <li><a href="../../pricing.1">Pricing</a></li>
        <li><a href="../../training">Training</a></li>
                <li class="visible-xs"><a href="../../logout">My Profile</a></li>
        <li class="visible-xs"><a href="../../logout">Sign Out</a></li>

            <li><a href="../../login.1">Log In</a></li>
        <li class="btn btn-sm btn-warning signup-btn"><a class="signup" href="../../signup/index.html">Sign Up</a></li>
    </ul>

        </div>
    </div>
</nav>


    




<div class="table-contents-container">
  <div class="container expandList" id="js-chapter-list">
      <button class="table-contents-container-button js-expand-list" data-target="js-chapter-list" title="Chapter List">
          <i class="fa fa-bars"></i>
                        2.
                            Client Credentials
                </button>
      <div class="expandList-body">
          <div class="expandList-bodyInner">
              <h3 class="expandList-header">
                  <a class="course-title-expand" href="resume">OAuth2 in 8 Steps</a>
              </h3>

                                <div class="watched-tut-progress-container watched-tut-progress-container-overview">
        <div class="watched-tut-progress-overview" style="width: 0%; margin-right: 100%;" title="0% complete"><span class="profile-progress-title">0%</span></div>
    </div>


              
              <div class="expand-chapter-list">
                      
    
    <!-- Table of contents -->
    <div class="chapter-list">
        <ul class="list-unstyled">
            
                
                                <li class="title chapter-list-item ">
            <a href="intro" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                1.
                        Serious OAuth in 8 Steps
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:43</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item chapter-list-item-active">
            <a href="client-credentials" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                2.
                        Client Credentials
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 8:55</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="authorization-code" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                3.
                        Authorization Code Grant Type
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 10:22</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="authorization-code2" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                4.
                        Authorization Code: Saving the Token &amp; Handling Failures
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 10:37</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="logging-in" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                5.
                        User Login with OAuth
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 7:01</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="facebook" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                6.
                        OAuth with Facebook
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 11:28</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="facebook2" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                7.
                        Facebook: Using the API, Logging in and Failure
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 10:05</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="javascript-implicit-google-plus" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                8.
                        Implicit Grant Type with Google+
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 9:45</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="implicit2" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                9.
                        Finishing the Login Callback
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 5:03</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="refresh-token" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                10.
                        Using Refresh Tokens
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 7:08</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="security" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                11.
                        Security
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 10:10</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


                    </ul>
    </div>

    
              </div>
          </div>
      </div>
  </div>
  <div>
                <a href="../../pricing/oauth" class="btn btn-success pull-right-md download-buy-buttons">Buy <span class="hidden-xs">Access to Course</span></a>
              </div>
</div>


        <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-9 col-lg-10">
                <h1 class="account-header account-header-low-margin-top">Client Credentials</h1>
                
                                    <p class="hidden-xs">
                        Course:
                        <a class="knp-color-black" href="resume"><em>OAuth2 in 8 Steps Tutorial</em></a>                    </p>
                            </div>
        </div>

                <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="full-block-container">
                    <div class="frame-padding">
                        <div id="player">
                                                        <div class="hidden alert alert-danger js-video-not-supported" style="margin-bottom: 10px;">
        <h4>Video not working?</h4>
        It looks like your browser may not support the H264 codec.
        If you're using Linux+Firefox, try a different browser or try
        installing the
        <code>gstreamer0.10-ffmpeg</code>
        <code>gstreamer0.10-plugins-good</code> packages.
        <br/><br/>
        Thanks! This saves us
        from needing to use Flash or encode videos in multiple formats. And that
        let's us get back to making more videos :). But as always, please feel
        free to <a href="../../contact">message us</a>.
    </div>

    <video id="js-video-player" class="video-js vjs-default-skin vjs-big-play-centered "
            controls preload="auto" width="auto" height="auto"
            poster="http://i.vimeocdn.com/video/536426436_960x600.jpg?r=pad">
        <source src="http://player.vimeo.com/external/140184465.hd.mp4?s=8d8c83218744ca1dab7d741e958f52480e0bafbe&amp;profile_id=113&amp;oauth2_token_id=308801954" type="video/mp4" data-res="HD" data-default="true" />
        <source src="http://player.vimeo.com/external/140184465.sd.mp4?s=1b9c77439263758ffbb6897e947603be8367919d&amp;profile_id=112&amp;oauth2_token_id=308801954" type="video/mp4" data-res="SD" />
        <p class="vjs-no-js">
            To view this video please enable JavaScript, and consider upgrading to a web browser that
            <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
        </p>
    </video>


                            <div class="end-show js-post-play-wrapper" style="display: none;">
                                <p class="end-show-header">You're Killing it!</p>

                                <div class="text-center overlay-btn">
                                    <!-- This is filled in via JS -->
                                    <a href="client-credentials#" class="btn btn-lg btn-warning js-next-item-anchor"></a>
                                    <div class="js-all-finished-holder" style="display: none; color: #fff;">
                                        Another Tutorial down!<br/><br/>
                                                                                    <a href="../../tracks/extras" class="btn btn-lg btn-success">Back to the <i>Dev Tools</i> Track</a>
                                                                            </div>
                                </div>

                                <p class="end-show-link js-video-repeat"><a class="knp-color-white link-no-underline" href="client-credentials#">
                                    <i class="fa fa-repeat"></i> Watch again
                                </a></p>
                            </div>
                                                </div>
                    </div>
                </div>
            </div>
        </div>
         
        <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="pull-right">
                                    <a class="btn btn-success"
           href="authorization-code#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                </div>

                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a data-toggle="tab" href="client-credentials#tab-script">Script</a></li>
                    <li><a data-toggle="tab" href="client-credentials#tab-comment">
                        <i class="fa fa-comment-o"></i>
                                                    
                                                                                                (25+)
                                                                                        Conversation
                                            </a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="tab-script">
                        <div class="js-script-content-wrapper top-margin-script script-content">
                                                                                        <a href="https://github.com/knpuniversity/oauth/edit/master/knpu/client-credentials.rst" target="_blank" class="btn btn-default btn-circle pull-right js-tooltip" title="Edit on GitHub"><span class="fa fa-pencil"></span></a>
                                                                    
  <div class="section" id="client-credentials">
<h1>Client Credentials<a class="headerlink" href="client-credentials#client-credentials" title="Permalink to this headline">¶</a></h1>
<p>Meet Brent. He&#8217;s the hardworking, beard-growing, kale-munching type who
has a coop of the nicest, smartest, and best egg-laying chickens this side
o&#8217; the Mississippi! But feeding his chickens and doing other things around
the farm has always taken a lot of time.</p>
<p>But great news! The brand new &#8220;Chicken Oversight Operations Platform&#8221;, or
COOP site has just launched! With COOP, you can login to the site and
collect your chicken eggs, unlock the barn, and do all kinds of other things
just by clicking a button.</p>
<p>Noticing that COOP has an API, Brent wonders if he could write a little script
that would collect his eggs automatically. Yea, if he had a script that made
an API request on his behalf, he could run it on a CRON job daily and sleep
in!</p>
<p>So COOP is real, sort of. You can find this make-believe website by going
to <a class="reference external" href="http://coop.apps.knpuniversity.com">http://coop.apps.knpuniversity.com</a>. Go ahead and create an account,
and start controlling your virtual farm. It&#8217;s the future!</p>
<div class="section" id="starting-our-command-line-script">
<h2>Starting our Command-line Script<a class="headerlink" href="client-credentials#starting-our-command-line-script" title="Permalink to this headline">¶</a></h2>
<p>COOP&#8217;s API is simple, with just a few endpoints, including the one we
want for our little command-line script: eggs-collect.</p>
<p>I&#8217;ve already made a <tt class="docutils literal"><span class="pre">cron/</span></tt> directory with a script called <tt class="docutils literal"><span class="pre">collect_eggs.php</span></tt>
that&#8217;ll get us started:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// collect_eggs.php</span>
<span class="k">include</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Guzzle\Http\Client</span><span class="p">;</span>

<span class="c1">// create our http client (Guzzle)</span>
<span class="nv">$http</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="s1">&#39;http://coop.apps.knpuniversity.com&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;request.options&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;exceptions&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">));</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Code along with us! Click the Download button on this page to get the starting
point of the project, and follow the readme to get things setup.</p>
</div>
<p>It doesn&#8217;t do anything except create a <tt class="docutils literal"><span class="pre">Client</span></tt> object that&#8217;s pointing
at the COOP website. Since we&#8217;ll need to make HTTP requests to the COOP API,
we&#8217;ll use a really nice PHP library called <a class="reference external" href="http://guzzlephp.org/">Guzzle</a>. Don&#8217;t worry if you&#8217;ve
never used it, it&#8217;s really easy.</p>
<p>Before we start, we need to use <a class="reference external" href="http://getcomposer.org/">Composer</a> to download Guzzle. <a class="reference external" href="http://getcomposer.org/download/">Download Composer</a>
into the <tt class="docutils literal"><span class="pre">cron/</span></tt> directory and then install the vendor libraries:</p>
<div class="highlight-bash"><div class="highlight"><pre>php composer.phar install
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">New to Composer? Do yourself a favor and master it for free:
<a class="reference external" href="../composer/resume">The Wonderful World of Composer</a>.</p>
</div>
<p>Let&#8217;s try making our first API request to <tt class="docutils literal"><span class="pre">/api/2/eggs-collect</span></tt>. The <tt class="docutils literal"><span class="pre">2</span></tt>
is our COOP user ID, since we want to collect eggs from <em>our</em> farm. Your
number will be different:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// collect_eggs.php</span>
<span class="c1">// ...</span>

<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/api/2/eggs-collect&#39;</span><span class="p">);</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Try it by executing the script from the command line:</p>
<div class="highlight-bash"><div class="highlight"><pre>php collect_eggs.php
</pre></div>
</div>
<p>Not surprisingly, this blows up!</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;access_denied&quot;</span><span class="p">,</span>
  <span class="nt">&quot;error_description&quot;</span><span class="p">:</span> <span class="s2">&quot;an access token is required&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="oauth-applications">
<h2>OAuth Applications<a class="headerlink" href="client-credentials#oauth-applications" title="Permalink to this headline">¶</a></h2>
<p>But before we think about getting a token, we need to create an application
on COOP. The application represents the external app or website that we want
to build. In our case, it&#8217;s the little command-line script. In OAuth-speak,
it&#8217;s this application that will actually ask for access to a user&#8217;s COOP account.</p>
<p>Give it a name like &#8220;Brent&#8217;s Lazy CRON Job&#8221;, a description, and check only
the box for &#8220;Collect Eggs from Your Chickens&#8221;. These are &#8220;scopes&#8221;, or basically
the permissions that your app will have if a token is granted from COOP.</p>
<p>When we finish, we now have a Client ID and an auto-generated &#8220;Client Secret&#8221;.
These are a sort of username and password for the application. One tricky
thing is that the terms &#8220;application&#8221; and &#8220;client&#8221; are used interchangeably
in OAuth. And both are used to refer to the application we just registered
and the actual app you&#8217;re building, like the CRON script or your website.
I&#8217;ll try to clarify along the way.</p>
<p>Now, let&#8217;s get an access token!</p>
</div>
<div class="section" id="client-credentials-grant-type">
<h2>Client Credentials Grant Type<a class="headerlink" href="client-credentials#client-credentials-grant-type" title="Permalink to this headline">¶</a></h2>
<p>The first OAuth grant type is called Client Credentials, which is the simplest
of all the types. It involves only two parties, the client and the server.
For us, this is our command-line script and the COOP API.</p>
<p>Using this grant type, there is no &#8220;user&#8221;, and the access token we get will
only let us access resources under the control of the application. When we
make API requests using this access token, it&#8217;s almost like we&#8217;re logging in
as the <em>application</em> itself, not any individual user. I&#8217;ll explain more in a second.</p>
<p>If you visit the application you created earlier, you&#8217;ll see a nice
&#8220;Generate a Token&#8221; link that when clicked will fetch one. Behind the scenes,
this uses client credentials, which we&#8217;ll see more closely in a second.</p>
<div class="highlight-text"><div class="highlight"><pre>http://coop.apps.knpuniversity.com/token
    ?client_id=Your+Client+Name
    &amp;client_secret=abcdefg
    &amp;grant_type=client_credentials
</pre></div>
</div>
<p>But for now, we can celebrate by using this token immediately to take actions
on behalf of the application!</p>
</div>
<div class="section" id="access-tokens-in-the-api">
<h2>Access Tokens in the API<a class="headerlink" href="client-credentials#access-tokens-in-the-api" title="Permalink to this headline">¶</a></h2>
<p>Exactly how to do this depends on the API you&#8217;re making requests to. One common method,
and the one COOP uses, is to send it via an Authorization Bearer header.</p>
<div class="highlight-text"><div class="highlight"><pre>GET /api/barn-unlock HTTP/1.1
Host: coop.apps.knpuniversity.com
Authorization: Bearer ACCESSTOKENHERE
</pre></div>
</div>
<p>Update the script to send this header:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// collect-eggs.php</span>
<span class="c1">// ...</span>

<span class="nv">$accessToken</span> <span class="o">=</span> <span class="s1">&#39;abcd1234def67890&#39;</span><span class="p">;</span>

<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/api/2/eggs-collect&#39;</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">addHeader</span><span class="p">(</span><span class="s1">&#39;Authorization&#39;</span><span class="p">,</span> <span class="s1">&#39;Bearer &#39;</span><span class="o">.</span><span class="nv">$accessToken</span><span class="p">);</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>When we run the script again, start celebrating, because it works!
And now we have enough eggs to make an omlette :)</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;eggs-collect&quot;</span><span class="p">,</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hey look at that, 3 eggs have been collected!&quot;</span><span class="p">,</span>
  <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="trying-to-collect-someone-else-s-eggs">
<h2>Trying to Collect Someone Else&#8217;s Eggs<a class="headerlink" href="client-credentials#trying-to-collect-someone-else-s-eggs" title="Permalink to this headline">¶</a></h2>
<p>Notice that this collects the eggs for <em>our</em> user becase we&#8217;re including
our user ID in the URL. What happens if we change id to be for a different user?</p>
<blockquote>
<div>/api/3/eggs-collect</div></blockquote>
<p>If you try it, it fails!</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;access_denied&quot;</span><span class="p">,</span>
  <span class="nt">&quot;error_description&quot;</span><span class="p">:</span> <span class="s2">&quot;You do not have access to take this action&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Technically, with a token from client credentials, we&#8217;re making API requests
not on behalf of a user, but on behalf of an application. This makes client
credentials perfect for making API calls that edit or get information about
the application itself, like a count of how many users it has.</p>
<p>We decided to build COOP so that the application <em>also</em> has access to modify
the user that created the application. That&#8217;s why we <em>are</em> able to collect our user&#8217;s
eggs, but not our neighbor&#8217;s.</p>
</div>
<div class="section" id="getting-the-token-via-client-credentials">
<h2>Getting the Token via Client Credentials<a class="headerlink" href="client-credentials#getting-the-token-via-client-credentials" title="Permalink to this headline">¶</a></h2>
<p>Put the champagne away: we&#8217;re not done yet. Typically, access tokens don&#8217;t
last forever. COOP tokens last for 24 hours, which means that tomorrow, our
script will break.</p>
<p>Letting the website do the client-credentials work for us was nice for testing,
but we need to do it ourselves inside the script. Every OAuth server has an
API endpoint used to request access tokens. If we look at the COOP API Authentication
docs, we can see the URL and the POST parameters it needs:</p>
<blockquote>
<div><p><a class="reference external" href="http://coop.apps.knpuniversity.com/token">http://coop.apps.knpuniversity.com/token</a></p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd>client_id
client_secret
grant_type</dd>
</dl>
</div></blockquote>
<p>Let&#8217;s update our script to first make <em>this</em> API request. Fill in the <tt class="docutils literal"><span class="pre">client_id</span></tt>,
<tt class="docutils literal"><span class="pre">client_secret</span></tt> and <tt class="docutils literal"><span class="pre">grant_type</span></tt> POST parameters:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// collect-eggs.php</span>
<span class="c1">// ...</span>

<span class="c1">// run this code *before* requesting the eggs-collect endpoint</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/token&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;client_id&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;Brent\&#39;s Lazy CRON Job&#39;</span><span class="p">,</span>
    <span class="s1">&#39;client_secret&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;a2e7f02def711095f83f2fb04ecbc0d3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;grant_type&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;client_credentials&#39;</span><span class="p">,</span>
<span class="p">));</span>

<span class="c1">// make a request to the token url</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
<span class="nv">$responseBody</span> <span class="o">=</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$responseBody</span><span class="p">);</span><span class="k">die</span><span class="p">;</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>With any luck, when you run it, you should see a JSON response with an access
token and a few other details:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;access_token&quot;</span><span class="p">:</span> <span class="s2">&quot;fa3b4e29d8df9900816547b8e53f87034893d84c&quot;</span><span class="p">,</span>
  <span class="nt">&quot;expires_in&quot;</span><span class="p">:</span> <span class="mi">86400</span><span class="p">,</span>
  <span class="nt">&quot;token_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer&quot;</span><span class="p">,</span>
  <span class="nt">&quot;scope&quot;</span><span class="p">:</span> <span class="s2">&quot;chickens-feed&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Let&#8217;s use <em>this</em> access token instead of the one we pasted in there:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// collect-eggs.php</span>
<span class="c1">// ...</span>

<span class="c1">// step1: request an access token</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/token&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;client_id&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;Brent\&#39;s Lazy CRON Job&#39;</span><span class="p">,</span>
    <span class="s1">&#39;client_secret&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;a2e7f02def711095f83f2fb04ecbc0d3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;grant_type&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;client_credentials&#39;</span><span class="p">,</span>
<span class="p">));</span>

<span class="c1">// make a request to the token url</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
<span class="nv">$responseBody</span> <span class="o">=</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<span class="nv">$responseArr</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$responseBody</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="nv">$accessToken</span> <span class="o">=</span> <span class="nv">$responseArr</span><span class="p">[</span><span class="s1">&#39;access_token&#39;</span><span class="p">];</span>

<span class="c1">// step2: use the token to make an API request</span>
<span class="nv">$request</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">&#39;/api/2/eggs-collect&#39;</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">addHeader</span><span class="p">(</span><span class="s1">&#39;Authorization&#39;</span><span class="p">,</span> <span class="s1">&#39;Bearer &#39;</span><span class="o">.</span><span class="nv">$accessToken</span><span class="p">);</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">();</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Now, it still works <em>and</em> since we&#8217;re getting a fresh token each time, we&#8217;ll
never have an expiration problem. Once Brent sets up a CRON job to run our
script, he&#8217;ll be sleeping in &#8216;til noon!</p>
</div>
<div class="section" id="why-what-and-when-client-credentials">
<h2>Why, What and When: Client Credentials<a class="headerlink" href="client-credentials#why-what-and-when-client-credentials" title="Permalink to this headline">¶</a></h2>
<p>Every grant type eventually uses the <tt class="docutils literal"><span class="pre">/token</span></tt> endpoint to get a token, but
the details before that differ. Client Credentials is <em>a way</em> to get a token
directly. One limitation is that it requires your client secret, which is
ok now because our script is hidden away on some server.</p>
<p>But on the web, we won&#8217;t be able to expose the client secret. And that&#8217;s
where the next two grant types become important.</p>
</div>
</div>


    
                        </div>
                    </div>
                    <div class="tab-pane" id="tab-comment">
                        <h3>Leave a comment!</h3>
                                                        <div id="disqus_thread">
                <style type="text/css">
            #dsq-comments {padding: 10px 0 0}
            .dsq-comment {position: relative;clear: both;margin: 0 0 1.5em;}
            .dsq-avatar {left: 0;position: absolute;}
            .dsq-avatar img {border: 0 none;border-radius: 3px;height: 36px;width: 36px;}
            .dsq-comment-body {padding: 0 0 0 46px;}
            .dsq-comment-header {border: 1px solid rgba(0, 0, 0, 0.15);border-radius: 3px;font-size: 13px;line-height: 14px;margin: 0 0 1em;max-height: 36px;overflow: hidden;padding: 10px;position: relative;text-overflow: ellipsis;white-space: nowrap;}
            .dsq-comment-message {word-wrap: break-word;}
            .dsq-comment-message {line-height: 1.5em;margin: 0 0 1em;}
            .dsq-comment-text {display: inline;}
            .dsq-comment-date {float: right;font-size: 90%;margin: 0 12px 0 0;}
        </style>

	    <div id="dsq-content">
	        <ul id="dsq-comments">
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3028200898" id="dsq-comment-3028200898">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/souhailmerroun/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/22225/3222/avatar92.jpg?1480532201">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3028200898">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-30</span>
	                            <span class="dsq-commenter-name">Souhail Merroun</span>
	                        </div>

	                        <div id="dsq-comment-message-3028200898" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3028200898" class="dsq-comment-text">
	                                <p><a data-dsq-mention="weaverryan:disqus" href="https://disq.us/url?url=https%3A%2F%2Fdisqus.com%2Fby%2Fweaverryan%2F%3APBIAkzK4hlYNCZurh4fY0tD6LIg&amp;cuid=1175718" rel="nofollow noopener">weaverryan</a>  a pleasure :)</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3028183993" id="dsq-comment-3028183993">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3028183993">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-30</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-3028183993" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3028183993" class="dsq-comment-text">
	                                <p>Thanks for sharing <a data-dsq-mention="souhailmerroun:disqus" href="https://disqus.com/by/souhailmerroun/" rel="nofollow noopener">Souhail Merroun</a>!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3027528949" id="dsq-comment-3027528949">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/souhailmerroun/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/22225/3222/avatar92.jpg?1480532201">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3027528949">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-30</span>
	                            <span class="dsq-commenter-name">Souhail Merroun</span>
	                        </div>

	                        <div id="dsq-comment-message-3027528949" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3027528949" class="dsq-comment-text">
	                                <p>Hey folks, <br>For those who have the error "The grant type was not specified in the request". <br>The video is done with an old Guzzle version. <br>Here is a snippet with a new one.</p><p><a href="https://disq.us/url?url=https%3A%2F%2Fgist.github.com%2Fsouhailmerroun%2Fa97f8c262a0f88ee62bcba934d2cc680%3AiIlnpO8fJDgW7nRBqRSutasuqNE&amp;cuid=1175718" rel="nofollow noopener">https://gist.github.com/souhai...</a></p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2937644549" id="dsq-comment-2937644549">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2937644549">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-07</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2937644549" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2937644549" class="dsq-comment-text">
	                                <p>Hey <a data-dsq-mention="serdan1689:disqus" href="https://disq.us/url?url=https%3A%2F%2Fdisqus.com%2Fby%2FSerdan1689%2F%3AiaPcCsFnQLwX8UzHFhbIjU3-9CQ&amp;cuid=1175718" rel="nofollow noopener">Serdan1689</a> ,</p><p>Please, check out Ryan's explanation on the similar comment below: <a href="https://disq.us/url?url=https%3A%2F%2Fknpuniversity.com%2Fscreencast%2Foauth%2Fclient-credentials%23comment-2802524257%3Ac1bn58cPn0aHAfIrIHY2YYS7NOI&amp;cuid=1175718" rel="nofollow noopener">https://knpuniversity.com/screencast/oauth/client-credentials#comment-2802524257</a> . What REST client are you using here?</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2936907188" id="dsq-comment-2936907188">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/Serdan1689/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2936907188">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-06</span>
	                            <span class="dsq-commenter-name">Serdan1689</span>
	                        </div>

	                        <div id="dsq-comment-message-2936907188" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2936907188" class="dsq-comment-text">
	                                <p>$request = $client-&gt;post('/token', null, array(<br>	'grant_type' =&gt; 'client_credentials',<br>	'client_id' =&gt; "Daniel's CRON Job",<br>	'client_secret' =&gt; 'KEY',<br>));</p><p>Is there something wrong with this request? I keep getting a 400 response:</p><p>{"error":"invalid_request","error_description":"The grant type was not specified in the request"}</p><p>When I comment that section out it works fine. I'm not sure what's going wrong.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2834190673" id="dsq-comment-2834190673">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2834190673">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-08-12</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2834190673" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2834190673" class="dsq-comment-text">
	                                <p>Hey <a data-dsq-mention="andjii:disqus" href="https://disqus.com/by/andjii/" rel="nofollow noopener">Andjii</a>!</p><p>We don't talk about FOSOAuthServerbundle on any tutorials, but that might be great idea for a tutorial! Is the documentation unclear? Or are you stuck on anything specifically? This tutorial talks entirely about the *client* side of OAuth (not the server) - but it should help make OAuth in general a lot more clear (which is important for using OAuth as a client or a server).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2833832996" id="dsq-comment-2833832996">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/andjii/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/12544/2740/avatar92.jpg?1482285604">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2833832996">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-08-12</span>
	                            <span class="dsq-commenter-name">Andjii</span>
	                        </div>

	                        <div id="dsq-comment-message-2833832996" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2833832996" class="dsq-comment-text">
	                                <p>How to use it with FOSOAuthServerBundle for symfony 3? I couldn't find any explanations or tutorials... Could you, please, provide some help?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2802524257" id="dsq-comment-2802524257">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2802524257">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-25</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2802524257" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2802524257" class="dsq-comment-text">
	                                <p>Hi Raghu!</p><p>Yes, using a standalone REST client is a perfectly valid thing to do :).</p><p>In this case, those 3 parameters should be sent as "form encoded body". Or, this may be called other things - like "form parameters" or "x-www-form-urlencoded" encoded data. This is actually the *most* traditional way to send data in a request, and it's not exactly *any* of the three options that you see in your REST client :/. What REST client are you using?</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2797825442" id="dsq-comment-2797825442">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="client-credentials">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2797825442">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-22</span>
	                            <span class="dsq-commenter-name">Raghu Sodha</span>
	                        </div>

	                        <div id="dsq-comment-message-2797825442" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2797825442" class="dsq-comment-text">
	                                <p>I am not much familiar with PHP, So I thought of learning and following tutorial with a stand-alone REST client.</p><p>I this PHP piece of code to get access token.</p><p>$request = $http-&gt;post('/token', null, array(<br>    'client_id'     =&gt; 'Brent\'s Lazy CRON Job',<br>    'client_secret' =&gt; 'a2e7f02def711095f83f2fb04ecbc0d3',<br>    'grant_type'    =&gt; 'client_credentials',<br>));</p><p>My question is, How do I pass these parameters in stand alone REST <br>client? Options I have are 1. Query Parameter 2. Headers 3. a JSON post <br>data.</p><p>I tried all three and get following error for all three.<br>{"error":"invalid_request","error_description":"The grant type was not specified in the request"}</p><p>Could you please suggest what could be going wrong here.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2793424458" id="dsq-comment-2793424458">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2793424458">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-20</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2793424458" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2793424458" class="dsq-comment-text">
	                                <p>Thanks for posting that <a data-dsq-mention="s_bastien_rosset:disqus" href="https://disq.us/url?url=https%3A%2F%2Fdisqus.com%2Fby%2Fs_bastien_rosset%2F%3AlpS-XOBEpvD_A_LAAoZepLk5OBE&amp;cuid=1175718" rel="nofollow noopener">Sébastien Rosset</a>! You're absolutely right - and fortunately, version 3 of Guzzle is still available (but getting quite old). But yes - if you are ok re-working some of your Guzzle code (just like you did), then feel free to use the new version :).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2793310061" id="dsq-comment-2793310061">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/s_bastien_rosset/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2793310061">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-20</span>
	                            <span class="dsq-commenter-name">Sébastien Rosset</span>
	                        </div>

	                        <div id="dsq-comment-message-2793310061" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2793310061" class="dsq-comment-text">
	                                <p>For information, the code given in this tutorial works with GuzzleHTTP 3 or earlier. On later version, it is very different.</p><p>Here's what I did to make it work:</p><p>include __DIR__.'/vendor/autoload.php';<br>use GuzzleHttp\Client;</p><p>$client = new Client( [</p><p>    'base_uri' =&gt; '<a href="http://disq.us/url?url=http%3A%2F%2Fcoop.apps.knpuniversity.com%3AEWwLhlptjJ763kWIZaeqZhtOZ4E&amp;cuid=1175718" rel="nofollow noopener">http://coop.apps.knpuniversity...</a>',<br>    'defaults' =&gt; [<br>        'exceptions' =&gt; false,</p><p>    ]<br>]);</p><p>$response = $client-&gt;post( 'api/2/eggs-collect', [<br>    'headers' =&gt; [<br>        'Authorization' =&gt; 'Bearer tokensdcsdcsdc66561'<br>    ]<br>]);</p><p>echo $response-&gt;getBody();</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2694719723" id="dsq-comment-2694719723">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2694719723">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-25</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2694719723" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2694719723" class="dsq-comment-text">
	                                <p>Hi Rex!</p><p>Yep, that's one way - glad you figured that out :). There's also a download link on the upper right of this page if you're a subscriber.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2690512578" id="dsq-comment-2690512578">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/rextsao/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2690512578">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-23</span>
	                            <span class="dsq-commenter-name">Rex Tsao</span>
	                        </div>

	                        <div id="dsq-comment-message-2690512578" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2690512578" class="dsq-comment-text">
	                                <p>I guess I got the start project from Github, thanks!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2690416922" id="dsq-comment-2690416922">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/rextsao/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2690416922">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-23</span>
	                            <span class="dsq-commenter-name">Rex Tsao</span>
	                        </div>

	                        <div id="dsq-comment-message-2690416922" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2690416922" class="dsq-comment-text">
	                                <p>Hi, where can I download the start project? I can't find it.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2657991293" id="dsq-comment-2657991293">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2657991293">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-04</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2657991293" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2657991293" class="dsq-comment-text">
	                                <p>Yep, unfortunately - Guzzle came out with a flurry of releases in a short time (4, 5 &amp; 6). Fortunately, you an still install version 3 without (most) conflicts - because they renamed the library afterwards and still maintain those docs. And (also fortunately) the HTTP client itself isn't the central focus of the tutorial.</p><p>That being said, I *love* this tutorial - so it's on our list to update it someday to make it easier to use Guzzle :).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2657267903" id="dsq-comment-2657267903">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/rui_peng/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2657267903">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-04</span>
	                            <span class="dsq-commenter-name">Rui Peng</span>
	                        </div>

	                        <div id="dsq-comment-message-2657267903" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2657267903" class="dsq-comment-text">
	                                <p>Guzzle seems to have changed a lot. The current version is Guzzle 6. The way it is used has also changed. Would you please add more information on how to use Guzzle 6? It is just a little confusing. I am looking for some information on OAuth2 for Nodejs. </p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2234619989" id="dsq-comment-2234619989">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2234619989">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-09-03</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2234619989" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2234619989" class="dsq-comment-text">
	                                <p>Hey Mattia!</p><p>I haven't used FOSOAuthServerBundle yet, so I won't be a big help to you :/. But, it looks like FOSOAuthBundle supplies much of what you need already, right? If you revoke a token, I would imagine that FOSOAuthServerBundle already denies access for revoked tokens. And if you want to use tokens in your JavaScript, you'll just need to setup a way for your JavaScript to get an access token - either via the implicit flow, or possibly just by having the user login with a username/password and then returning an access token (which should be pretty easy).</p><p>Sorry I can't be more help -  I'm just not very familiar with FOSOAuthServerBundle. Related to authentication, KnpU Guard might be useful: <a href="https://disq.us/url?url=https%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fguard%3A0wxihcBbEDdRP1ng-NRTsjkFHe8&amp;cuid=1175718" rel="nofollow noopener">https://knpuniversity.com/scre...</a> - or everything may already be handled by the OAuth bundle :).</p><p>Good luck!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2227866121" id="dsq-comment-2227866121">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/mattiamariselli/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/17197/5967/avatar92.jpg?1474212621">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2227866121">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-08-31</span>
	                            <span class="dsq-commenter-name">Mattia Mariselli</span>
	                        </div>

	                        <div id="dsq-comment-message-2227866121" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2227866121" class="dsq-comment-text">
	                                <p>Can someone help me?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2223053928" id="dsq-comment-2223053928">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/mattiamariselli/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/17197/5967/avatar92.jpg?1474212621">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2223053928">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-08-28</span>
	                            <span class="dsq-commenter-name">Mattia Mariselli</span>
	                        </div>

	                        <div id="dsq-comment-message-2223053928" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2223053928" class="dsq-comment-text">
	                                <p>Hi, I want to use FOSOAuthBundle to manage all the login in my Application. I’d like that when a user log in, Symfony doesn’t store the UsernamePasswordToken but store, instead, the Access Token provided by FOSOAuth bundle. Doing this I’d like that when an Access Token is revoked, the user logged will be logged out. I also would like that in the frontend of my website, the Javascript use the same API that the mobile application use. I hope i did explain well my problem.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2126635021" id="dsq-comment-2126635021">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2126635021">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-07-09</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2126635021" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2126635021" class="dsq-comment-text">
	                                <p>Will do - it's not smooth yet - I probably would have had the same question as you :)</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2126010646" id="dsq-comment-2126010646">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/pierre_de_lespinay/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/7477/5062/avatar92.jpg?1380130154">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2126010646">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-07-09</span>
	                            <span class="dsq-commenter-name">Pierre de LESPINAY</span>
	                        </div>

	                        <div id="dsq-comment-message-2126010646" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2126010646" class="dsq-comment-text">
	                                <p>It sure does, thanks. Maybe you should mention the fact that one needs to subscribe to get the files, for those coming from a Google search like me.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2125615507" id="dsq-comment-2125615507">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2125615507">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-07-09</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2125615507" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2125615507" class="dsq-comment-text">
	                                <p>Hey Pierre!</p><p>Yes, we do start with some files - if you're a subscriber, there's a Download button on this page that has the stuff you'll need. That download comes with a start directory and a finish directory - we're working in the start.</p><p>If you don't have a subscription, you can still get the start code directly form the repository: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fknpuniversity%2Foauth%3ATjHr3q_6QwrJ_zX76uodAsM03uA&amp;cuid=1175718" rel="nofollow noopener">https://github.com/knpuniversi...</a>.</p><p>Does that help?</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2123121052" id="dsq-comment-2123121052">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/pierre_de_lespinay/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/7477/5062/avatar92.jpg?1380130154">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2123121052">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-07-08</span>
	                            <span class="dsq-commenter-name">Pierre de LESPINAY</span>
	                        </div>

	                        <div id="dsq-comment-message-2123121052" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2123121052" class="dsq-comment-text">
	                                <p>You are talking about installing the vendors with composer, but I can't find your requirements.<br>I have the impression you start from existing files, where can I find them if it is the case ?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2030787499" id="dsq-comment-2030787499">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2030787499">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-05-17</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2030787499" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2030787499" class="dsq-comment-text">
	                                <p>Hi Chris!</p><p>You're exactly right: that's up to your business logic code. So basically, with client credentials, the token you're using means you're authenticating "on behalf of the application" that the token belongs to. Then, in your business code, if you wanted, you could say "since UserA is the owner of Application X, if someone sends a token for Application X, then they have access to things on UserA's account". So, purely up to you :).</p><p>Great question!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2025966379" id="dsq-comment-2025966379">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/chris_peng/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/15765/5151/avatar92.jpg?1431661594">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2025966379">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-05-15</span>
	                            <span class="dsq-commenter-name">Chris  Peng</span>
	                        </div>

	                        <div id="dsq-comment-message-2025966379" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2025966379" class="dsq-comment-text">
	                                <p>I am trying to build a oauth-based api server with client credential grant type, I find that I don't know how does oauth know '/api/2/egg' and '/api/3/egg' belongs to different token, when a client get a token with client credential grant, it passed my oauth layer and gets everything, is this logic implemented by additional business code?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	        </ul>
	    </div>
            </div>

    <script type="text/javascript">
    var disqus_shortname = 'knpuniversity';
    var disqus_container_id = 'disqus_thread';var disqus_developer = 1;var disqus_identifier = 'course_video_client-credentials';var disqus_url = 'https://knpuniversity.com/screencast/oauth/client-credentials';var disqus_config = function () {};

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

                                            </div>
                    <div class="pull-left-xs pull-right-md">
                                        <a class="btn btn-success"
           href="authorization-code#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                    </div>
                    <div class="pull-left addthis-module">
                        
    <div class="addthis_toolbox addthis_default_style js-analytics-addthis-wrapper addthis_32x32_style" addthis:url="http://knpuniversity.com/screencast/oauth/client-credentials" addthis:title="OAuth2 in 8 Steps">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer class="footer footer-styling">
    <div class="container">
        <div class="row">
                        <div class="col-xs-7 col-sm-4">
                <div class="row">
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../courses/all">All Courses</a></li>
                                                            <li><a class="knp-color-black" href="../../pricing.1">Pricing</a></li>
                                                        <li><a class="knp-color-black" href="../../faq">FAQ</a></li>
                            <li><a class="knp-color-black" href="../../training">Training</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../about">About</a></li>
                            <li><a class="knp-color-black" href="../../blog">Blog</a></li>
                            <li><a class="knp-color-black" href="../../contact">Contact Us</a></li>
                            <li>
                                <a class="knp-color-black" href="../../terms">Terms</a>
                                <span class="knp-color-black">&amp;</span>
                                <a class="knp-color-black" href="../../privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="hidden-xs col-sm-4">
                <p class="disclaimer">Symfony is a registered trademark of Fabien Potencier in the United States and/or other countries.
                This product is not endorsed or sponsored by Fabien Potencier.
                </p>
            </div>
            <div class="col-xs-5 col-sm-4">
                <div class="social-icons">
                    <a class="btn btn-social-icon btn-twitter" href="https://twitter.com/KnpUniversity">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a class="btn btn-social-icon btn-facebook" href="https://www.facebook.com/KnpLabs/">
                        <i class="fa fa-facebook"></i>
                    </a>
                    <a class="btn btn-social-icon btn-github" href="https://github.com/knpuniversity">
                        <i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
                    </div>
    </div>
</footer>

<!-- JS -->
            <script>
        Core.analyticsVideoStatsUrl = '/api/analytics/video/duration';
    </script>

            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-7062980-20']);
        _gaq.push(['_trackPageview']);
    </script>
    <script>
    
    </script>
    
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    
                <script type="text/javascript">
      (function() {
        var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
        uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/pOay2WLVabhXiEffbarO6Q.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
      })();

      UserVoice = window.UserVoice || [];
      UserVoice.push(['showTab', 'classic_widget', {
          tab_position: 'bottom-right',
          tab_label: 'Ideas or Feedback?',
          tab_color: '#005E8E'
      }]);
    </script>
        
            
        <script type="text/javascript">
    var _sf_async_config={uid:54262,domain:"knpuniversity.com",useCanonical:true};
    (function(){
      function loadChartbeat() {
        window._sf_endpt=(new Date()).getTime();
        var e = document.createElement('script');
        e.setAttribute('language', 'javascript');
        e.setAttribute('type', 'text/javascript');
        e.setAttribute('src', '//static.chartbeat.com/js/chartbeat.js');
        document.body.appendChild(e);
      }
      var oldonload = window.onload;
      window.onload = (typeof window.onload != 'function') ?
         loadChartbeat : function() { oldonload(); loadChartbeat(); };
    })();
    </script>
    
            <script>
            (function(){
                var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
            })("woopra");

            woopra.config({
                domain: 'knpuniversity.com',
                download_tracking: true,
                outgoing_tracking: true
            });

                            woopra.identify({
                    userType: 'anonymous',
                    hasSubscription: 'no'
                });
                    </script>

        <script>
            woopra.track(
            'course_view_chapter',
            {"course":"oauth","courseIsOwned":false,"chapter":"Client Credentials","chapterNumber":2,"chapterIsFree":true}
        );
    </script>

        <script>
            woopra.track();
        </script>
     
        <script type="text/javascript">
    var _qevents = _qevents || [];

    (function() {
    var elem = document.createElement('script');
    elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
    })();

    _qevents.push({
    qacct:"p-8-SEHS37bhSQ0"
    });
    </script>

    <noscript>
    <div style="display:none;">
    <img src="http://pixel.quantserve.com/pixel/p-8-SEHS37bhSQ0.gif" border="0" height="1" width="1" alt="Quantcast"/>
    </div>
    </noscript>
    


    <script type="text/javascript" src="../../assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script type="text/javascript" src="../../assets/vendor/zeroclipboard/dist/ZeroClipboard.min.js"></script>
    <script type="text/javascript" src="../../js/CodeBlocks.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/underscore.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/doctools.js"></script>

    <script>
        Core.courseTitle = 'OAuth2 in 8 Steps';
        Core.courseId = 44
        Core.courseIsOwned = false;
        Core.courseSlug = 'oauth';
                    Core.chapterTitle = 'Client Credentials';
            Core.chapterNumber = 2;
            Core.chapterIsFree = true;
            Core.chapterSlug = 'client-credentials';
        
                var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.0.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };

        jQuery(document).ready(function() {
            // Stick left sidebar menu
            $('.js-sticker').sticky();

            var $scriptWrapper = $('.js-script-content-wrapper');
            var codeBlocks = new Core.CodeBlocks($scriptWrapper);

            var expandList = $('.js-expand-list');

            expandList.on('click', function(){
                var target = $(this).data('target');
                var $expandArea = $('#' + target);
                $expandArea.toggleClass('expanded');

                // http://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery
                $(document).one('click', function closeExpandList (e){
                    if($expandArea.has(e.target).length === 0){
                        $expandArea.removeClass('expanded');
                    } else {
                        $(document).one('click', closeExpandList);
                    }
                });
            });
        });
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>



    <script type="text/javascript">
    var addthis_share = {
        templates: {
            twitter: '{{title}} - {{url}} | via @KnpUniversity'
        }
    }
</script>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=weaverryan"></script>

<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"b4d8035b34","applicationID":"3720092","transactionName":"MgEBMkZVXBFXBRENWwtLIgVAXV0MGQ0LFGsQCgoQUUZBC0IfOgdbEBYQA2tHWg1B","queueTime":0,"applicationTime":634,"atts":"HkYCRA5PTx8=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
