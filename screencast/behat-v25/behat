<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
            <script src="https://cdn.optimizely.com/js/421270022.js"></script>
    
                    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"Vg4HUlBbGwAHVlFSDgM="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(12),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{d?d-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,(new Date).getTime(),!0])}catch(s){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,(new Date).getTime()])}var i=t("handle"),a=t(13),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,d=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(5),t(4),"addEventListener"in window&&t(3),s.xhrWrappable&&t(6),u=!0)}c.on("fn-start",function(t,e,n){u&&(d+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&d>0&&(d-=1)}),c.on("internal-error",function(t){i("ierr",[t,(new Date).getTime(),!0])})},{}],3:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(14)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],4:[function(t,e,n){var r=t("ee").get("raf"),o=t(14)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],5:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(14)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],6:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,v,"fn-",c)}function i(t){y.push(t),h&&(w=-w,b.data=w)}function a(){for(var t=0;t<y.length;t++)r([],y[t]);y.length&&(y=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(3);var f=t("ee"),u=f.get("xhr"),d=t(14)(u),l=NREUM.o,p=l.XHR,h=l.MO,m="readystatechange",v=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],y=[];e.exports=u;var g=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(p,g),g.prototype=p.prototype,d.inPlace(g.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),h){var w=1,b=document.createTextNode(w);new h(a).observe(b,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],7:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var a=t.getResponseHeader("X-NewRelic-App-Data");a&&(e.cat=a.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return h(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(8),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,l=t("id"),p=t(11),h=t(10),m=window.XMLHttpRequest;a.features.xhr=!0,t(6),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=h(r);i&&(n.txSize=i)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var a=0;a<d;a++)e.addEventListener(u[a],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{}],8:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],9:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[(new Date).getTime()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(12),c=t(13),s=t("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var u=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit"],d="api-",l=d+"ixn-";a(u,function(t,e){f[e]=o(d+e,!0,"api")}),f.addPageAction=o(d+"addPageAction",!0),f.setCurrentRouteName=o(d+"routeName",!0),e.exports=newrelic,f.interaction=function(){return(new r).get()};var p=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(l+"tracer",[Date.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){p[e]=o(l+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,(new Date).getTime()])}},{}],10:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],11:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],12:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],13:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],14:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(13),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){l([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o)}catch(a){l([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){l([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function l(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o){if(!l.aborted){t&&t(n,r,o);for(var i=e(o),a=h(n),c=a.length,s=0;s<c;s++)a[s].apply(i,r);var f=u[g[n]];return f&&f.push([w,n,r,i]),i}}function p(t,e){y[t]=h(t).concat(e)}function h(t){return y[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",g[n]=e,e in u||(u[e]=[])})}var y={},g={},w={on:p,emit:n,get:m,listeners:h,context:e,buffer:v,abort:a,aborted:!1};return w}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var c="nr@context",s=t("gos"),f=t(12),u={},d={},l=e.exports=o();l.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!b++){var t=w.info=NREUM.info,e=d.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return f.abort();s(y,function(e,n){t[e]||(t[e]=n)}),c("mark",["onload",a()],null,"api");var n=d.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===d.readyState&&i()}function i(){c("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var c=t("handle"),s=t(12),f=t("ee"),u=window,d=u.document,l="addEventListener",p="attachEvent",h=u.XMLHttpRequest,m=h&&h.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:h,REQ:u.Request,EV:u.Event,PR:u.Promise,MO:u.MutationObserver},t(9);var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-998.min.js"},g=h&&m&&m[l]&&!/CriOS/.test(navigator.userAgent),w=e.exports={offset:a(),origin:v,features:{},xhrWrappable:g};d[l]?(d[l]("DOMContentLoaded",i,!1),u[l]("load",r,!1)):(d[p]("onreadystatechange",o),u[p]("onload",r)),c("mark",["firstbyte",a()],null,"api");var b=0},{}]},{},["loader",2,7]);</script>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Behat > BDD, Behat (version 2.5), Mink and other Wonderful Things | KnpUniversity</title>

                    <link href="../../builds/main-db6835bf19d99bcc09032789f3bd39e4.css" rel="stylesheet">

        <link href='https://fonts.googleapis.com/css?family=Rokkitt' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>
    

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/tomorrow-night.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/tomorrow-night.min.css">


        <link rel="stylesheet" href="../../builds/code_block_styles-2d783e385d9dbb1ef88d9053d1b8d675.css">



    <link href="../../builds/video-6b5fa6dfb768239b226d39d08bd4867e.css" rel="stylesheet">

                        <script src="../../bundles/fosjsrouting/js/router.js"></script>

        <script src="../../builds/main-1dfa89b76a105f9c2d98.js"></script>
        <script src="../../js/routing?callback=fos.Router.setData"></script>
            

    <script>
        // video settings
        window.video = {
            isCourseChapterPaid: false,
            courseChapterId: 7073
        };

                window.video.nextDetails = {
            'type': 'video',
            'title': 'Up Next: Mink\x21 <i class="fa fa-play"></i>',
            'url': '/screencast/behat-v25/mink#play'
        };
            </script>

    <script src="../../builds/video-1dfa89b76a105f9c2d98.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            var hashValue = window.location.hash.substr(1);
            if (hashValue.substr(0, 7) == 'comment') {
                // this is a #comment link - open up the comment tab!
                $('.nav-tabs a[href="#tab-comment"]').click();
            }
        });
    </script>

    <link rel="alternate" type="application/rss+xml" title="Blog feed with technical articles around PHP and screencast and tutorial updates from KnpUniversity.com" href="http://feeds.feedburner.com/knpuniversity" />

    <meta name="description" content="If you own this tutorial and want to upgrade to the latest [Behat 3](https://knpuniversity.com/screencast/behat)
version, send us an email/contact message and we&#039;ll be happy to give you a coupon code to order the 3.0 version
absolutely free :). Yay upgrading!

Ready to revolutionize how you develop? In this tutorial, you&#039;ll internalize Behavior-Driven Development and how thinking
about *behavior* will increase the quality and efficiency of your code. You&#039;ll become an expert in Behat - the BDD PHP
framework - and Mink - your key to testing web applications in sophisticated ways that include the ability to test your
JavaScript pages. We&#039;ll also explore the pitfalls of testing with Behat, such as data sanitization, bootstrapping your
code, and other challenges. By the end, you&#039;ll be well on your way to writing high-quality tests for your application
and - more importantly - approaching development in a totally new light.

Behat works great with any PHP project, but if you&#039;re using Symfony2, we&#039;ll give you some special tips to get you rolling.
">

    <meta property="og:site_name" content="KnpUniversity - PHP and Symfony Video Tutorial Screencasts">
    <meta name="twitter:site" content="@KnpUniversity"><link rel="shortcut icon" href="../../assets/images/favicon.ico">
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    <meta property="og:title" content="Behat">
<meta property="og:description" content="If you own this tutorial and want to upgrade to the latest [Behat 3](https://knpuniversity.com/screencast/behat)
version, send us an email/contact message and we&amp;#039;ll be happy to give you a coupon code to order the 3">
<meta property="og:url" content="http://knpuniversity.com/screencast/behat-v25/behat">
    <meta property="og:image" content="http://knpuniversity.com/imagine/course_video_poster_large/uploads/screencast/behat-v25:bd1a743abd0dae64fee99bb39ea1647da38d748e/behat.png">

<meta name="twitter:card" content="summary">


                            
    </head>
<body data-user-id="" >
<nav class="navbar navbar-inverse nav-margin navbar-learning-layout">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle toggle-button collapsed" data-toggle="collapse" data-target="#js-navbar" aria-expanded="false" aria-controls="js-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../logout" class="navbar-brand">
                <span class="knp-color-blue">Knp</span>
                <span class="knp-color-white">University</span>
            </a>
        </div>
        <form class="navbar-form navbar-left navbar-form-border" role="search" method="GET" action="http://knpuniversity.com/search">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search Tutorials" value="" name="q">

                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </form>
        <div id="js-navbar" class="collapse-fix collapse navbar-right navbar-collapse">
            

<ul class="nav navbar-nav nav-narrowerOnSmall">
            <li><a href="../../checkout/subscription/team_yearly/5" title="Cart"><i class="fa fa-shopping-cart"></i></a></li>
        <li class="dropdown"><a href="behat#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <i class="fa fa-angle-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="../../tracks.1">Tracks</a></li>
          <li><a href="../../courses/all">All Courses</a></li>
        </ul>
    </li>
            <li><a href="../../pricing.1">Pricing</a></li>
        <li><a href="../../training">Training</a></li>
                <li class="visible-xs"><a href="../../logout">My Profile</a></li>
        <li class="visible-xs"><a href="../../logout">Sign Out</a></li>

            <li><a href="../../login.1">Log In</a></li>
        <li class="btn btn-sm btn-warning signup-btn"><a class="signup" href="../../signup/index.html">Sign Up</a></li>
    </ul>

        </div>
    </div>
</nav>


    




<div class="table-contents-container">
  <div class="container expandList" id="js-chapter-list">
      <button class="table-contents-container-button js-expand-list" data-target="js-chapter-list" title="Chapter List">
          <i class="fa fa-bars"></i>
                        4.
                            Behat
                </button>
      <div class="expandList-body">
          <div class="expandList-bodyInner">
              <h3 class="expandList-header">
                  <a class="course-title-expand" href="../behat-v25.1">BDD, Behat (version 2.5), Mink and other Wonderful Things</a>
              </h3>

                                <div class="watched-tut-progress-container watched-tut-progress-container-overview">
        <div class="watched-tut-progress-overview" style="width: 0%; margin-right: 100%;" title="0% complete"><span class="profile-progress-title">0%</span></div>
    </div>


              
              <div class="expand-chapter-list">
                      
    
    <!-- Table of contents -->
    <div class="chapter-list">
        <ul class="list-unstyled">
            
                
                                <li class="title chapter-list-item ">
            <a href="intro" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                1.
                        Introduction
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 8:31</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="bdd" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                2.
                        Behavior-Driven Development
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:25</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="gherkin" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                3.
                        Gherkin
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:46</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item chapter-list-item-active">
            <a href="behat" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                4.
                        Behat
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:49</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="mink" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                5.
                        Mink!
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 10:55</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="mink-behat" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                6.
                        Behat and Mink
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 13:57</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="javascript" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                7.
                        JavaScript
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:14</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="in-your-application" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                8.
                        You bet your Sweet App
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 10:15</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="other-fun-stuff" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                9.
                        The fun stuff Chapter
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 11:17</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="final-words" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                10.
                        Get Testing!
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 1:34</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


                    </ul>
    </div>

    
              </div>
          </div>
      </div>
  </div>
  <div>
                <a href="../../pricing/behat-v25" class="btn btn-success pull-right-md download-buy-buttons">Buy <span class="hidden-xs">Access to Course</span></a>
              </div>
</div>


        <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-9 col-lg-10">
                <h1 class="account-header account-header-low-margin-top">Behat</h1>
                    <div style="margin-bottom: 10px;">
        <span class="label label-success">UPGRADE!</span>
        <a href="../behat/resume">Check out the newest version of this tutorial</a>
    </div>

                                    <p class="hidden-xs">
                        Course:
                        <a class="knp-color-black" href="../behat-v25.1"><em>BDD, Behat (version 2.5), Mink and other Wonderful Things Tutorial</em></a>                    </p>
                            </div>
        </div>

                <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="full-block-container">
                    <div class="frame-padding">
                        <div id="player">
                                                                                <div>
                                                                <div class="row">
                                    <div class="end-show">
                                        <div class="xs-col-12">
                                            <p class="end-show-header">Keep learning!</p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link"><a href="../../pricing.1" class="btn btn-success btn-md">Start your All Access Pass</a></p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link text-center"><a href="../buy/collections" class="knp-color-white">Buy just this tutorial for $12.00</a></p>
                                        </div>
                                    </div>
                                </div>
                                                            </div>
                                                </div>
                    </div>
                </div>
            </div>
        </div>
         
        <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="pull-right">
                                    <a class="btn btn-success"
           href="mink#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                </div>

                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a data-toggle="tab" href="behat#tab-script">Script</a></li>
                    <li><a data-toggle="tab" href="behat#tab-comment">
                        <i class="fa fa-comment-o"></i>
                                                    
                                                                                                (4)
                                                                                        Conversation
                                            </a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="tab-script">
                        <div class="js-script-content-wrapper top-margin-script script-content">
                                                                                        <a href="https://github.com/knpuniversity/behat/edit/master/knpu/behat.rst" target="_blank" class="btn btn-default btn-circle pull-right js-tooltip" title="Edit on GitHub"><span class="fa fa-pencil"></span></a>
                                                                    
  <div class="section" id="behat">
<h1>Behat<a class="headerlink" href="behat#behat" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-behat">
<h2>Installing Behat<a class="headerlink" href="behat#installing-behat" title="Permalink to this headline">¶</a></h2>
<p>To really learn what Behat does, let&#8217;s hop back in our DeLorean and pretend
that we&#8217;re writing the UNIX <tt class="docutils literal"><span class="pre">ls</span></tt> command. I&#8217;ll create a new directory with
a new <tt class="docutils literal"><span class="pre">composer.json</span></tt> file. This time, we&#8217;ll install <em>only</em> Behat by following
<a class="reference external" href="http://docs.behat.org/quick_intro.html#method-1-composer">Behat&#8217;s Quick Tour</a>:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;require&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;behat/behat&quot;</span><span class="p">:</span> <span class="s2">&quot;2.4.*@stable&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;minimum-stability&quot;</span><span class="p">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span>
    <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;bin-dir&quot;</span><span class="p">:</span> <span class="s2">&quot;bin/&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Just like before, initialize the project by running <tt class="docutils literal"><span class="pre">php</span> <span class="pre">bin/behat</span> <span class="pre">--init</span></tt>.
This creates the same <tt class="docutils literal"><span class="pre">FeatureContext.php</span></tt> class as earlier. In this case,
things are simple enough that we don&#8217;t need a <tt class="docutils literal"><span class="pre">behat.yml</span></tt> file.</p>
</div>
<div class="section" id="feature-scenarios-and-custom-step-definitions">
<h2>Feature, Scenarios and Custom Step Definitions<a class="headerlink" href="behat#feature-scenarios-and-custom-step-definitions" title="Permalink to this headline">¶</a></h2>
<p>Our project is setup, so let&#8217;s create our first feature file called <tt class="docutils literal"><span class="pre">ls.feature</span></tt>.
Remember to focus on the business value of the <tt class="docutils literal"><span class="pre">ls</span></tt> command:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"> ls</span>
<span class="nf">  In order to see the directory structure</span>
<span class="nf">  As a UNIX user</span>
<span class="nf">  I need to be able to list the current directory&#39;s contents</span>
</pre></div>
</div>
<p>Next, let&#8217;s write some scenarios! Suppose that Linus Torvalds said to us:</p>
<div class="highlight-text"><div class="highlight"><pre>If you have two files in a directory, and you&#39;re running the command - you
should see them listed.
</pre></div>
</div>
<p>Let&#8217;s turn this into our first scenario. Remember that we&#8217;re following the
<tt class="docutils literal"><span class="pre">Given</span></tt>, <tt class="docutils literal"><span class="pre">When</span></tt>, <tt class="docutils literal"><span class="pre">Then</span></tt> format, but using natural language:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"> ls</span>
<span class="nf"># ...</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> List 2 files in a directory</span>
<span class="k">    Given </span><span class="nf">I have a file named &quot;</span><span class="s">john</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">I have a file named &quot;</span><span class="s">hammond</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I run &quot;</span><span class="s">ls</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">I should see &quot;</span><span class="s">john</span><span class="nf">&quot; in the output</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">I should see &quot;</span><span class="s">hammond</span><span class="nf">&quot; in the output</span>
</pre></div>
</div>
<p>The goal of Behat is to let you execute your scenarios as tests. So let&#8217;s
try it! But this time, instead of running and passing, Behat prints out some
methods and regular expressions. Copy these into your <tt class="docutils literal"><span class="pre">FeatureContext</span></tt>
class:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * @Given /^I have a file named &quot;([^&quot;]*)&quot;$/</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">iHaveAFileNamed</span><span class="p">(</span><span class="nv">$argument1</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">PendingException</span><span class="p">();</span>
<span class="p">}</span>

<span class="sd">/**</span>
<span class="sd"> * @When /^I run &quot;([^&quot;]*)&quot;$/</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">iRun</span><span class="p">(</span><span class="nv">$argument1</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">PendingException</span><span class="p">();</span>
<span class="p">}</span>

<span class="sd">/**</span>
<span class="sd"> * @Then /^I should see &quot;([^&quot;]*)&quot; in the output$/</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">iShouldSeeInTheOutput</span><span class="p">(</span><span class="nv">$argument1</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">PendingException</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Behat works by reading each step, or line, in your scenario and executing
a method in <tt class="docutils literal"><span class="pre">FeatureContext</span></tt>, which is called a &#8220;step definition&#8221;. This
is done by matching the step to the regular expressions above each method.
Behat was also smart enough to generate wildcards in the regex: the quoted
values are passed as arguments to the methods. This makes it easy to create
re-usable steps.</p>
<p>Our job now is to fill in the body of each method. To check the output in
the last method, we can create a new <tt class="docutils literal"><span class="pre">output</span></tt> property on the class and
store the output there. This is a common trick when you need information
between different steps. Finally, to sandbox our test, we&#8217;ll create and move
into a <tt class="docutils literal"><span class="pre">test/</span></tt> directory:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">private</span> <span class="nv">$output</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// this actually creates 2 test directories inside of each other!</span>
    <span class="c1">// the reason is subtle, and we&#39;ll fix this soon</span>
    <span class="nb">mkdir</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>
    <span class="nb">chdir</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="sd">/** @Given /^I have a file named &quot;([^&quot;]*)&quot;$/ */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">iHaveAFileNamed</span><span class="p">(</span><span class="nv">$file</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nb">touch</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
<span class="p">}</span>

<span class="sd">/** @When /^I run &quot;([^&quot;]*)&quot;$/ */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">iRun</span><span class="p">(</span><span class="nv">$command</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nb">exec</span><span class="p">(</span><span class="nv">$command</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">);</span>
<span class="p">}</span>

<span class="sd">/** @Then /^I should see &quot;([^&quot;]*)&quot; in the output$/ */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">iShouldSeeInTheOutput</span><span class="p">(</span><span class="nv">$string</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">array_search</span><span class="p">(</span><span class="nv">$string</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">)</span> <span class="o">===</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;Did not see &quot;%s&quot; in the output&#39;</span><span class="p">,</span> <span class="nv">$string</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When we run <tt class="docutils literal"><span class="pre">bin/behat</span></tt> again, it works! As each step is read, each method
is executed.</p>
</div>
<div class="section" id="hooks">
<h2>Hooks!<a class="headerlink" href="behat#hooks" title="Permalink to this headline">¶</a></h2>
<p>But when we run Behat again, it blows up. If we scroll up, it makes
sense. Each test creates a <tt class="docutils literal"><span class="pre">test/</span></tt> directory, but never cleans it up.
To fix this, create a new method in <tt class="docutils literal"><span class="pre">FeatureContext</span></tt> that reverses the
setup work:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">public</span> <span class="k">function</span> <span class="nf">moveOutOfTestDir</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nb">chdir</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">is_dir</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="nb">system</span><span class="p">(</span><span class="s1">&#39;rm -r &#39;</span><span class="o">.</span><span class="nb">realpath</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Behat creates a new <tt class="docutils literal"><span class="pre">FeatureContext</span></tt> object for each scenario that it runs,
which means that the <tt class="docutils literal"><span class="pre">__construct</span></tt> method is run before every scenario.
To tell Behat to run our clean method <em>after</em> each scenario just add an <tt class="docutils literal"><span class="pre">AfterScenario</span></tt>
annotation:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * @AfterScenario</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">moveOutOfTestDir</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nb">chdir</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">is_dir</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="nb">system</span><span class="p">(</span><span class="s1">&#39;rm -r &#39;</span><span class="o">.</span><span class="nb">realpath</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>While we&#8217;re at it, let&#8217;s also move the setup code into a method that&#8217;s tagged
with <tt class="docutils literal"><span class="pre">BeforeScenario</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * @BeforeScenario</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">moveIntoTestDir</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nb">mkdir</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>
    <span class="nb">chdir</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you&#8217;re wondering why we didn&#8217;t just use <tt class="docutils literal"><span class="pre">__construct</span></tt> and <tt class="docutils literal"><span class="pre">__destruct</span></tt>,
the answer is that these methods behave slightly differently than tagging
methods with <tt class="docutils literal"><span class="pre">&#64;BeforeScenario</span></tt> and <tt class="docutils literal"><span class="pre">&#64;AfterScenario</span></tt>.</p>
</div>
<p>Run Behat twice more to let the new methods clean things up. Now our test
is passing perfectly every time.</p>
</div>
<div class="section" id="using-phpunit-assert-functions">
<h2>Using PHPUnit assert functions<a class="headerlink" href="behat#using-phpunit-assert-functions" title="Permalink to this headline">¶</a></h2>
<p>If you have PHPUnit installed, then you can uncomment out a few lines at
the top of your test to make life easier. Once you&#8217;ve done this, you have
access to a bunch of PHPUnit assert functions. We can use one of them, <tt class="docutils literal"><span class="pre">assertContains</span></tt>
to make our test a bit nicer on the eyes:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="sd">/**</span>
<span class="sd"> * @Then /^I should see &quot;([^&quot;]*)&quot; in the output$/</span>
<span class="sd"> */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">iShouldSeeInTheOutput</span><span class="p">(</span><span class="nv">$string</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nx">assertContains</span><span class="p">(</span>
        <span class="nv">$string</span><span class="p">,</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">,</span>
        <span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;Did not see &quot;%s&quot; in the output&#39;</span><span class="p">,</span> <span class="nv">$string</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-second-scenario">
<h2>The Second Scenario<a class="headerlink" href="behat#the-second-scenario" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ve written one scenario, so let&#8217;s try another! This time Linus tells us:</p>
<div class="highlight-text"><div class="highlight"><pre>If you have one file and one directory, and you run the
command - you should see them both listed too.
</pre></div>
</div>
<p>Hopefully, writing scenarios is getting easy:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"> ls</span>
<span class="nf"># ...</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> List 2 files in a directory</span>
<span class="nf">  </span><span class="c"># ...</span><span class="nf"></span>

<span class="nf">  Scenario: List 1 file and 1 directory</span>
<span class="k">    Given </span><span class="nf">I have a file named &quot;</span><span class="s">john</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">I have a dir named &quot;</span><span class="s">ingen</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I run &quot;</span><span class="s">ls</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">I should see &quot;</span><span class="s">john</span><span class="nf">&quot; in the output</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">I should see &quot;</span><span class="s">ingen</span><span class="nf">&quot; in the output</span>
</pre></div>
</div>
<p>Just like before, run <tt class="docutils literal"><span class="pre">bin/behat</span></tt>, copy in the missing step definition,
and implement it. And with almost no work, this new scenario passes!</p>
</div>
<div class="section" id="background">
<h2>Background<a class="headerlink" href="behat#background" title="Permalink to this headline">¶</a></h2>
<p>We now have two working scenarios, but a little bit of duplication. Specifically,
each scenario starts with the same <tt class="docutils literal"><span class="pre">Given</span> <span class="pre">I</span> <span class="pre">have</span> <span class="pre">a</span> <span class="pre">file</span> <span class="pre">named</span> <span class="pre">&quot;john&quot;</span></tt>. To
fix this, add a <tt class="docutils literal"><span class="pre">Background</span></tt> before both scenarios:</p>
<div class="highlight-gherkin"><div class="highlight"><pre><span class="k">Feature:</span><span class="nf"> ls</span>
<span class="nf"># ...</span>

<span class="nf">  </span><span class="k">Background:</span><span class="nf"></span>
<span class="k">    Given </span><span class="nf">I have a file named &quot;</span><span class="s">john</span><span class="nf">&quot;</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> List 2 files in a directory</span>
<span class="k">    And </span><span class="nf">I have a file named &quot;</span><span class="s">hammond</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I run &quot;</span><span class="s">ls</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">I should see &quot;</span><span class="s">john</span><span class="nf">&quot; in the output</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">I should see &quot;</span><span class="s">hammond</span><span class="nf">&quot; in the output</span>

<span class="nf">  </span><span class="k">Scenario:</span><span class="nf"> List 1 file and 1 directory</span>
<span class="k">    And </span><span class="nf">I have a dir named &quot;</span><span class="s">ingen</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">When </span><span class="nf">I run &quot;</span><span class="s">ls</span><span class="nf">&quot;</span>
<span class="nf">    </span><span class="k">Then </span><span class="nf">I should see &quot;</span><span class="s">john</span><span class="nf">&quot; in the output</span>
<span class="nf">    </span><span class="k">And </span><span class="nf">I should see &quot;</span><span class="s">ingen</span><span class="nf">&quot; in the output</span>
</pre></div>
</div>
<p>Background is dead-simple, but really useful! When we re-run the test, each
line in the background is executed before each scenario. Our scenarios are
executed exactly like before, but without the duplication!</p>
<p>In fact, Behat has more cool tricks, including <a class="reference internal" href="mink-behat#behat-scenario-outline"><em>scenario outlines</em></a>,
more hooks like <tt class="docutils literal"><span class="pre">BeforeScenario</span></tt>, a way to organize your scenarios called
tags, and much more. We&#8217;ll see more of these powerful tricks a bit later.</p>
</div>
</div>


    
                        </div>
                    </div>
                    <div class="tab-pane" id="tab-comment">
                        <h3>Leave a comment!</h3>
                                                        <div id="disqus_thread">
                <style type="text/css">
            #dsq-comments {padding: 10px 0 0}
            .dsq-comment {position: relative;clear: both;margin: 0 0 1.5em;}
            .dsq-avatar {left: 0;position: absolute;}
            .dsq-avatar img {border: 0 none;border-radius: 3px;height: 36px;width: 36px;}
            .dsq-comment-body {padding: 0 0 0 46px;}
            .dsq-comment-header {border: 1px solid rgba(0, 0, 0, 0.15);border-radius: 3px;font-size: 13px;line-height: 14px;margin: 0 0 1em;max-height: 36px;overflow: hidden;padding: 10px;position: relative;text-overflow: ellipsis;white-space: nowrap;}
            .dsq-comment-message {word-wrap: break-word;}
            .dsq-comment-message {line-height: 1.5em;margin: 0 0 1em;}
            .dsq-comment-text {display: inline;}
            .dsq-comment-date {float: right;font-size: 90%;margin: 0 12px 0 0;}
        </style>

	    <div id="dsq-content">
	        <ul id="dsq-comments">
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2080350101" id="dsq-comment-2080350101">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2080350101">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-06-15</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2080350101" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2080350101" class="dsq-comment-text">
	                                <p>We'll be busy while you're gone. And congrats - I could tell you were absolutely devouring the content - that's awesome :).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2080133374" id="dsq-comment-2080133374">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/michaelsypes/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/15345/9813/avatar92.jpg?1480968856">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2080133374">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-06-15</span>
	                            <span class="dsq-commenter-name">Michael Sypes</span>
	                        </div>

	                        <div id="dsq-comment-message-2080133374" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2080133374" class="dsq-comment-text">
	                                <p>I was missing the fact that iHaveAFileNamed() was creating the files with touch. (My Linux foo is lacking.) Makes perfect sense now.<br>BTW, I have watched a large number of videos and have learned a great deal, bordering on information overload. (Which side of the border is anyone's guess.) I'm off to go put what I've learned into practice and will return in a couple of months, giving me time to digest, and you time to make more tutorials. In the meantime, I will be singing your praises!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2080109720" id="dsq-comment-2080109720">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2080109720">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-06-15</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2080109720" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2080109720" class="dsq-comment-text">
	                                <p>Hey Michael!</p><p>The __construct() creates the test directory, then the 2 "I have a file named..." lines actually create the 2 files. Because of the chdir('test') in __construct, the files should end up right inside test. Does that make sense? Are you seeing something different?</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2076478786" id="dsq-comment-2076478786">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/michaelsypes/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/15345/9813/avatar92.jpg?1480968856">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2076478786">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-06-12</span>
	                            <span class="dsq-commenter-name">Michael Sypes</span>
	                        </div>

	                        <div id="dsq-comment-message-2076478786" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2076478786" class="dsq-comment-text">
	                                <p>Where did the two files get created? It looks like the initial run of this should have failed because neither file would have been found. Although the constructor created the test directory, it didn't put anything into it.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	        </ul>
	    </div>
            </div>

    <script type="text/javascript">
    var disqus_shortname = 'knpuniversity';
    var disqus_container_id = 'disqus_thread';var disqus_developer = 1;var disqus_identifier = 'course_video_behat';var disqus_url = 'https://knpuniversity.com/screencast/behat-v25/behat';var disqus_config = function () {};

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

                                            </div>
                    <div class="pull-left-xs pull-right-md">
                                        <a class="btn btn-success"
           href="mink#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                    </div>
                    <div class="pull-left addthis-module">
                        
    <div class="addthis_toolbox addthis_default_style js-analytics-addthis-wrapper addthis_32x32_style" addthis:url="http://knpuniversity.com/screencast/behat-v25/behat" addthis:title="BDD, Behat (version 2.5), Mink and other Wonderful Things">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer class="footer footer-styling">
    <div class="container">
        <div class="row">
                        <div class="col-xs-7 col-sm-4">
                <div class="row">
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../courses/all">All Courses</a></li>
                                                            <li><a class="knp-color-black" href="../../pricing.1">Pricing</a></li>
                                                        <li><a class="knp-color-black" href="../../faq">FAQ</a></li>
                            <li><a class="knp-color-black" href="../../training">Training</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../about">About</a></li>
                            <li><a class="knp-color-black" href="../../blog">Blog</a></li>
                            <li><a class="knp-color-black" href="../../contact">Contact Us</a></li>
                            <li>
                                <a class="knp-color-black" href="../../terms">Terms</a>
                                <span class="knp-color-black">&amp;</span>
                                <a class="knp-color-black" href="../../privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="hidden-xs col-sm-4">
                <p class="disclaimer">Symfony is a registered trademark of Fabien Potencier in the United States and/or other countries.
                This product is not endorsed or sponsored by Fabien Potencier.
                </p>
            </div>
            <div class="col-xs-5 col-sm-4">
                <div class="social-icons">
                    <a class="btn btn-social-icon btn-twitter" href="https://twitter.com/KnpUniversity">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a class="btn btn-social-icon btn-facebook" href="https://www.facebook.com/KnpLabs/">
                        <i class="fa fa-facebook"></i>
                    </a>
                    <a class="btn btn-social-icon btn-github" href="https://github.com/knpuniversity">
                        <i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
                    </div>
    </div>
</footer>

<!-- JS -->
            <script>
        Core.analyticsVideoStatsUrl = '/api/analytics/video/duration';
    </script>

            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-7062980-20']);
        _gaq.push(['_trackPageview']);
    </script>
    <script>
    
    </script>
    
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    
                <script type="text/javascript">
      (function() {
        var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
        uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/pOay2WLVabhXiEffbarO6Q.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
      })();

      UserVoice = window.UserVoice || [];
      UserVoice.push(['showTab', 'classic_widget', {
          tab_position: 'bottom-right',
          tab_label: 'Ideas or Feedback?',
          tab_color: '#005E8E'
      }]);
    </script>
        
            
        <script type="text/javascript">
    var _sf_async_config={uid:54262,domain:"knpuniversity.com",useCanonical:true};
    (function(){
      function loadChartbeat() {
        window._sf_endpt=(new Date()).getTime();
        var e = document.createElement('script');
        e.setAttribute('language', 'javascript');
        e.setAttribute('type', 'text/javascript');
        e.setAttribute('src', '//static.chartbeat.com/js/chartbeat.js');
        document.body.appendChild(e);
      }
      var oldonload = window.onload;
      window.onload = (typeof window.onload != 'function') ?
         loadChartbeat : function() { oldonload(); loadChartbeat(); };
    })();
    </script>
    
            <script>
            (function(){
                var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
            })("woopra");

            woopra.config({
                domain: 'knpuniversity.com',
                download_tracking: true,
                outgoing_tracking: true
            });

                            woopra.identify({
                    userType: 'anonymous',
                    hasSubscription: 'no'
                });
                    </script>

        <script>
            woopra.track(
            'course_view_chapter',
            {"course":"behat-v25","courseIsOwned":false,"chapter":"Behat","chapterNumber":4,"chapterIsFree":false}
        );
    </script>

        <script>
            woopra.track();
        </script>
     
        <script type="text/javascript">
    var _qevents = _qevents || [];

    (function() {
    var elem = document.createElement('script');
    elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
    })();

    _qevents.push({
    qacct:"p-8-SEHS37bhSQ0"
    });
    </script>

    <noscript>
    <div style="display:none;">
    <img src="http://pixel.quantserve.com/pixel/p-8-SEHS37bhSQ0.gif" border="0" height="1" width="1" alt="Quantcast"/>
    </div>
    </noscript>
    


    <script type="text/javascript" src="../../assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script type="text/javascript" src="../../assets/vendor/zeroclipboard/dist/ZeroClipboard.min.js"></script>
    <script type="text/javascript" src="../../js/CodeBlocks.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/underscore.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/doctools.js"></script>

    <script>
        Core.courseTitle = 'BDD, Behat (version 2.5), Mink and other Wonderful Things';
        Core.courseId = 33
        Core.courseIsOwned = false;
        Core.courseSlug = 'behat-v25';
                    Core.chapterTitle = 'Behat';
            Core.chapterNumber = 4;
            Core.chapterIsFree = false;
            Core.chapterSlug = 'behat';
        
                var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.0.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };

        jQuery(document).ready(function() {
            // Stick left sidebar menu
            $('.js-sticker').sticky();

            var $scriptWrapper = $('.js-script-content-wrapper');
            var codeBlocks = new Core.CodeBlocks($scriptWrapper);

            var expandList = $('.js-expand-list');

            expandList.on('click', function(){
                var target = $(this).data('target');
                var $expandArea = $('#' + target);
                $expandArea.toggleClass('expanded');

                // http://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery
                $(document).one('click', function closeExpandList (e){
                    if($expandArea.has(e.target).length === 0){
                        $expandArea.removeClass('expanded');
                    } else {
                        $(document).one('click', closeExpandList);
                    }
                });
            });
        });
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>



    <script type="text/javascript">
    var addthis_share = {
        templates: {
            twitter: '{{title}} - {{url}} | via @KnpUniversity'
        }
    }
</script>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=weaverryan"></script>

<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"b4d8035b34","applicationID":"3720092","transactionName":"MgEBMkZVXBFXBRENWwtLIgVAXV0MGQ0LFGsQCgoQUUZBC0IfOgdbEBYQA2tHWg1B","queueTime":0,"applicationTime":408,"atts":"HkYCRA5PTx8=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
