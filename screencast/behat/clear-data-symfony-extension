<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
            <script src="https://cdn.optimizely.com/js/421270022.js"></script>
    
                    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>The SymfonyExtension &amp; Clearing Data Between Scenarios > BDD, Behat, Mink and other Wonderful Things | KnpUniversity</title>

                    <link href="../../builds/main-db6835bf19d99bcc09032789f3bd39e4.css" rel="stylesheet">

        <link href='https://fonts.googleapis.com/css?family=Rokkitt' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>
    

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/tomorrow-night.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/tomorrow-night.min.css">


        <link rel="stylesheet" href="../../builds/code_block_styles-2d783e385d9dbb1ef88d9053d1b8d675.css">



    <link href="../../builds/video-6b5fa6dfb768239b226d39d08bd4867e.css" rel="stylesheet">

                        <script src="../../bundles/fosjsrouting/js/router.js"></script>

        <script src="../../builds/main-1dfa89b76a105f9c2d98.js"></script>
        <script src="../../js/routing?callback=fos.Router.setData"></script>
            

    <script>
        // video settings
        window.video = {
            isCourseChapterPaid: false,
            courseChapterId: 39197
        };

                window.video.nextDetails = {
            'type': 'video',
            'title': 'Up Next: Practice\x3A\x20Find\x20Elements,\x20Login\x20with\x201\x20Step\x20and\x20Debug <i class="fa fa-play"></i>',
            'url': '/screencast/behat/practicing-finding-debugging#play'
        };
            </script>

    <script src="../../builds/video-1dfa89b76a105f9c2d98.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            var hashValue = window.location.hash.substr(1);
            if (hashValue.substr(0, 7) == 'comment') {
                // this is a #comment link - open up the comment tab!
                $('.nav-tabs a[href="#tab-comment"]').click();
            }
        });
    </script>

    <link rel="alternate" type="application/rss+xml" title="Blog feed with technical articles around PHP and screencast and tutorial updates from KnpUniversity.com" href="http://feeds.feedburner.com/knpuniversity" />

    <meta name="description" content="**Looking for Behat v2.5 of the tutorial?** See https://knpuniversity.com/screencast/behat-v25.

Behat is my absolute favorite library to use. First, it let&#039;s me think about the *behavior*
of my features first, *before* I start developing. In this tutorial, we&#039;ll do that, and it&#039;ll
change the way you develop. Second, Behat turns that written behavior into functional tests
against your application. Does your feature behave correctly? Just run the automated robots
to find out!

Along the way, we&#039;ll master Mink - the partner library to Behat - and solve all sorts of common
problems, like:

* Running scenarios in a real browser
* Properly waiting or JavaScript events
* Leveraging Behat hooks
* Multiple contexts
* Loading Database fixtures and clearing data
* Bootstrapping your application (specifically Symfony)
* Using the authenticated user
* Tagging scenarios
* How to put BDD into practice
* Keeping the velociraptors in their pen.

Let&#039;s do this!
">

    <meta property="og:site_name" content="KnpUniversity - PHP and Symfony Video Tutorial Screencasts">
    <meta name="twitter:site" content="@KnpUniversity"><link rel="shortcut icon" href="../../assets/images/favicon.ico">
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    <meta property="og:title" content="The SymfonyExtension &amp; Clearing Data Between Scenarios">
<meta property="og:description" content="**Looking for Behat v2.5 of the tutorial?** See https://knpuniversity">
<meta property="og:url" content="http://knpuniversity.com/screencast/behat/clear-data-symfony-extension">
    <meta property="og:image" content="http://knpuniversity.com/imagine/course_video_poster_large/uploads/screencast/behat:caf59f3b22c82c95d3caee5bb0d20cbe4d123cf7/behatv3.png">

<meta name="twitter:card" content="summary">


                            
    </head>
<body data-user-id="" >
<nav class="navbar navbar-inverse nav-margin navbar-learning-layout">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle toggle-button collapsed" data-toggle="collapse" data-target="#js-navbar" aria-expanded="false" aria-controls="js-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../logout" class="navbar-brand">
                <span class="knp-color-blue">Knp</span>
                <span class="knp-color-white">University</span>
            </a>
        </div>
        <form class="navbar-form navbar-left navbar-form-border" role="search" method="GET" action="http://knpuniversity.com/search">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search Tutorials" value="" name="q">

                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </form>
        <div id="js-navbar" class="collapse-fix collapse navbar-right navbar-collapse">
            

<ul class="nav navbar-nav nav-narrowerOnSmall">
            <li><a href="../../checkout/subscription/team_yearly/5" title="Cart"><i class="fa fa-shopping-cart"></i></a></li>
        <li class="dropdown"><a href="clear-data-symfony-extension#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <i class="fa fa-angle-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="../../tracks.1">Tracks</a></li>
          <li><a href="../../courses/all">All Courses</a></li>
        </ul>
    </li>
            <li><a href="../../pricing.1">Pricing</a></li>
        <li><a href="../../training">Training</a></li>
                <li class="visible-xs"><a href="../../logout">My Profile</a></li>
        <li class="visible-xs"><a href="../../logout">Sign Out</a></li>

            <li><a href="../../login.1">Log In</a></li>
        <li class="btn btn-sm btn-warning signup-btn"><a class="signup" href="../../signup/index.html">Sign Up</a></li>
    </ul>

        </div>
    </div>
</nav>


    




<div class="table-contents-container">
  <div class="container expandList" id="js-chapter-list">
      <button class="table-contents-container-button js-expand-list" data-target="js-chapter-list" title="Chapter List">
          <i class="fa fa-bars"></i>
                        14.
                            The SymfonyExtension &amp; Clearing...
                </button>
      <div class="expandList-body">
          <div class="expandList-bodyInner">
              <h3 class="expandList-header">
                  <a class="course-title-expand" href="resume">BDD, Behat, Mink and other Wonderful Things</a>
              </h3>

                                <div class="watched-tut-progress-container watched-tut-progress-container-overview">
        <div class="watched-tut-progress-overview" style="width: 0%; margin-right: 100%;" title="0% complete"><span class="profile-progress-title">0%</span></div>
    </div>


              
              <div class="expand-chapter-list">
                      
    
    <!-- Table of contents -->
    <div class="chapter-list">
        <ul class="list-unstyled">
            
                
                                <li class="title chapter-list-item ">
            <a href="install" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                1.
                        From Install to JS Testing
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 7:27</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="bdd-features" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                2.
                        BDD Features
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 5:56</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                                                                                                                
                            <a class="challenge-square inline-link js-tooltip" href="http://knpuniversity.com/screencast/behat/bdd-features/activity/298" title="Challenge 2.1: unanswered"><span class="coding-icon coding-icon-unanswered"><i class="fa fa-code"></i></span></a>                                                                                                            
                            <a class="challenge-square inline-link js-tooltip" href="http://knpuniversity.com/screencast/behat/bdd-features/activity/299" title="Challenge 2.2: unanswered"><span class="coding-icon coding-icon-unanswered"><i class="fa fa-code"></i></span></a>                                                <span class="challenge-count">2 challenges</span>
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="scenarios" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                3.
                        Scenarios
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:24</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                                                                                                                
                            <a class="challenge-square inline-link js-tooltip" href="http://knpuniversity.com/screencast/behat/scenarios/activity/300" title="Challenge 3.1: unanswered"><span class="coding-icon coding-icon-unanswered"><i class="fa fa-code"></i></span></a>                                                                                                            
                            <a class="challenge-square inline-link js-tooltip" href="http://knpuniversity.com/screencast/behat/scenarios/activity/301" title="Challenge 3.2: unanswered"><span class="coding-icon coding-icon-unanswered"><i class="fa fa-code"></i></span></a>                                                <span class="challenge-count">2 challenges</span>
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="using-behat" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                4.
                        Behat
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:08</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                                                                                                                
                            <a class="challenge-square inline-link js-tooltip" href="http://knpuniversity.com/screencast/behat/using-behat/activity/303" title="Challenge 4.1: unanswered"><span class="coding-icon coding-icon-unanswered"><i class="fa fa-code"></i></span></a>                                                <span class="challenge-count">1 challenge</span>
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="behat-hooks-background" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                5.
                        Behat Hooks Background
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:49</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                                                                                                                
                            <a class="challenge-square inline-link js-tooltip" href="http://knpuniversity.com/screencast/behat/behat-hooks-background/activity/304" title="Challenge 5.1: unanswered"><span class="coding-icon coding-icon-unanswered"><i class="fa fa-code"></i></span></a>                                                <span class="challenge-count">1 challenge</span>
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="using-mink" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                6.
                        Mink
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:27</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="finding-elements" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                7.
                        Finding Elements by CSS and Name
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:48</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="behat-loves-mink" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                8.
                        Behat Loves Mink (Free Definitions from MinkExtension)
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:56</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="scenario-outline" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                9.
                        Scenario Outline
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:10</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="mink-inside-feature-context" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                10.
                        Mink Session inside FeatureContext
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:00</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="suites" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                11.
                        Context Organization and Behat Suites
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:03</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-scenario" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                12.
                        Building a Login Scenario
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:57</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="control-database" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                13.
                        Controlling the Database
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:24</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item chapter-list-item-active">
            <a href="clear-data-symfony-extension" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                14.
                        The SymfonyExtension &amp; Clearing Data Between Scenarios
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 5:13</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="practicing-finding-debugging" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                15.
                        Practice: Find Elements, Login with 1 Step and Debug
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:51</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="get-authenticated-user" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                16.
                        When *I* do Something: Handling the Current User
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:10</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="practicing-bdd" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                17.
                        Practicing BDD: Plan, then Build
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 8:09</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="javascript-waiting" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                18.
                        Master JavaScript with Waits &amp; Debugging
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:16</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="javascript-debugging-screenshots" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                19.
                        Debugging and Taking Screenshots with JavaScript
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:33</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="tables" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                20.
                        Gherkin Tables: Given I have the following:
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:37</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="html-tables" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                21.
                        Finding inside HTML Tables
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:20</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="complex-delete" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                22.
                        Clicking a Row in a Table (i.e. Complex Selectors)
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 8:55</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="fixtures-tags" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                23.
                        Tagging Scenarios in order to Load Fixtures
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 5:16</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


                    </ul>
    </div>

    
              </div>
          </div>
      </div>
  </div>
  <div>
                <a href="../../pricing/behat" class="btn btn-success pull-right-md download-buy-buttons">Buy <span class="hidden-xs">Access to Course</span></a>
              </div>
</div>


        <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-9 col-lg-10">
                <h1 class="account-header account-header-low-margin-top">The SymfonyExtension &amp; Clearing Data Between Scenarios</h1>
                
                                    <p class="hidden-xs">
                        Course:
                        <a class="knp-color-black" href="resume"><em>BDD, Behat, Mink and other Wonderful Things Tutorial</em></a>                    </p>
                            </div>
        </div>

                <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="full-block-container">
                    <div class="frame-padding">
                        <div id="player">
                                                                                <div>
                                                                <div class="row">
                                    <div class="end-show">
                                        <div class="xs-col-12">
                                            <p class="end-show-header">Keep learning!</p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link"><a href="../../pricing.1" class="btn btn-success btn-md">Start your All Access Pass</a></p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link text-center"><a href="../buy/collections" class="knp-color-white">Buy just this tutorial for $12.00</a></p>
                                        </div>
                                    </div>
                                </div>
                                                            </div>
                                                </div>
                    </div>
                </div>
            </div>
        </div>
         
        <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="pull-right">
                                    <a class="btn btn-success"
           href="practicing-finding-debugging#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                </div>

                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a data-toggle="tab" href="clear-data-symfony-extension#tab-script">Script</a></li>
                    <li><a data-toggle="tab" href="clear-data-symfony-extension#tab-comment">
                        <i class="fa fa-comment-o"></i>
                                                    
                                                                                                (7)
                                                                                        Conversation
                                            </a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="tab-script">
                        <div class="js-script-content-wrapper top-margin-script markdown-content">
                                                                                        <a href="https://github.com/knpuniversity/behat/edit/behat3/knpu/clear-data-symfony-extension.md" target="_blank" class="btn btn-default btn-circle pull-right js-tooltip" title="Edit on GitHub"><span class="fa fa-pencil"></span></a>
                                                                    <p>Change the user and pass back to match the original user in the database: "admin"
and "admin":</p>
<p><div class="code-block-wrapper" data-code-block-guid="40b5daac0b">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-14" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            14 lines <span class="meta-divider"></span> <span title="features/web/authentication.feature">features/web/authentication.feature</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-6" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 6
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code"><span class="hljs-keyword">    Given </span>there is an admin user <span class="hljs-string">"admin"</span> with password <span class="hljs-string">"admin"</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="8-14" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 8 - 14
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p><em>Now</em> rerun the scenario:</p>
<pre><code class="language-bash"><div class="line">./vendor/bin/behat features/web/authentication.feature</div></code></pre>
<p>Boom! This time it explodes!</p>
<blockquote><p>Integrity constraint violation: UNIQUE constraint failed: user.username</p>
</blockquote>
<p>We already have a user called "admin" in the database... and since I made that a
unique column, creating <em>another</em> user in <code>Given</code> is putting a stop to our party.</p>
<h2 id="clearing-the-database-before-each-scenario">Clearing the Database Before each Scenario <a class="headerlink" href="clear-data-symfony-extension#clearing-the-database-before-each-scenario" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Important point: you should start every scenario with a blank database. Well, that's
not 100% true. What I want to say is: you should start every scenario with a predictable
database. Some projects have look-up tables - like a "product status" table with rows
for in stock, out of stock, back ordered, etc. I really hate these, but anyways,
sometimes there are tables that <em>need</em> to be filled in for anything to work. You'll
want to empty the database before each scenario... except for any lookup tables.</p>
<p>Since <em>we</em> don't have any of these pesky look-up guys, we can empty everything before
every scenario. To do this, we'll of course, use hooks.</p>
<p>Create a new <code>public function clearData()</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="664a9b2c3b">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-97" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            97 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FeatureContext</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">RawMinkContext</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Context</span>, <span class="hljs-title">SnippetAcceptingContext</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-44" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 16 - 44
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="45"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearData</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="46"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="47-49" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 47 - 49
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="50"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="51-95" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 51 - 95
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="96"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Clearing data now is pretty easy, since we have access to the entity manager via
<code>self::container-&gt;get('doctrine')-&gt;getManager();</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="73379cb924">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-97" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            97 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-46" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 46
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="47"></td>
            <td class="blob-code">        $em = <span class="hljs-keyword">self</span>::$container-&gt;get(<span class="hljs-string">'doctrine'</span>)-&gt;getManager();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="48-97" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 48 - 97
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Now we can issue DELETE queries on the two entities that we care about so far:
product and user. I'll use <code>$em-&gt;createQuery('DELETE FROM AppBundle:Product')-&gt;execute();</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="ef81ad1396">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-97" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            97 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-47" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 47
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="48"></td>
            <td class="blob-code">        $em-&gt;createQuery(<span class="hljs-string">'DELETE FROM AppBundle:Product'</span>)-&gt;execute();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="49-97" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 49 - 97
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Copy and paste that line and change "Product" to "User":</p>
<p><div class="code-block-wrapper" data-code-block-guid="17d499e619">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-97" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            97 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-48" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 48
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="49"></td>
            <td class="blob-code">        $em-&gt;createQuery(<span class="hljs-string">'DELETE FROM AppBundle:User'</span>)-&gt;execute();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="50-97" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 50 - 97
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Oh and make sure that says "Product" and not "Products". Activate all of this with the
<code>@BeforeScenario</code> annotation:</p>
<p><div class="code-block-wrapper" data-code-block-guid="ff2e48a1ed">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-97" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            97 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-41" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 41
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="42"></td>
            <td class="blob-code">    <span class="hljs-comment">/**</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="43"></td>
            <td class="blob-code">     * <span class="hljs-doctag">@BeforeScenario</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="44"></td>
            <td class="blob-code">     */</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="45"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearData</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="46-97" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 46 - 97
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Try it all again:</p>
<pre><code class="language-bash"><div class="line">./vendor/bin/behat features/web/authentication.feature</div></code></pre>
<p>Perfect! We can run this over and over because it's clearing out the data first.</p>
<h2 id="the-symfony2extension">The Symfony2Extension <a class="headerlink" href="clear-data-symfony-extension#the-symfony2extension" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>And, surprise! There's an easier way to bootstrap Symfony and clear out the database.
I always like taking the long way first so we can see how things work.</p>
<p>First, install a new library called <code>behat/symfony2-extension</code> with <code>--dev</code> so it
goes into my require <code>dev</code> section:</p>
<pre><code class="language-bash"><div class="line">composer require behat/symfony2-extension --dev</div></code></pre>
<p>An <code>extension</code> in Behat is a plugin. We're already using the <code>MinkExtension</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="27daea06b7">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-19" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            19 lines <span class="meta-divider"></span> <span title="behat.yml">behat.yml</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="1"></td>
            <td class="blob-code"><span class="hljs-attr">default:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="2-12" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 2 - 12
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code"><span class="hljs-attr">    extensions:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code">        Behat\MinkExtension:</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"><span class="hljs-attr">            base_url:</span> http://localhost:<span class="hljs-number">8000</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-19" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 16 - 19
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Activate the new plugin in <code>behat.yml</code>: <code>Behat\Symfony2Extension:</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="f5e71d6cc0">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-20" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            20 lines <span class="meta-divider"></span> <span title="behat.yml">behat.yml</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="1"></td>
            <td class="blob-code"><span class="hljs-attr">default:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="2-12" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 2 - 12
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code"><span class="hljs-attr">    extensions:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code">        Behat\MinkExtension:</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="15-18" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 15 - 18
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">        Behat\Symfony2Extension: ~</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>And as luck would have it, it doesn't need any configuration. It looks like we still
need to wait for it to finish installing in the terminal... there we go!  </p>
<p>The most important thing the Symfony2 Extension gives you is, access to Symfony's
container... but wait, we already have that? Well, this just makes it easier.</p>
<p>Remove the <code>private static $container;</code> property and the <code>bootstrapSymfony()</code> function.
Instead of these, we'll use a PHP 5.4 trait called <code>KernelDictionary</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="a636d6da19">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-84" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            84 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FeatureContext</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">RawMinkContext</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Context</span>, <span class="hljs-title">SnippetAcceptingContext</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code">    <span class="hljs-keyword">use</span> \<span class="hljs-title">Behat</span>\<span class="hljs-title">Symfony2Extension</span>\<span class="hljs-title">Context</span>\<span class="hljs-title">KernelDictionary</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="17-82" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 17 - 82
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="83"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>This gives us two new functions, <code>getKernel()</code>, but more importantly <code>getContainer()</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="cc77eab4d3">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-56" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            56 lines <span class="meta-divider"></span> <span title="vendor/behat/symfony2-extension/src/Behat/Symfony2Extension/Context/KernelDictionary.php">vendor/behat/symfony2-extension/src/Behat/Symfony2Extension/Context/KernelDictionary.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-21" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 21
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code"><span class="hljs-keyword">trait</span> KernelDictionary</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="24-40" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 24 - 40
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="41"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getKernel</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="42"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="43"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;kernel;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="44"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="45-50" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 45 - 50
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="51"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContainer</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="52"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="53"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;kernel-&gt;getContainer();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="54"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="55"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>It takes care of all of the booting of the kernel stuff for us, and it even reboots
the kernel between each scenario so they don't run into each other. That's important
because remember, each scenario should be completely independent of the others.</p>
<p>Search for the old <code>self::$container</code> code. Change it to <code>$this-&gt;getContainer()</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="c1941ef181">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-84" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            84 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-31" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 31
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="32"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearData</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="33"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="34"></td>
            <td class="blob-code">        $em = <span class="hljs-keyword">$this</span>-&gt;getContainer()-&gt;get(<span class="hljs-string">'doctrine'</span>)-&gt;getManager();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="35-36" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 35 - 36
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="37"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="38-41" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 38 - 41
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="42"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">thereIsAnAdminUserWithPassword</span><span class="hljs-params">($username, $password)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="43"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="44-48" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 44 - 48
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="49"></td>
            <td class="blob-code">        $em = <span class="hljs-keyword">$this</span>-&gt;getContainer()-&gt;get(<span class="hljs-string">'doctrine'</span>)-&gt;getManager();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="50-51" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 50 - 51
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="52"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="53-84" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 53 - 84
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>You see that PhpStorm all of a sudden auto-completes the methods on the services
we fetch because it recognizes this as the container and so knows that this returns
the entity manager. </p>
<p>Let's try things again!</p>
<pre><code class="language-bash"><div class="line">./vendor/bin/behat features/web/authentication.feature</div></code></pre>
<p>Still works! But now with less effort. If you have multiple context classes, you
can use the <code>KernelDictionary</code> on all of them to get access to the container.</p>
<h2 id="clearing-the-database-easily">Clearing the Database Easily <a class="headerlink" href="clear-data-symfony-extension#clearing-the-database-easily" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>OK, so what about clearing the database? It'll be a huge pain to add more and more
manual queries. Fortunately Doctrine gives us a better way: a <code>Purger</code>. Create a new
variable called <code>$purger</code> and set it to a <code>new ORMPurger()</code>. Pass it the entity manager:</p>
<p><div class="code-block-wrapper" data-code-block-guid="4a1ce99a60">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-84" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            84 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-32" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 32
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="33"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearData</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="34"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="35"></td>
            <td class="blob-code">        $purger = <span class="hljs-keyword">new</span> ORMPurger(<span class="hljs-keyword">$this</span>-&gt;getContainer()-&gt;get(<span class="hljs-string">'doctrine'</span>)-&gt;getManager());</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="36-36" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 36
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="37"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="38-84" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 38 - 84
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>After that, type <code>$purger-&gt;purge();</code>, and that's it:</p>
<p><div class="code-block-wrapper" data-code-block-guid="61566dcc53">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-84" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            84 lines <span class="meta-divider"></span> <span title="features/bootstrap/FeatureContext.php">features/bootstrap/FeatureContext.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-35" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 35
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="36"></td>
            <td class="blob-code">        $purger-&gt;purge();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="37-84" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 37 - 84
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>This will go through each entity and clear out all of your data. If it's working,
then our tests should pass:</p>
<pre><code class="language-bash"><div class="line">./vendor/bin/behat features/web/authentication.feature</div></code></pre>
<p>And they do! Same functionality and a lot less code. For bigger databases with lots
of lookup tables, it may be too much to clear every table and re-add all the data
you need. In those cases, trying experimenting with creating a SQL file that populates
the database and executing that before each scenario. Or, populate an SQLite file
with whatever you want to start with, then copy this and use it as your database
before each test. That's a super-fast way to roll back to your known data set.</p>

    
                        </div>
                    </div>
                    <div class="tab-pane" id="tab-comment">
                        <h3>Leave a comment!</h3>
                                                        <div id="disqus_thread">
                <style type="text/css">
            #dsq-comments {padding: 10px 0 0}
            .dsq-comment {position: relative;clear: both;margin: 0 0 1.5em;}
            .dsq-avatar {left: 0;position: absolute;}
            .dsq-avatar img {border: 0 none;border-radius: 3px;height: 36px;width: 36px;}
            .dsq-comment-body {padding: 0 0 0 46px;}
            .dsq-comment-header {border: 1px solid rgba(0, 0, 0, 0.15);border-radius: 3px;font-size: 13px;line-height: 14px;margin: 0 0 1em;max-height: 36px;overflow: hidden;padding: 10px;position: relative;text-overflow: ellipsis;white-space: nowrap;}
            .dsq-comment-message {word-wrap: break-word;}
            .dsq-comment-message {line-height: 1.5em;margin: 0 0 1em;}
            .dsq-comment-text {display: inline;}
            .dsq-comment-date {float: right;font-size: 90%;margin: 0 12px 0 0;}
        </style>

	    <div id="dsq-content">
	        <ul id="dsq-comments">
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3041843831" id="dsq-comment-3041843831">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3041843831">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-08</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-3041843831" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3041843831" class="dsq-comment-text">
	                                <p>Hey Adam,</p><p>I suppose you can get container with "$em = self::$container-&gt;get('doctrine')-&gt;getManager();" as in example here: <a href="https://disq.us/url?url=https%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fbehat%2Fclear-data-symfony-extension%23clearing-the-database-before-each-scenario%3AZW48q0zXPcJNGLzzlOw2OPlsklU&amp;cuid=1175718" rel="nofollow noopener">https://knpuniversity.com/scre...</a> . The `self` keywords actually the same as `$this` but for a static context. But I think keeping ability to call "$this-&gt;getContainer()-&gt;get('doctrine')-&gt;getManager();" was the reason why we don't make this method static.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3040920937" id="dsq-comment-3040920937">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_V8BoeDfQPK/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/16135/7826/avatar92.jpg?1481137108">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3040920937">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-07</span>
	                            <span class="dsq-commenter-name">Adam</span>
	                        </div>

	                        <div id="dsq-comment-message-3040920937" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3040920937" class="dsq-comment-text">
	                                <p>for now I have used @beforeScenario instead of @beforeSuite</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3040867746" id="dsq-comment-3040867746">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_V8BoeDfQPK/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/16135/7826/avatar92.jpg?1481137108">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3040867746">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-07</span>
	                            <span class="dsq-commenter-name">Adam</span>
	                        </div>

	                        <div id="dsq-comment-message-3040867746" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3040867746" class="dsq-comment-text">
	                                <p>Suite hook callback: FeatureContext::clearData() must be a static method <br>Making it a static method then means that $this is not available.<br>How do we then get the container? as can not use $this-&gt;getContainer()-&gt;get('doctrine')-&gt;getManager();</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3014352524" id="dsq-comment-3014352524">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3014352524">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-22</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-3014352524" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3014352524" class="dsq-comment-text">
	                                <p>Yes, looks great! Thanks for sharing it</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3013503909" id="dsq-comment-3013503909">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_0l9dvPeJpD/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/21414/7615/avatar92.jpg?1479978628">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3013503909">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-21</span>
	                            <span class="dsq-commenter-name">Sergiu Popa</span>
	                        </div>

	                        <div id="dsq-comment-message-3013503909" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3013503909" class="dsq-comment-text">
	                                <p>Thanks. I'm posting here the final code:</p><p>$em = $this-&gt;getContainer()-&gt;get('doctrine')-&gt;getManager();<br>$em-&gt;getConnection()-&gt;exec('SET foreign_key_checks=0');<br>$purger = new ORMPurger($this-&gt;getContainer()-&gt;get('doctrine')-&gt;getManager());<br>$purger-&gt;purge();<br>$em-&gt;getConnection()-&gt;exec('SET foreign_key_checks=1');</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3012834701" id="dsq-comment-3012834701">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3012834701">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-21</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-3012834701" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3012834701" class="dsq-comment-text">
	                                <p>Hey Sergiu,</p><p>Yes, you're right, but DELETE queries might throw exception too due to foreign keys, so you should use the correct order of DELETE queries. One more hack here is SET foreign_key_checks=0 before DELETE queries and then set it back.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3011479176" id="dsq-comment-3011479176">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_0l9dvPeJpD/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/21414/7615/avatar92.jpg?1479978628">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3011479176">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-20</span>
	                            <span class="dsq-commenter-name">Sergiu Popa</span>
	                        </div>

	                        <div id="dsq-comment-message-3011479176" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3011479176" class="dsq-comment-text">
	                                <p>Cleaning the database using DETELE queries is better sometimes, as the purges can throw error because of foreign constrains, e.g.: deleting categories before deleting articles_categories entries.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	        </ul>
	    </div>
            </div>

    <script type="text/javascript">
    var disqus_shortname = 'knpuniversity';
    var disqus_container_id = 'disqus_thread';var disqus_developer = 1;var disqus_identifier = 'course_video_clear-data-symfony-extension';var disqus_url = 'https://knpuniversity.com/screencast/behat/clear-data-symfony-extension';var disqus_config = function () {};

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

                                            </div>
                    <div class="pull-left-xs pull-right-md">
                                        <a class="btn btn-success"
           href="practicing-finding-debugging#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                    </div>
                    <div class="pull-left addthis-module">
                        
    <div class="addthis_toolbox addthis_default_style js-analytics-addthis-wrapper addthis_32x32_style" addthis:url="http://knpuniversity.com/screencast/behat/clear-data-symfony-extension" addthis:title="BDD, Behat, Mink and other Wonderful Things">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer class="footer footer-styling">
    <div class="container">
        <div class="row">
                        <div class="col-xs-7 col-sm-4">
                <div class="row">
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../courses/all">All Courses</a></li>
                                                            <li><a class="knp-color-black" href="../../pricing.1">Pricing</a></li>
                                                        <li><a class="knp-color-black" href="../../faq">FAQ</a></li>
                            <li><a class="knp-color-black" href="../../training">Training</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../about">About</a></li>
                            <li><a class="knp-color-black" href="../../blog">Blog</a></li>
                            <li><a class="knp-color-black" href="../../contact">Contact Us</a></li>
                            <li>
                                <a class="knp-color-black" href="../../terms">Terms</a>
                                <span class="knp-color-black">&amp;</span>
                                <a class="knp-color-black" href="../../privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="hidden-xs col-sm-4">
                <p class="disclaimer">Symfony is a registered trademark of Fabien Potencier in the United States and/or other countries.
                This product is not endorsed or sponsored by Fabien Potencier.
                </p>
            </div>
            <div class="col-xs-5 col-sm-4">
                <div class="social-icons">
                    <a class="btn btn-social-icon btn-twitter" href="https://twitter.com/KnpUniversity">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a class="btn btn-social-icon btn-facebook" href="https://www.facebook.com/KnpLabs/">
                        <i class="fa fa-facebook"></i>
                    </a>
                    <a class="btn btn-social-icon btn-github" href="https://github.com/knpuniversity">
                        <i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
                    </div>
    </div>
</footer>

<!-- JS -->
            <script>
        Core.analyticsVideoStatsUrl = '/api/analytics/video/duration';
    </script>

            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-7062980-20']);
        _gaq.push(['_trackPageview']);
    </script>
    <script>
    
    </script>
    
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    
                <script type="text/javascript">
      (function() {
        var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
        uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/pOay2WLVabhXiEffbarO6Q.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
      })();

      UserVoice = window.UserVoice || [];
      UserVoice.push(['showTab', 'classic_widget', {
          tab_position: 'bottom-right',
          tab_label: 'Ideas or Feedback?',
          tab_color: '#005E8E'
      }]);
    </script>
        
            
        <script type="text/javascript">
    var _sf_async_config={uid:54262,domain:"knpuniversity.com",useCanonical:true};
    (function(){
      function loadChartbeat() {
        window._sf_endpt=(new Date()).getTime();
        var e = document.createElement('script');
        e.setAttribute('language', 'javascript');
        e.setAttribute('type', 'text/javascript');
        e.setAttribute('src', '//static.chartbeat.com/js/chartbeat.js');
        document.body.appendChild(e);
      }
      var oldonload = window.onload;
      window.onload = (typeof window.onload != 'function') ?
         loadChartbeat : function() { oldonload(); loadChartbeat(); };
    })();
    </script>
    
            <script>
            (function(){
                var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
            })("woopra");

            woopra.config({
                domain: 'knpuniversity.com',
                download_tracking: true,
                outgoing_tracking: true
            });

                            woopra.identify({
                    userType: 'anonymous',
                    hasSubscription: 'no'
                });
                    </script>

        <script>
            woopra.track(
            'course_view_chapter',
            {"course":"behat","courseIsOwned":false,"chapter":"The SymfonyExtension & Clearing Data Between Scenarios","chapterNumber":14,"chapterIsFree":false}
        );
    </script>

        <script>
            woopra.track();
        </script>
     
        <script type="text/javascript">
    var _qevents = _qevents || [];

    (function() {
    var elem = document.createElement('script');
    elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
    })();

    _qevents.push({
    qacct:"p-8-SEHS37bhSQ0"
    });
    </script>

    <noscript>
    <div style="display:none;">
    <img src="http://pixel.quantserve.com/pixel/p-8-SEHS37bhSQ0.gif" border="0" height="1" width="1" alt="Quantcast"/>
    </div>
    </noscript>
    


    <script type="text/javascript" src="../../assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script type="text/javascript" src="../../assets/vendor/zeroclipboard/dist/ZeroClipboard.min.js"></script>
    <script type="text/javascript" src="../../js/CodeBlocks.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/underscore.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/doctools.js"></script>

    <script>
        Core.courseTitle = 'BDD, Behat, Mink and other Wonderful Things';
        Core.courseId = 70
        Core.courseIsOwned = false;
        Core.courseSlug = 'behat';
                    Core.chapterTitle = 'The SymfonyExtension &amp; Clearing Data Between Scenarios';
            Core.chapterNumber = 14;
            Core.chapterIsFree = false;
            Core.chapterSlug = 'clear-data-symfony-extension';
        
                var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.0.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };

        jQuery(document).ready(function() {
            // Stick left sidebar menu
            $('.js-sticker').sticky();

            var $scriptWrapper = $('.js-script-content-wrapper');
            var codeBlocks = new Core.CodeBlocks($scriptWrapper);

            var expandList = $('.js-expand-list');

            expandList.on('click', function(){
                var target = $(this).data('target');
                var $expandArea = $('#' + target);
                $expandArea.toggleClass('expanded');

                // http://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery
                $(document).one('click', function closeExpandList (e){
                    if($expandArea.has(e.target).length === 0){
                        $expandArea.removeClass('expanded');
                    } else {
                        $(document).one('click', closeExpandList);
                    }
                });
            });
        });
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>



    <script type="text/javascript">
    var addthis_share = {
        templates: {
            twitter: '{{title}} - {{url}} | via @KnpUniversity'
        }
    }
</script>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=weaverryan"></script>

</body>
</html>
