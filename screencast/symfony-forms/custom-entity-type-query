<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
            <script src="https://cdn.optimizely.com/js/421270022.js"></script>
    
                    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Custom Query in EntityType > Symfony Forms: Build, Render &amp; Conquer! | KnpUniversity</title>

                    <link href="../../builds/main-db6835bf19d99bcc09032789f3bd39e4.css" rel="stylesheet">

        <link href='https://fonts.googleapis.com/css?family=Rokkitt' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>
    

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/tomorrow-night.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/tomorrow-night.min.css">


        <link rel="stylesheet" href="../../builds/code_block_styles-2d783e385d9dbb1ef88d9053d1b8d675.css">



    <link href="../../builds/video-6b5fa6dfb768239b226d39d08bd4867e.css" rel="stylesheet">

                        <script src="../../bundles/fosjsrouting/js/router.js"></script>

        <script src="../../builds/main-1dfa89b76a105f9c2d98.js"></script>
        <script src="../../js/routing?callback=fos.Router.setData"></script>
            

    <script>
        // video settings
        window.video = {
            isCourseChapterPaid: false,
            courseChapterId: 36108
        };

                window.video.nextDetails = {
            'type': 'video',
            'title': 'Up Next: Creating\x20a\x20Date\x20Picker\x20Field <i class="fa fa-play"></i>',
            'url': '/screencast/symfony-forms/date-picker-field#play'
        };
            </script>

    <script src="../../builds/video-1dfa89b76a105f9c2d98.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            var hashValue = window.location.hash.substr(1);
            if (hashValue.substr(0, 7) == 'comment') {
                // this is a #comment link - open up the comment tab!
                $('.nav-tabs a[href="#tab-comment"]').click();
            }
        });
    </script>

    <link rel="alternate" type="application/rss+xml" title="Blog feed with technical articles around PHP and screencast and tutorial updates from KnpUniversity.com" href="http://feeds.feedburner.com/knpuniversity" />

    <meta name="description" content="Ah, forms: one of the most *powerful* - but sometimes
hated - features in all of Symfony. Here&#039;s the deal: forms
are just plain hard. You need to manage the HTML form elements,
validation, data transformation and a lot more. The Form
component is probably the most complex part of Symfony. But
the more you work with it, the more you&#039;ll like it.

In this episode, we&#039;ll learn how to use Symfony forms to
handle simple situations as well as some complex setups.
Most importantly, I&#039;ll show you how to avoid the pitalls
that many developers often fall into that causes the form
component to spiral into complexity hell. The form system
is a tool: in this tutorial, we&#039;ll put the joy back into it:

* Creating a basic form
* Basic form rendering and customization
* Handling a form submit
* Backing your form with an entity
* Adding validation
* Form field guessing
* Pre-filling with default data
* Creating a form &quot;type&quot; class
* Using forms to handle an API POST request
* Understanding how forms *really* work
* Flash messages

... and form tips and tricks stuck in all over!
">

    <meta property="og:site_name" content="KnpUniversity - PHP and Symfony Video Tutorial Screencasts">
    <meta name="twitter:site" content="@KnpUniversity"><link rel="shortcut icon" href="../../assets/images/favicon.ico">
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    <meta property="og:title" content="Custom Query in EntityType">
<meta property="og:description" content="Ah, forms: one of the most *powerful* - but sometimes
hated - features in all of Symfony. Here&amp;#039;s the deal: forms
are just plain hard">
<meta property="og:url" content="http://knpuniversity.com/screencast/symfony-forms/custom-entity-type-query">
    <meta property="og:image" content="http://knpuniversity.com/imagine/course_video_poster_large/uploads/screencast/symfony-forms:f9cef13248ad1a424e63dbaddcf6d2c9186b052b/sf-ep5.png">

<meta name="twitter:card" content="summary">


                            
    </head>
<body data-user-id="" >
<nav class="navbar navbar-inverse nav-margin navbar-learning-layout">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle toggle-button collapsed" data-toggle="collapse" data-target="#js-navbar" aria-expanded="false" aria-controls="js-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../logout" class="navbar-brand">
                <span class="knp-color-blue">Knp</span>
                <span class="knp-color-white">University</span>
            </a>
        </div>
        <form class="navbar-form navbar-left navbar-form-border" role="search" method="GET" action="http://knpuniversity.com/search">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search Tutorials" value="" name="q">

                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </form>
        <div id="js-navbar" class="collapse-fix collapse navbar-right navbar-collapse">
            

<ul class="nav navbar-nav nav-narrowerOnSmall">
            <li><a href="../../checkout/subscription/team_yearly/5" title="Cart"><i class="fa fa-shopping-cart"></i></a></li>
        <li class="dropdown"><a href="custom-entity-type-query#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <i class="fa fa-angle-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="../../tracks.1">Tracks</a></li>
          <li><a href="../../courses/all">All Courses</a></li>
        </ul>
    </li>
            <li><a href="../../pricing.1">Pricing</a></li>
        <li><a href="../../training">Training</a></li>
                <li class="visible-xs"><a href="../../logout">My Profile</a></li>
        <li class="visible-xs"><a href="../../logout">Sign Out</a></li>

            <li><a href="../../login.1">Log In</a></li>
        <li class="btn btn-sm btn-warning signup-btn"><a class="signup" href="../../signup/index.html">Sign Up</a></li>
    </ul>

        </div>
    </div>
</nav>


    




<div class="table-contents-container">
  <div class="container expandList" id="js-chapter-list">
      <button class="table-contents-container-button js-expand-list" data-target="js-chapter-list" title="Chapter List">
          <i class="fa fa-bars"></i>
                        7.
                            Custom Query in EntityType
                </button>
      <div class="expandList-body">
          <div class="expandList-bodyInner">
              <h3 class="expandList-header">
                  <a class="course-title-expand" href="resume">Symfony Forms: Build, Render &amp; Conquer!</a>
              </h3>

                                <div class="watched-tut-progress-container watched-tut-progress-container-overview">
        <div class="watched-tut-progress-overview" style="width: 0%; margin-right: 100%;" title="0% complete"><span class="profile-progress-title">0%</span></div>
    </div>


              
              <div class="expand-chapter-list">
                      
    
    <!-- Table of contents -->
    <div class="chapter-list">
        <ul class="list-unstyled">
            
                
                                <li class="title chapter-list-item ">
            <a href="the-form-type-class" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                1.
                        The Form Type Class
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:14</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="render-form-bootstrap" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                2.
                        Render that Form Pretty (Bootstrap)
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:14</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="process-that-form" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                3.
                        Process that Form!
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:46</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="data-class-type-guessing" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                4.
                        Binding Forms to Objects: data_class
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:44</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="save-redirect-set-flash" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                5.
                        Save, Redirect, setFlash (and Dance)
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:05</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="field-types-and-options" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                6.
                        Field Types and Options
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 5:09</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item chapter-list-item-active">
            <a href="custom-entity-type-query" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                7.
                        Custom Query in EntityType
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:30</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="date-picker-field" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                8.
                        Creating a Date Picker Field
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:54</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="date-format-sanity-validation" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                9.
                        Date Format &amp; &quot;Sanity&quot; Validation
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:28</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="form-rendering-and-variables" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                10.
                        Form Rendering and Form Variables
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:33</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="disable-html5-validation" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                11.
                        Disable HTML5 Validation
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:03</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="beautiful-form-validation" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                12.
                        Beautiful Form Validation
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:03</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="changing-validation-messages" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                13.
                        Changing Validation Messages
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:08</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="easy-edit-form" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                14.
                        Easy Edit Form
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:01</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="form-template-include" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                15.
                        Sharing Form Templates with include()
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:42</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


                    </ul>
    </div>

    
              </div>
          </div>
      </div>
  </div>
  <div>
                <a href="../../pricing/symfony-forms" class="btn btn-success pull-right-md download-buy-buttons">Buy <span class="hidden-xs">Access to Course</span></a>
              </div>
</div>


        <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-9 col-lg-10">
                <h1 class="account-header account-header-low-margin-top">Custom Query in EntityType</h1>
                
                                    <p class="hidden-xs">
                        Course:
                        <a class="knp-color-black" href="resume"><em>Symfony Forms: Build, Render &amp; Conquer! Tutorial</em></a>                    </p>
                            </div>
        </div>

                <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="full-block-container">
                    <div class="frame-padding">
                        <div id="player">
                                                                                <div>
                                                                <div class="row">
                                    <div class="end-show">
                                        <div class="xs-col-12">
                                            <p class="end-show-header">Keep learning!</p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link"><a href="../../pricing.1" class="btn btn-success btn-md">Start your All Access Pass</a></p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link text-center"><a href="../buy/collections" class="knp-color-white">Buy just this tutorial for $12.00</a></p>
                                        </div>
                                    </div>
                                </div>
                                                            </div>
                                                </div>
                    </div>
                </div>
            </div>
        </div>
         
        <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="pull-right">
                                    <a class="btn btn-success"
           href="date-picker-field#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                </div>

                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a data-toggle="tab" href="custom-entity-type-query#tab-script">Script</a></li>
                    <li><a data-toggle="tab" href="custom-entity-type-query#tab-comment">
                        <i class="fa fa-comment-o"></i>
                                                    
                                                                                                (9)
                                                                                        Conversation
                                            </a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="tab-script">
                        <div class="js-script-content-wrapper top-margin-script markdown-content">
                                                                                        <a href="https://github.com/knpuniversity/symfony/edit/master/knpu/ep5-forms/custom-entity-type-query.md" target="_blank" class="btn btn-default btn-circle pull-right js-tooltip" title="Edit on GitHub"><span class="fa fa-pencil"></span></a>
                                                                    <p>As cool as it is that it's guessing my field type, I am actually going to add
<code>EntityType::class</code> to use this type <em>explicitly</em>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="580bdb0b92">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-43" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            43 lines <span class="meta-divider"></span> <span title="src/AppBundle/Form/GenusFormType.php">src/AppBundle/Form/GenusFormType.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-4" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 4
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="5"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bridge</span>\<span class="hljs-title">Doctrine</span>\<span class="hljs-title">Form</span>\<span class="hljs-title">Type</span>\<span class="hljs-title">EntityType</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="6-10" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 6 - 10
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusFormType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractType</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildForm</span><span class="hljs-params">(FormBuilderInterface $builder, array $options)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">        $builder</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-16" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 16
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">            -&gt;add(<span class="hljs-string">'subFamily'</span>, EntityType::class, [</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="18-22" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 18 - 22
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">            ])</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="24-32" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 24 - 32
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="33"></td>
            <td class="blob-code">        ;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="34"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="35-41" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 35 - 41
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="42"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>I don't <em>have</em> to do this: I just want to show you guys what a traditional setup
looks like.</p>
<p>Now, do <em>nothing</em> else and refresh. It'll still work, right? Right? Nope!</p>
<p>The required <code>class</code> option is missing! As I just finished saying, we <em>must</em> pass
a <code>class</code> option to the <code>EntityType</code>. We got away with this before, because when
it's <code>null</code>, Symfony guesses the form "type" <em>and</em> the <code>class</code> option.</p>
<p>Set the option to <code>SubFamily::class</code> - and alternate syntax to the normal <code>AppBundle:SubFamily</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="675bc4692a">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-45" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            45 lines <span class="meta-divider"></span> <span title="src/AppBundle/Form/GenusFormType.php">src/AppBundle/Form/GenusFormType.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-4" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 4
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="5"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">AppBundle</span>\<span class="hljs-title">Entity</span>\<span class="hljs-title">SubFamily</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="6-12" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 6 - 12
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusFormType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractType</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildForm</span><span class="hljs-params">(FormBuilderInterface $builder, array $options)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">        $builder</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="18-18" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 18
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">            -&gt;add(<span class="hljs-string">'subFamily'</span>, EntityType::class, [</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="20-20" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 20
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="21"></td>
            <td class="blob-code">                <span class="hljs-string">'class'</span> =&gt; SubFamily::class,</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="22-24" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 22 - 24
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">            ])</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="26-34" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 26 - 34
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="35"></td>
            <td class="blob-code">        ;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="36"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="37-43" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 37 - 43
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="44"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<h2 id="the-query-builder-option">The query_builder Option <a class="headerlink" href="custom-entity-type-query#the-query-builder-option" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Now that our form is put back together, I have a second challenge: make the select
order alphabetically. In other words, I want to customize the query that's made for
the SubFamily's and add an ORDER BY.</p>
<p>Head back to the <code>EntityType</code> docs. One option jumps out at me: <code>query_builder</code>.
Click to check it out. OK, it says:</p>
<blockquote><p>If specified, this is used to query the subset of options that should be used
  for the field.</p>
</blockquote>
<p>And actually, I need to search for <code>query_builder</code>: I know there's a better example
on this page. Here it is!</p>
<p>So, if you pass a <code>query_builder</code> option and set it to an anonymous function, Doctrine
will pass that the <em>entity repository</em> for this specific entity. All we need to do
is create whatever query builder we want and return it.</p>
<p>In the form, add <code>query_builder</code> and enjoy that auto-completion. Set this to a
function with a <code>$repo</code> argument:</p>
<p><div class="code-block-wrapper" data-code-block-guid="67725a5926">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-45" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            45 lines <span class="meta-divider"></span> <span title="src/AppBundle/Form/GenusFormType.php">src/AppBundle/Form/GenusFormType.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-12" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 12
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusFormType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractType</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildForm</span><span class="hljs-params">(FormBuilderInterface $builder, array $options)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">        $builder</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="18-18" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 18
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">            -&gt;add(<span class="hljs-string">'subFamily'</span>, EntityType::class, [</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="20-21" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 20 - 21
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code">                <span class="hljs-string">'query_builder'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(SubFamilyRepository $repo)</span> </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="23-23" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 23
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code">                }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">            ])</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="26-34" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 26 - 34
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="35"></td>
            <td class="blob-code">        ;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="36"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="37-43" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 37 - 43
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="44"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Now, I like to keep all of my queries inside of repository classes because I don't
want queries laying around in random places, like in a form class. But, if you look, I don't
have a <code>SubFamilyRepository</code> yet.</p>
<p>No worries - copy the <code>GenusRepository</code>, paste it as <code>SubFamilyRepository</code>. Rename
that class and clear it out:</p>
<p><div class="code-block-wrapper" data-code-block-guid="fdea2457f5">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-16" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            16 lines <span class="meta-divider"></span> <span title="src/AppBundle/Repository/SubFamilyRepository.php">src/AppBundle/Repository/SubFamilyRepository.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-2" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 2
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="3"></td>
            <td class="blob-code"><span class="hljs-keyword">namespace</span> <span class="hljs-title">AppBundle</span>\<span class="hljs-title">Repository</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="4-5" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 4 - 5
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="6"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Doctrine</span>\<span class="hljs-title">ORM</span>\<span class="hljs-title">EntityRepository</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SubFamilyRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">EntityRepository</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="9"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="10-14" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 10 - 14
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Open the <code>SubFamily</code> entity and hook it up with <code>@ORM\Entity(repositoryClass="")</code>
and fill in <code>SubFamilyRepository</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="54da756385">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-45" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            45 lines <span class="meta-divider"></span> <span title="src/AppBundle/Entity/SubFamily.php">src/AppBundle/Entity/SubFamily.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-6" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 6
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code"><span class="hljs-comment">/**</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code"> * <span class="hljs-doctag">@ORM</span>\Entity(repositoryClass="AppBundle\Repository\SubFamilyRepository")</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="9-9" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 9
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="10"></td>
            <td class="blob-code"> */</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SubFamily</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="12-45" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 12 - 45
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Great! Back in our form, we know this repo will be an instance of <code>SubFamilyRepository</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="d4941ee936">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-45" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            45 lines <span class="meta-divider"></span> <span title="src/AppBundle/Form/GenusFormType.php">src/AppBundle/Form/GenusFormType.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-5" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 5
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="6"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">AppBundle</span>\<span class="hljs-title">Repository</span>\<span class="hljs-title">SubFamilyRepository</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="7-12" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 7 - 12
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusFormType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractType</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildForm</span><span class="hljs-params">(FormBuilderInterface $builder, array $options)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">        $builder</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="18-18" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 18
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">            -&gt;add(<span class="hljs-string">'subFamily'</span>, EntityType::class, [</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="20-21" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 20 - 21
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code">                <span class="hljs-string">'query_builder'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(SubFamilyRepository $repo)</span> </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="23-23" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 23
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code">                }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">            ])</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="26-34" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 26 - 34
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="35"></td>
            <td class="blob-code">        ;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="36"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="37-43" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 37 - 43
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="44"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Return <code>$repo-&gt;</code> and a new method that we're about to create called <code>createAlphabeticalQueryBuilder()</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="e2ef121c0e">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-45" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            45 lines <span class="meta-divider"></span> <span title="src/AppBundle/Form/GenusFormType.php">src/AppBundle/Form/GenusFormType.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-12" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 12
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusFormType</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractType</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildForm</span><span class="hljs-params">(FormBuilderInterface $builder, array $options)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">        $builder</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="18-18" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 18
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">            -&gt;add(<span class="hljs-string">'subFamily'</span>, EntityType::class, [</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="20-21" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 20 - 21
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code">                <span class="hljs-string">'query_builder'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(SubFamilyRepository $repo)</span> </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">                    <span class="hljs-keyword">return</span> $repo-&gt;createAlphabeticalQueryBuilder();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code">                }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">            ])</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="26-34" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 26 - 34
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="35"></td>
            <td class="blob-code">        ;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="36"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="37-43" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 37 - 43
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="44"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Copy that name and head into the repository to create that function. Inside, return
<code>$this-&gt;createQueryBuilder('sub_family'</code>) and then order by <code>sub_family.name</code>, <code>ASC</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="6d476262fa">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-16" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            16 lines <span class="meta-divider"></span> <span title="src/AppBundle/Repository/SubFamilyRepository.php">src/AppBundle/Repository/SubFamilyRepository.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-7" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 7
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SubFamilyRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">EntityRepository</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="9"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="10"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createAlphabeticalQueryBuilder</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;createQueryBuilder(<span class="hljs-string">'sub_family'</span>)</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code">            -&gt;orderBy(<span class="hljs-string">'sub_family.name'</span>, <span class="hljs-string">'ASC'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Done! The <code>query_builder</code> method points here, and we handle the query.</p>
<p>Alright, try it out! Nailed it! As far as form options go, we probably just conquered
one of the most complex.</p>

    
                        </div>
                    </div>
                    <div class="tab-pane" id="tab-comment">
                        <h3>Leave a comment!</h3>
                                                        <div id="disqus_thread">
                <style type="text/css">
            #dsq-comments {padding: 10px 0 0}
            .dsq-comment {position: relative;clear: both;margin: 0 0 1.5em;}
            .dsq-avatar {left: 0;position: absolute;}
            .dsq-avatar img {border: 0 none;border-radius: 3px;height: 36px;width: 36px;}
            .dsq-comment-body {padding: 0 0 0 46px;}
            .dsq-comment-header {border: 1px solid rgba(0, 0, 0, 0.15);border-radius: 3px;font-size: 13px;line-height: 14px;margin: 0 0 1em;max-height: 36px;overflow: hidden;padding: 10px;position: relative;text-overflow: ellipsis;white-space: nowrap;}
            .dsq-comment-message {word-wrap: break-word;}
            .dsq-comment-message {line-height: 1.5em;margin: 0 0 1em;}
            .dsq-comment-text {display: inline;}
            .dsq-comment-date {float: right;font-size: 90%;margin: 0 12px 0 0;}
        </style>

	    <div id="dsq-content">
	        <ul id="dsq-comments">
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2995387680" id="dsq-comment-2995387680">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2995387680">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-10</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2995387680" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2995387680" class="dsq-comment-text">
	                                <p>Hey <a data-dsq-mention="diarselimi92:disqus" href="https://disqus.com/by/diarselimi92/" rel="nofollow noopener">diarselimi92</a>!</p><p>Do you want to do this for a performance improvement? By default, the EntityType queries for *full* objects, so it would query for all of the fields. This is done so that when the selected option is set back on your entity, that is a *full* entity object. You could, in theory, use a partial objects (<a href="http://disq.us/url?url=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F10482085%2Fhow-to-fetch-class-instead-of-array-in-doctrine-2%23answer-12044461%29%3A09ECxpe_DRtmUsOpyVQe9C2YLVQ&amp;cuid=1175718" rel="nofollow noopener">http://stackoverflow.com/quest...</a>. Or, you could use the normal ChoiceType, and build your own "data transformer" that would do the custom query itself, and then transform the submitted id back to the full object.</p><p>Let me know what you think - happy to offer more guidance.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2995146841" id="dsq-comment-2995146841">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/diarselimi92/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/10788/8023/avatar92.jpg?1400745975">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2995146841">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-10</span>
	                            <span class="dsq-commenter-name">diarselimi92</span>
	                        </div>

	                        <div id="dsq-comment-message-2995146841" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2995146841" class="dsq-comment-text">
	                                <p>Hi, what if i wan't to limit the number of columns i wan't to query, ex: <a href="http://disq.us/url?url=http%3A%2F%2Fa.id%3A9iCmeV5pAHLmxVR3m2znCqjuLQI&amp;cuid=1175718" rel="nofollow noopener">a.id</a>, <a href="http://disq.us/url?url=http%3A%2F%2Fa.name%3A6K-TUc-kRlENMKbnnpb6DTD5dTs&amp;cuid=1175718" rel="nofollow noopener">a.name</a> ? <br>Can that be done in the query builder in formtype ?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2979067217" id="dsq-comment-2979067217">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2979067217">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-01</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2979067217" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2979067217" class="dsq-comment-text">
	                                <p>Sweet! Great work! It will feel like setting up the relationship is a bit more work at first, but it will pay off BIG... like in this case, when the EntityType just suddenly works as soon as that's a relation :).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2978307526" id="dsq-comment-2978307526">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/roelbeckers/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/6482/6747/avatar92.jpg?1477931832">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2978307526">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Roel Beckers</span>
	                        </div>

	                        <div id="dsq-comment-message-2978307526" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2978307526" class="dsq-comment-text">
	                                <p>Yo Ryan!</p><p>Thanks for your answer. In the table, the field supervisorId is an integer and I'm trying to store just the number id from the Supervisor. But storing the object, as you suggest makes indeed much more sense.</p><p>Was able to figure it out now and it works. Thanks for your insights!</p><p>Thanks!<br>Roel</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977914559" id="dsq-comment-2977914559">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977914559">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977914559" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977914559" class="dsq-comment-text">
	                                <p>Yo Roel!</p><p>Hmm. So let me ask you a bit more about your setup. I noticed that your field is called supervisorId. Is this really an integer field? Or is it a relationship (e.g. ManyToOne) field? What the EntityType does is work when the field that you've assigned it to is an entity *object*, it won't work if you're trying to use a true integer field (i.e. if supervisorId is an integer field that literally stored things like "5").</p><p>Am I right about this field? If so, what's your reason for doing it this way? It's totally legal, but will make your life a bit harder :). If it *is* the case, you might be better suited with a ChoiceType, where you simply query for all of your supervisor Users and create a simple array with the id as the value and their fullname as the label for the options.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977804990" id="dsq-comment-2977804990">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/roelbeckers/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/6482/6747/avatar92.jpg?1477931832">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977804990">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Roel Beckers</span>
	                        </div>

	                        <div id="dsq-comment-message-2977804990" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977804990" class="dsq-comment-text">
	                                <p>Hi there guru's,</p><p>In your example, the label of the dropdown and the value stored in the database is the same.<br>What to do when I want to show the text as label on the dropdown (retrieved from database) and store the linked id from these values?<br>Currently always the label is passed and I get the error 'Incorrect integer value'.</p><p>Here is a part of the code with the EntityType from my UserCreateForm.php:</p><p>-&gt;add('supervisorId', EntityType::class, [<br>'class' =&gt; User::class,<br>'choice_label' =&gt; 'fullname',<br>'choice_name' =&gt; 'id',<br>'placeholder' =&gt; 'Choose a Supervisor',<br>'query_builder' =&gt; function(UserRepository $repo){<br>return $repo-&gt;findAllSupervisorsOrderedByFirstname();<br>}</p><p>This is my UserRepository.php:</p><p>createQueryBuilder('user')<br>            -&gt;andWhere('user.access_role = :accessrole')<br>            -&gt;setParameter('accessrole', "ROLE_SUPERVISOR")<br>            -&gt;orderBy('user.firstname', 'ASC');<br>    }<br>}<br>            ])</p><p>Thanks already!</p><p>Roel</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2878644766" id="dsq-comment-2878644766">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/marcolacugurra/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/20016/3299/avatar92.jpg?1473157912">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2878644766">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-09-06</span>
	                            <span class="dsq-commenter-name">Marco La Cugurra</span>
	                        </div>

	                        <div id="dsq-comment-message-2878644766" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2878644766" class="dsq-comment-text">
	                                <p>Thanks Victor, yes now it's working :)</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2876914718" id="dsq-comment-2876914718">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2876914718">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-09-05</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2876914718" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2876914718" class="dsq-comment-text">
	                                <p>Hey Marco,</p><p>Looks like you forgot to use a namespace for `BookingRepository` class in `BookingType`, that's why it's trying to load `BookingRepository` with `AppBundle\Form` namespace. Add the <code>use AppBundle\Repository\BookingRepository;</code> above the `BookingType` class, it should help.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2875736753" id="dsq-comment-2875736753">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/marcolacugurra/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/20016/3299/avatar92.jpg?1473157912">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2875736753">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-09-04</span>
	                            <span class="dsq-commenter-name">Marco La Cugurra</span>
	                        </div>

	                        <div id="dsq-comment-message-2875736753" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2875736753" class="dsq-comment-text">
	                                <p>Hello :) I keep on having this error while implementing a custom query on my BookingType.php</p><p>"Catchable Fatal Error: Argument 1 passed to AppBundle\Form\BookingType::AppBundle\Form\{closure}() must be an instance of AppBundle\Form\BookingRepository, instance of AppBundle\Repository\BookingRepository given"</p><p>here is my Booking class</p><p>id;<br>    }</p><p>    /**<br>     * Set bookingDate<br>     *<br>     * @param \DateTime $bookingDate<br>     *<br>     * @return Booking<br>     */<br>    public function setBookingDate($bookingDate)<br>    {<br>        $this-&gt;bookingDate = $bookingDate;</p><p>        return $this;<br>    }</p><p>    /**<br>     * Get bookingDate<br>     *<br>     * @return \DateTime<br>     */<br>    public function getBookingDate()<br>    {<br>        return $this-&gt;bookingDate;<br>    }</p><p>    /**<br>     * Set bookingTime<br>     *<br>     * @param \DateTime $bookingTime<br>     *<br>     * @return Booking<br>     */<br>    public function setBookingTime($bookingTime)<br>    {<br>        $this-&gt;bookingTime = $bookingTime;</p><p>        return $this;<br>    }</p><p>    /**<br>     * Get bookingTime<br>     *<br>     * @return \DateTime<br>     */<br>    public function getBookingTime()<br>    {<br>        return $this-&gt;bookingTime;<br>    }</p><p>    /**<br>     * Set bookingComments<br>     *<br>     * @param string $bookingComments<br>     *<br>     * @return Booking<br>     */<br>    public function setBookingComments($bookingComments)<br>    {<br>        $this-&gt;bookingComments = $bookingComments;</p><p>        return $this;<br>    }</p><p>    /**<br>     * Get bookingComments<br>     *<br>     * @return string<br>     */<br>    public function getBookingComments()<br>    {<br>        return $this-&gt;bookingComments;<br>    }</p><p>    /**<br>     * Set status<br>     *<br>     * @param \AppBundle\Entity\Status $status<br>     *<br>     * @return Booking<br>     */<br>    public function setStatus(\AppBundle\Entity\Status $status = null)<br>    {<br>        $this-&gt;status = $status;</p><p>        return $this;<br>    }</p><p>    /**<br>     * Get status<br>     *<br>     * @return \AppBundle\Entity\Status<br>     */<br>    public function getStatus()<br>    {<br>        return $this-&gt;status;<br>    }</p><p>    /**<br>     * Set users<br>     *<br>     * @param \AppBundle\Entity\User $users<br>     *<br>     * @return Booking<br>     */<br>    public function setUsers(\AppBundle\Entity\User $users = null)<br>    {<br>        $this-&gt;users = $users;</p><p>        return $this;<br>    }</p><p>    /**<br>     * Get users<br>     *<br>     * @return \AppBundle\Entity\User<br>     */<br>    public function getUsers()<br>    {<br>        return $this-&gt;users;<br>    }</p><p>    /**<br>     * Set dogs<br>     *<br>     * @param \AppBundle\Entity\Dog $dogs<br>     *<br>     * @return Booking<br>     */<br>    public function setDogs(\AppBundle\Entity\Dog $dogs = null)<br>    {<br>        $this-&gt;dogs = $dogs;</p><p>        return $this;<br>    }</p><p>    public function __toString()<br>    {<br>        return $this-&gt;dogs;<br>    }</p><p>    /**<br>     * Get dogs<br>     *<br>     * @return \AppBundle\Entity\Dog<br>     */<br>    public function getDogs()<br>    {<br>        return $this-&gt;dogs;<br>    }<br>    /**<br>     * Constructor<br>     */<br>    public function __construct()<br>    {<br>        $this-&gt;services = new \Doctrine\Common\Collections\ArrayCollection();<br>    }</p><p>    /**<br>     * Add service<br>     *<br>     * @param \AppBundle\Entity\Service $service<br>     *<br>     * @return Booking<br>     */<br>    public function addService(\AppBundle\Entity\Service $service)<br>    {<br>        $this-&gt;services[] = $service;</p><p>        return $this;<br>    }</p><p>    /**<br>     * Remove service<br>     *<br>     * @param \AppBundle\Entity\Service $service<br>     */<br>    public function removeService(\AppBundle\Entity\Service $service)<br>    {<br>        $this-&gt;services-&gt;removeElement($service);<br>    }</p><p>    /**<br>     * Get services<br>     *<br>     * @return \Doctrine\Common\Collections\Collection<br>     */<br>    public function getServices()<br>    {<br>        return $this-&gt;services;<br>    }<br>}</p><p>BookingType:</p><p>add('dogs', EntityType::class, [<br>                'class'=&gt;Booking::class,<br>                'placeholder'=&gt;'Select a Dog',<br>                'query_builder' =&gt; function (BookingRepository $repo) {<br>                return $er-&gt;dogByUserQuery();<br>                }</p><p>                ])<br>            -&gt;add('services')<br>            -&gt;add('bookingDate', HiddenType::Class , array('data' =&gt; 'ciao' ))<br>            -&gt;add('bookingTime',  DateTimeType::class , array(<br>            'placeholder' =&gt; array(<br>            'year' =&gt; 'Year', 'month' =&gt; 'Month', 'day' =&gt; 'Day',<br>            'hour' =&gt; 'Hour', 'minute' =&gt; 'Minute'<br>            )))</p><p>        ;<br>    }</p><p>    /**<br>     * @param OptionsResolver $resolver<br>     */<br>    public function configureOptions(OptionsResolver $resolver)<br>    {<br>        $resolver-&gt;setDefaults(array(<br>            'data_class' =&gt; 'AppBundle\Entity\Booking'<br>        ));<br>    }<br>}</p><p>and my BookingRepository.php</p><p>createQueryBuilder('booking')<br>			        -&gt;orderBy('booking.dogs', 'ASC');<br>	}<br>}</p><p>please help me :)</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	        </ul>
	    </div>
            </div>

    <script type="text/javascript">
    var disqus_shortname = 'knpuniversity';
    var disqus_container_id = 'disqus_thread';var disqus_developer = 1;var disqus_identifier = 'course_video_custom-entity-type-query';var disqus_url = 'https://knpuniversity.com/screencast/symfony-forms/custom-entity-type-query';var disqus_config = function () {};

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

                                            </div>
                    <div class="pull-left-xs pull-right-md">
                                        <a class="btn btn-success"
           href="date-picker-field#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                    </div>
                    <div class="pull-left addthis-module">
                        
    <div class="addthis_toolbox addthis_default_style js-analytics-addthis-wrapper addthis_32x32_style" addthis:url="http://knpuniversity.com/screencast/symfony-forms/custom-entity-type-query" addthis:title="Symfony Forms: Build, Render &amp; Conquer!">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer class="footer footer-styling">
    <div class="container">
        <div class="row">
                        <div class="col-xs-7 col-sm-4">
                <div class="row">
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../courses/all">All Courses</a></li>
                                                            <li><a class="knp-color-black" href="../../pricing.1">Pricing</a></li>
                                                        <li><a class="knp-color-black" href="../../faq">FAQ</a></li>
                            <li><a class="knp-color-black" href="../../training">Training</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../about">About</a></li>
                            <li><a class="knp-color-black" href="../../blog">Blog</a></li>
                            <li><a class="knp-color-black" href="../../contact">Contact Us</a></li>
                            <li>
                                <a class="knp-color-black" href="../../terms">Terms</a>
                                <span class="knp-color-black">&amp;</span>
                                <a class="knp-color-black" href="../../privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="hidden-xs col-sm-4">
                <p class="disclaimer">Symfony is a registered trademark of Fabien Potencier in the United States and/or other countries.
                This product is not endorsed or sponsored by Fabien Potencier.
                </p>
            </div>
            <div class="col-xs-5 col-sm-4">
                <div class="social-icons">
                    <a class="btn btn-social-icon btn-twitter" href="https://twitter.com/KnpUniversity">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a class="btn btn-social-icon btn-facebook" href="https://www.facebook.com/KnpLabs/">
                        <i class="fa fa-facebook"></i>
                    </a>
                    <a class="btn btn-social-icon btn-github" href="https://github.com/knpuniversity">
                        <i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
                    </div>
    </div>
</footer>

<!-- JS -->
            <script>
        Core.analyticsVideoStatsUrl = '/api/analytics/video/duration';
    </script>

            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-7062980-20']);
        _gaq.push(['_trackPageview']);
    </script>
    <script>
    
    </script>
    
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    
                <script type="text/javascript">
      (function() {
        var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
        uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/pOay2WLVabhXiEffbarO6Q.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
      })();

      UserVoice = window.UserVoice || [];
      UserVoice.push(['showTab', 'classic_widget', {
          tab_position: 'bottom-right',
          tab_label: 'Ideas or Feedback?',
          tab_color: '#005E8E'
      }]);
    </script>
        
            
        <script type="text/javascript">
    var _sf_async_config={uid:54262,domain:"knpuniversity.com",useCanonical:true};
    (function(){
      function loadChartbeat() {
        window._sf_endpt=(new Date()).getTime();
        var e = document.createElement('script');
        e.setAttribute('language', 'javascript');
        e.setAttribute('type', 'text/javascript');
        e.setAttribute('src', '//static.chartbeat.com/js/chartbeat.js');
        document.body.appendChild(e);
      }
      var oldonload = window.onload;
      window.onload = (typeof window.onload != 'function') ?
         loadChartbeat : function() { oldonload(); loadChartbeat(); };
    })();
    </script>
    
            <script>
            (function(){
                var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
            })("woopra");

            woopra.config({
                domain: 'knpuniversity.com',
                download_tracking: true,
                outgoing_tracking: true
            });

                            woopra.identify({
                    userType: 'anonymous',
                    hasSubscription: 'no'
                });
                    </script>

        <script>
            woopra.track(
            'course_view_chapter',
            {"course":"symfony-forms","courseIsOwned":false,"chapter":"Custom Query in EntityType","chapterNumber":7,"chapterIsFree":false}
        );
    </script>

        <script>
            woopra.track();
        </script>
     
        <script type="text/javascript">
    var _qevents = _qevents || [];

    (function() {
    var elem = document.createElement('script');
    elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
    })();

    _qevents.push({
    qacct:"p-8-SEHS37bhSQ0"
    });
    </script>

    <noscript>
    <div style="display:none;">
    <img src="http://pixel.quantserve.com/pixel/p-8-SEHS37bhSQ0.gif" border="0" height="1" width="1" alt="Quantcast"/>
    </div>
    </noscript>
    


    <script type="text/javascript" src="../../assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script type="text/javascript" src="../../assets/vendor/zeroclipboard/dist/ZeroClipboard.min.js"></script>
    <script type="text/javascript" src="../../js/CodeBlocks.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/underscore.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/doctools.js"></script>

    <script>
        Core.courseTitle = 'Symfony Forms: Build, Render &amp; Conquer!';
        Core.courseId = 77
        Core.courseIsOwned = false;
        Core.courseSlug = 'symfony-forms';
                    Core.chapterTitle = 'Custom Query in EntityType';
            Core.chapterNumber = 7;
            Core.chapterIsFree = false;
            Core.chapterSlug = 'custom-entity-type-query';
        
                var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.0.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };

        jQuery(document).ready(function() {
            // Stick left sidebar menu
            $('.js-sticker').sticky();

            var $scriptWrapper = $('.js-script-content-wrapper');
            var codeBlocks = new Core.CodeBlocks($scriptWrapper);

            var expandList = $('.js-expand-list');

            expandList.on('click', function(){
                var target = $(this).data('target');
                var $expandArea = $('#' + target);
                $expandArea.toggleClass('expanded');

                // http://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery
                $(document).one('click', function closeExpandList (e){
                    if($expandArea.has(e.target).length === 0){
                        $expandArea.removeClass('expanded');
                    } else {
                        $(document).one('click', closeExpandList);
                    }
                });
            });
        });
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>



    <script type="text/javascript">
    var addthis_share = {
        templates: {
            twitter: '{{title}} - {{url}} | via @KnpUniversity'
        }
    }
</script>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=weaverryan"></script>

</body>
</html>
