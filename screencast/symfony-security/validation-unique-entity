<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
            <script src="https://cdn.optimizely.com/js/421270022.js"></script>
    
                    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Validation with the UniqueEntity Constraint > Symfony Security: Beautiful Authentication, Powerful Authorization | KnpUniversity</title>

                    <link href="../../builds/main-db6835bf19d99bcc09032789f3bd39e4.css" rel="stylesheet">

        <link href='https://fonts.googleapis.com/css?family=Rokkitt' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>
    

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/tomorrow-night.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/tomorrow-night.min.css">


        <link rel="stylesheet" href="../../builds/code_block_styles-2d783e385d9dbb1ef88d9053d1b8d675.css">



    <link href="../../builds/video-6b5fa6dfb768239b226d39d08bd4867e.css" rel="stylesheet">

                        <script src="../../bundles/fosjsrouting/js/router.js"></script>

        <script src="../../builds/main-1dfa89b76a105f9c2d98.js"></script>
        <script src="../../js/routing?callback=fos.Router.setData"></script>
            

    <script>
        // video settings
        window.video = {
            isCourseChapterPaid: false,
            courseChapterId: 38375
        };

                window.video.nextDetails = {
            'type': 'video',
            'title': 'Up Next: Validation\x20Groups\x3A\x20Conditional\x20Validation <i class="fa fa-play"></i>',
            'url': '/screencast/symfony-security/conditional-validation-groups#play'
        };
            </script>

    <script src="../../builds/video-1dfa89b76a105f9c2d98.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            var hashValue = window.location.hash.substr(1);
            if (hashValue.substr(0, 7) == 'comment') {
                // this is a #comment link - open up the comment tab!
                $('.nav-tabs a[href="#tab-comment"]').click();
            }
        });
    </script>

    <link rel="alternate" type="application/rss+xml" title="Blog feed with technical articles around PHP and screencast and tutorial updates from KnpUniversity.com" href="http://feeds.feedburner.com/knpuniversity" />

    <meta name="description" content="Ah, security! Quick run!

Wait, come back! Security in Symfony is *awesome*! Seriously,
between things called &quot;voters&quot; and the Guard authentication
system, you can do anything you want inside of Symfony, and
the code to do it is simple and expressive.

Security has two sides: authentication (who are you?) and
authorization (do you have access to do X). We&#039;ll talk about
each of these, creating an traditional form login system
*and* and API token authentication system using Json web tokens
(not as scary as they sound!). Then, we&#039;ll turn to authorization,
with roles, voters and other good stuff:

* Security &amp; Firewall Fundamentals
* Creating a custom login form
* Making a User (ooOOOoo)
* User Providers (why you need them, but don&#039;t care)
* Password Encryption
* Logging out!
* Protecting entire URLs with access_control(s)
* IS_AUTHENTICATED_FULLY, IS_AUTHENTICATED_REMEMBERED
* Checking access with roles! ROLE_USER
* Denying access in a controller
* What are voters?
* Role hierarchies
* Impersonation (`switch_user`)
* Registration Form
* Manual authentication

... and how to create a back door into your site. Just kidding!
Let&#039;s make some secure sites!
">

    <meta property="og:site_name" content="KnpUniversity - PHP and Symfony Video Tutorial Screencasts">
    <meta name="twitter:site" content="@KnpUniversity"><link rel="shortcut icon" href="../../assets/images/favicon.ico">
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    <meta property="og:title" content="Validation with the UniqueEntity Constraint">
<meta property="og:description" content="Ah, security! Quick run!

Wait, come back! Security in Symfony is *awesome*! Seriously,
between things called &amp;quot;voters&amp;quot; and the Guard authentication
system, you can do anything you want inside of Symfony, and
the code to do it is simple and expressive.

Security has two sides: authentication (who are you?) and
authorization (do you have access to do X)">
<meta property="og:url" content="http://knpuniversity.com/screencast/symfony-security/validation-unique-entity">
    <meta property="og:image" content="http://knpuniversity.com/imagine/course_video_poster_large/uploads/screencast/symfony-security:cfae786aa1f6535885fa8d5d09e578870082c672/sf-ep6.png">

<meta name="twitter:card" content="summary">


                            
    </head>
<body data-user-id="" >
<nav class="navbar navbar-inverse nav-margin navbar-learning-layout">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle toggle-button collapsed" data-toggle="collapse" data-target="#js-navbar" aria-expanded="false" aria-controls="js-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../logout" class="navbar-brand">
                <span class="knp-color-blue">Knp</span>
                <span class="knp-color-white">University</span>
            </a>
        </div>
        <form class="navbar-form navbar-left navbar-form-border" role="search" method="GET" action="http://knpuniversity.com/search">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search Tutorials" value="" name="q">

                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </form>
        <div id="js-navbar" class="collapse-fix collapse navbar-right navbar-collapse">
            

<ul class="nav navbar-nav nav-narrowerOnSmall">
            <li><a href="../../checkout/subscription/team_yearly/5" title="Cart"><i class="fa fa-shopping-cart"></i></a></li>
        <li class="dropdown"><a href="validation-unique-entity#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <i class="fa fa-angle-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="../../tracks.1">Tracks</a></li>
          <li><a href="../../courses/all">All Courses</a></li>
        </ul>
    </li>
            <li><a href="../../pricing.1">Pricing</a></li>
        <li><a href="../../training">Training</a></li>
                <li class="visible-xs"><a href="../../logout">My Profile</a></li>
        <li class="visible-xs"><a href="../../logout">Sign Out</a></li>

            <li><a href="../../login.1">Log In</a></li>
        <li class="btn btn-sm btn-warning signup-btn"><a class="signup" href="../../signup/index.html">Sign Up</a></li>
    </ul>

        </div>
    </div>
</nav>


    




<div class="table-contents-container">
  <div class="container expandList" id="js-chapter-list">
      <button class="table-contents-container-button js-expand-list" data-target="js-chapter-list" title="Chapter List">
          <i class="fa fa-bars"></i>
                        19.
                            Validation with the UniqueEntity...
                </button>
      <div class="expandList-body">
          <div class="expandList-bodyInner">
              <h3 class="expandList-header">
                  <a class="course-title-expand" href="resume">Symfony Security: Beautiful Authentication, Powerful Authorization</a>
              </h3>

                                <div class="watched-tut-progress-container watched-tut-progress-container-overview">
        <div class="watched-tut-progress-overview" style="width: 0%; margin-right: 100%;" title="0% complete"><span class="profile-progress-title">0%</span></div>
    </div>


              
              <div class="expand-chapter-list">
                      
    
    <!-- Table of contents -->
    <div class="chapter-list">
        <ul class="list-unstyled">
            
                
                                <li class="title chapter-list-item ">
            <a href="user-class" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                1.
                        The All-Important User Class
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:22</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="user-interface-methods" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                2.
                        The UserInterface Methods (Keep some Blank!)
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:19</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="rendering-login-form" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                3.
                        Rendering that Login Form
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:32</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="all-about-firewalls" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                4.
                        All About Firewalls
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:42</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-form-authenticator" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                5.
                        The LoginFormAuthenticator
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:43</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="authenticator-get-user-check-credentials" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                6.
                        Authenticator: getUser, checkCredentials &amp; Success/Failure
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 6:31</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="user-provider" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                7.
                        The Mysterious &quot;User Provider&quot;
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:18</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="logout-and-last-username" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                8.
                        Logging out &amp; Pre-filling the Email on Failure
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:21</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="user-plain-password" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                9.
                        Users Need Passwords (plainPassword)
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:32</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="encoding-user-password" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                10.
                        Doctrine Listener: Encode the User&#039;s Password
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:39</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="user-encoder-configuration" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                11.
                        Configuring the Encoder in security.yml
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:07</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="authorization-roles" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                12.
                        Authorization: access_control and Roles
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:17</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="deny-access-inside-controller" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                13.
                        Denying Access in a Controller
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:38</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="dynamic-roles" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                14.
                        Dynamic Roles
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 4:10</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="the-user-object" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                15.
                        Fetch me a User Object!
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:33</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="role-hierarchy" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                16.
                        Role Hierarchy
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:14</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="impersonation-switch-user" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                17.
                        Impersonation (Login as Someone Else)
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:46</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="user-registration-form" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                18.
                        Registration Form
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 7:05</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item chapter-list-item-active">
            <a href="validation-unique-entity" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                19.
                        Validation with the UniqueEntity Constraint
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:40</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="conditional-validation-groups" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                20.
                        Validation Groups: Conditional Validation
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:00</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="automatic-login-handling" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                21.
                        Automatically Login after Registration!
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:10</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


                    </ul>
    </div>

    
              </div>
          </div>
      </div>
  </div>
  <div>
                <a href="../../pricing/symfony-security" class="btn btn-success pull-right-md download-buy-buttons">Buy <span class="hidden-xs">Access to Course</span></a>
              </div>
</div>


        <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-9 col-lg-10">
                <h1 class="account-header account-header-low-margin-top">Validation with the UniqueEntity Constraint</h1>
                
                                    <p class="hidden-xs">
                        Course:
                        <a class="knp-color-black" href="resume"><em>Symfony Security: Beautiful Authentication, Powerful Authorization Tutorial</em></a>                    </p>
                            </div>
        </div>

                <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="full-block-container">
                    <div class="frame-padding">
                        <div id="player">
                                                                                <div>
                                                                <div class="row">
                                    <div class="end-show">
                                        <div class="xs-col-12">
                                            <p class="end-show-header">Keep learning!</p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link"><a href="../../pricing.1" class="btn btn-success btn-md">Start your All Access Pass</a></p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link text-center"><a href="../buy/collections" class="knp-color-white">Buy just this tutorial for $12.00</a></p>
                                        </div>
                                    </div>
                                </div>
                                                            </div>
                                                </div>
                    </div>
                </div>
            </div>
        </div>
         
        <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="pull-right">
                                    <a class="btn btn-success"
           href="conditional-validation-groups#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                </div>

                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a data-toggle="tab" href="validation-unique-entity#tab-script">Script</a></li>
                    <li><a data-toggle="tab" href="validation-unique-entity#tab-comment">
                        <i class="fa fa-comment-o"></i>
                                                    
                                                                                                (25+)
                                                                                        Conversation
                                            </a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="tab-script">
                        <div class="js-script-content-wrapper top-margin-script markdown-content">
                                                                                        <a href="https://github.com/knpuniversity/symfony/edit/master/knpu/ep6-security/validation-unique-entity.md" target="_blank" class="btn btn-default btn-circle pull-right js-tooltip" title="Edit on GitHub"><span class="fa fa-pencil"></span></a>
                                                                    <p>Registration is working, but it's missing validation.</p>
<p>Since the form is bound to the <code>User</code> class, that is where our annotation rules
should live. First, you need the <code>use</code> statement for the annotations. We added validation
earlier in <code>Genus</code>. So, you can either copy this <code>use</code> statement, grab it from the
documentation, or do what I do: cheat by saying <code>use</code>, auto-completing an annotation
I know exists - like <code>NotBlank</code>, deleting the last part, and adding the normal
<code>as Assert</code> alias:</p>
<p><div class="code-block-wrapper" data-code-block-guid="395fc2df09">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-116" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            116 lines <span class="meta-divider"></span> <span title="src/AppBundle/Entity/User.php">src/AppBundle/Entity/User.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-7" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 7
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span> <span class="hljs-title">as</span> <span class="hljs-title">Assert</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="9-116" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 9 - 116
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>We obviously want email to be <code>NotBlank</code>. We also want email to be a valid email
address. For <code>plainPassword</code>, that should also not be blank:</p>
<p><div class="code-block-wrapper" data-code-block-guid="94d0552ca8">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-116" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            116 lines <span class="meta-divider"></span> <span title="src/AppBundle/Entity/User.php">src/AppBundle/Entity/User.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserInterface</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-22" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 16 - 22
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">    <span class="hljs-comment">/**</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code">     * <span class="hljs-doctag">@Assert</span>\NotBlank()</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">     * <span class="hljs-doctag">@Assert</span>\Email()</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="26-26" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 26
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="27"></td>
            <td class="blob-code">     */</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="28"></td>
            <td class="blob-code">    <span class="hljs-keyword">private</span> $email;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="29-36" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 29 - 36
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="37"></td>
            <td class="blob-code">    <span class="hljs-comment">/**</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="38-38" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 38
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="39"></td>
            <td class="blob-code">     * <span class="hljs-doctag">@Assert</span>\NotBlank()</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="40-41" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 40 - 41
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="42"></td>
            <td class="blob-code">     */</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="43"></td>
            <td class="blob-code">    <span class="hljs-keyword">private</span> $plainPassword;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="44-114" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 44 - 114
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="115"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Pretty simple.</p>
<p>Ok, go back, keep the form blank, and submit. Nice validation errors.</p>
<h2 id="forcing-a-unique-email">Forcing a Unique Email <a class="headerlink" href="validation-unique-entity#forcing-a-unique-email" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>But check this out: type <code>weaverryan+1@gmail.com</code>. That email is already taken, so
I should <em>not</em> be able to do this. But since there aren't any validation rules
checking this, the request goes through and the email looks totally valid.</p>
<p>How can we add a validation rule to prevent that? By using a special validation constraint
made <em>just</em> for this occasion.</p>
<h3 id="the-uniqueentity-constraint">The UniqueEntity Constraint <a class="headerlink" href="validation-unique-entity#the-uniqueentity-constraint" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>This constraint's annotation doesn't go above a specific property: it lives above
the entire class. Add <code>@UniqueEntity</code>. Notice, this lives in a different namespace
than the other annotations, so PhpStorm added its own <code>use</code> statement.</p>
<p>Next configure it. You can always go to the reference section of the docs, or, if
you hold command, you can click the annotation to open its class. The public properties
are always the options that you can pass to the annotation.</p>
<p>The options we need are <code>fields</code> - which tell it which field needs to be unique
in the database - and <code>message</code> so we can say something awesome when it happens.</p>
<p>So add <code>fields={"email"}</code>. This is called <em>fields</em> because you <em>could</em> make this
validation be unique across several columns. Then add
<code>message="It looks like you already have an account!"</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="a276e26fca">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-118" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            118 lines <span class="meta-divider"></span> <span title="src/AppBundle/Entity/User.php">src/AppBundle/Entity/User.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-4" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 4
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="5"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bridge</span>\<span class="hljs-title">Doctrine</span>\<span class="hljs-title">Validator</span>\<span class="hljs-title">Constraints</span>\<span class="hljs-title">UniqueEntity</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="6-10" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 6 - 10
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-comment">/**</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="12-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 12 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"> * <span class="hljs-doctag">@UniqueEntity</span>(fields={"email"}, message="It looks like your already have an account!")</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"> */</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserInterface</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="17-118" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 17 - 118
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Cool! Go back and hit register again. This just makes me happy!</p>
<p>We're good, right? Well, almost. There's one last gotcha with validation and registration.</p>

    
                        </div>
                    </div>
                    <div class="tab-pane" id="tab-comment">
                        <h3>Leave a comment!</h3>
                                                        <div id="disqus_thread">
                <style type="text/css">
            #dsq-comments {padding: 10px 0 0}
            .dsq-comment {position: relative;clear: both;margin: 0 0 1.5em;}
            .dsq-avatar {left: 0;position: absolute;}
            .dsq-avatar img {border: 0 none;border-radius: 3px;height: 36px;width: 36px;}
            .dsq-comment-body {padding: 0 0 0 46px;}
            .dsq-comment-header {border: 1px solid rgba(0, 0, 0, 0.15);border-radius: 3px;font-size: 13px;line-height: 14px;margin: 0 0 1em;max-height: 36px;overflow: hidden;padding: 10px;position: relative;text-overflow: ellipsis;white-space: nowrap;}
            .dsq-comment-message {word-wrap: break-word;}
            .dsq-comment-message {line-height: 1.5em;margin: 0 0 1em;}
            .dsq-comment-text {display: inline;}
            .dsq-comment-date {float: right;font-size: 90%;margin: 0 12px 0 0;}
        </style>

	    <div id="dsq-content">
	        <ul id="dsq-comments">
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3061093888" id="dsq-comment-3061093888">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3061093888">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-20</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-3061093888" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3061093888" class="dsq-comment-text">
	                                <p>Awesome :) - Merry Xmas back!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3060622090" id="dsq-comment-3060622090">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_B7LdYoaprn/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/20683/1553/avatar92.jpg?1482231107">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3060622090">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-20</span>
	                            <span class="dsq-commenter-name">Stéphane</span>
	                        </div>

	                        <div id="dsq-comment-message-3060622090" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3060622090" class="dsq-comment-text">
	                                <p>Hey Ryan,<br>Thank a lot for your answer. Your solution works fine.<br>Cheers and merry Christmas.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3059841726" id="dsq-comment-3059841726">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3059841726">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-19</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-3059841726" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3059841726" class="dsq-comment-text">
	                                <p>Hey Stèphane!</p><p>Hmmm. So, when you setup something like this, it means that 2 users cannot have the same username+email combination. For example, you can I can't *both* have email: bob@free.fr &amp; user: bob, but you and I *could* both have bob@free.fr, as long as we have different usernames. I'm wondering if this is the problem? If you want to make sure the user has a unique username AND also independently has a unique email, then try this:</p><p></p><pre><code><br>@UniqueEntity(fields={"username"})<br>@UniqueEntity(fields={"email"})<br></code></pre><p></p><p>Let me know if that was it! Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3029422624" id="dsq-comment-3029422624">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3029422624">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-01</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-3029422624" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3029422624" class="dsq-comment-text">
	                                <p>haha, no problem! Twig calls this getter behind-the-scene when you call "{{ app.user.username }}" since username property is private - a little magic by Twig :)</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3029410723" id="dsq-comment-3029410723">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/christophelablancherie/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/16106/9564/avatar92.jpg?1481207682">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3029410723">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-01</span>
	                            <span class="dsq-commenter-name">Christophe Lablancherie</span>
	                        </div>

	                        <div id="dsq-comment-message-3029410723" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3029410723" class="dsq-comment-text">
	                                <p>Oh my gosh, i'm so stupid -_-</p><p>Thanks Victor !</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3029390501" id="dsq-comment-3029390501">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3029390501">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-01</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-3029390501" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3029390501" class="dsq-comment-text">
	                                <p>So if I understand you right - the problem is that the username field holds a username in database, but when you try to output username property in Twig template with "{{ app.user.username }}" - you get the email value instead of username, right? So then you should check the getter method for username property in the first place, I bet the User::getUsername() method just returns incorrect property, i.e. "return $this-&gt;email", but should return "$this-&gt;username". ;) <br>Let me know if it helps you.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3029373433" id="dsq-comment-3029373433">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/christophelablancherie/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/16106/9564/avatar92.jpg?1481207682">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3029373433">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-01</span>
	                            <span class="dsq-commenter-name">Christophe Lablancherie</span>
	                        </div>

	                        <div id="dsq-comment-message-3029373433" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3029373433" class="dsq-comment-text">
	                                <p>Hum, it's make sense about 50%....I have adapted the tutorial, and my users could log with username. But when i used the username, i see the email in the debug toolbar. I don't understand why...And even i retrieve the complete user (dump($this-&gt;getUser()), i can't access to the username in twig when i do app.user.username... I don't understand why...</p><p>And just to specify it, at first time, i used FOSUserBundle, but i prefere to change because i've some bugs and i don't understand how it's works, it's a little bit too magical...</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3029228235" id="dsq-comment-3029228235">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3029228235">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-01</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-3029228235" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3029228235" class="dsq-comment-text">
	                                <p>Hey Christophe,</p><p>Actually, username could be anything: user's nickname, email, phone number, etc. - it's up to you! In this tutorial we assume that user could log in by email and password, that's why when we say username we mean email. So you have to stop holding user's email on username property - just start to set username to the, actually,  username value, i.e. user's nickname. That's it! If you also want to store user email besides the username, you need to add both $username and $email properties to the User class. Does it make sense for you?</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="3029216467" id="dsq-comment-3029216467">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/christophelablancherie/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/16106/9564/avatar92.jpg?1481207682">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-3029216467">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-12-01</span>
	                            <span class="dsq-commenter-name">Christophe Lablancherie</span>
	                        </div>

	                        <div id="dsq-comment-message-3029216467" class="dsq-comment-message">
	                            <div id="dsq-comment-text-3029216467" class="dsq-comment-text">
	                                <p>Hi,</p><p>i followed the tutorial to the end and i two questions... ^^'</p><p>- First : When i put this code in twig {{ app.user.username }} it's get me the email, and not the username. But when i debug $this-&gt;getUser() i get the complete user, with Username attribute...I don't know why it's not working... :(</p><p>- Second : Why i'm log in with the email and not the username. I've followed the tutorial and i've modified the property for the Authenticator, but nothing changing...It's always the email and not username...</p><p>    providers:<br>        sng_user_provider:<br>            entity: { class: ******\UserBundle\Entity\User, property: username }</p><p>Could you help me ?<br>Thanks in advance !</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977440456" id="dsq-comment-2977440456">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977440456">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977440456" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977440456" class="dsq-comment-text">
	                                <p>Works like a charm! It took us a while but we finally found the solution. Thank you <a data-dsq-mention="bocharsky25:disqus" href="https://disqus.com/by/bocharsky25/" rel="nofollow noopener">Victor Bocharsky</a> and <a data-dsq-mention="weaverryan:disqus" href="https://disqus.com/by/weaverryan/" rel="nofollow noopener">weaverryan</a> :) You guys are awesome.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977431259" id="dsq-comment-2977431259">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977431259">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977431259" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977431259" class="dsq-comment-text">
	                                <p>Johan! It all makes sense now :). Yes, it happens in <code>handleRequest()</code> Move your <code>setPostedBy()</code> to the beginning of the action method, e.g.:</p><p><code><pre>public function newPostAction(Request $request)<br>{<br>    $post = new Post();<br>    $post-&gt;setPostedBy($this-&gt;getUser());<br>    $form = $this-&gt;createForm(PostForm::class, $post);<br><br>    $form-&gt;handleRequest($request);<br>    // ...<br>}<br></pre></code></p><p>The way you did it is perfectly logical... I'm just so accustomed to doing all my data setup immediately that it didn't occur to me! Both ways are identical, but obviously, this way gives your form the data it needs for validation.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977417662" id="dsq-comment-2977417662">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977417662">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977417662" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977417662" class="dsq-comment-text">
	                                <p>If my code in my controller looks like this:<br></p><pre><code><br>$form = $this-&gt;createForm(PostForm::class);<br>$form-&gt;handleRequest($request);<br><br>if($form-&gt;isValid()) {<br><br>	/** @var Post $post */<br>	$post = $form-&gt;getData();<br><br>	/** @var User $user */<br>	$user = $this-&gt;getUser(); <br>	$post-&gt;setPostedBy($user);<br><br>	// persist/flush post here<br>}<br></code></pre><p></p><p>then where is the validation done? I assume in the handleRequest method, right? How can it validate the @UniqueEntity without the User entity stored in the form/request yet?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977399883" id="dsq-comment-2977399883">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977399883">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977399883" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977399883" class="dsq-comment-text">
	                                <p>Hey Johan!</p><p>Not exactly - validation is done *by* the form component, but all it does is say "validate this *object*" - so whatever data that is on your object (regardless of where it came from) is validated. So, this is still a mystery to me. You should at least see the query happening from the validator. You might actually open up the UniqueEntityValidator and do some debugging there - I can't remember having issues like this :/.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977372488" id="dsq-comment-2977372488">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977372488">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977372488" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977372488" class="dsq-comment-text">
	                                <p>I "attach" the user in the controller like:</p><p></p><pre><code><br>$user = $this-&gt;getUser();<br>$post-&gt;setPostedBy($user);<br></code></pre><p></p><p>I think it makes sense that the validation gets ignored. Validation is done in the form object, not in the entity manager, right?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977369183" id="dsq-comment-2977369183">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977369183">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977369183" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977369183" class="dsq-comment-text">
	                                <p>I just did some testing with just single field uniqueness validation and this was the result:</p><p>1. </p><pre>@UniqueEntity(fields={"postedAt"}, message="test message")</pre><p> works perfectly fine and it fails validation if "postedAt" already exists in the database. This 'postedAt' field is part of the form.</p><p>2. </p><pre>@UniqueEntity(fields={"postedBy"}, message="test message") </pre><p>does not work! It passes validation even if the 'postedBy' already exists. This 'postedBy' is not in the form (it's derived from the currently authenticated user).</p><p>Is this the problem? All fields that I refer to in the @UniqueEntity annotation *must* be in the (Symfony) form?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977359624" id="dsq-comment-2977359624">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977359624">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977359624" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977359624" class="dsq-comment-text">
	                                <p>Thanks Ryan, I tried that before and it executes four queries:</p><p>1. Query the currently authenticated user.<br>2. Starting a transaction.<br>3. Inserting into database.<br>4. Rollback transaction. (because of the violation of the index).</p><p>It doesn't seem to do any query to check for the @UniqueEntity annotation.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977349200" id="dsq-comment-2977349200">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977349200">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977349200" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977349200" class="dsq-comment-text">
	                                <p>Yea, I agree - this is weird, but I *feel* like the date field must be causing some sort of issue. Hours/minutes/seconds should *not* be there... but who knows. Behind the scenes, it's going to be doing a WHERE lookup by using the postedBy and postedDate - it's a little weird to do a WHERE matching an exact date, so it could be the issue. You could also check your web debug toolbar (even on the page where you hit the error) and click the Doctrine icon to see the queries for the page. This would at least let you see what query the UniqueConstraint is making to try to look for existing, matching Posts.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977344125" id="dsq-comment-2977344125">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977344125">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2977344125" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977344125" class="dsq-comment-text">
	                                <p>Yea, I did add that line to my code Victor.</p><p>I'm thinking it might not work because I'm using dates. Maybe it still stores the hour/minute/second part of the date and so it thinks the dates are different. I feel like that wouldn't make too much sense because I'm using the 'date' type, not the 'datetime' type.</p><p>Oh well, I think I will go with the custom validation callback, it should do the job. Thanks! :)</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2977300599" id="dsq-comment-2977300599">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2977300599">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-31</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2977300599" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2977300599" class="dsq-comment-text">
	                                <p>Hey Johan,</p><p>Did you use proper namespace for UniqueEntity constraint?</p><p></p><pre><code><br>use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;<br><br>/**<br> * @ORM\Entity<br> * @UniqueEntity(fields={"postedBy", "postedAt"}, message="Sorry, it looks like you already posted something on this day!")<br> */<br>class Post<br></code></pre><p></p><p>Anyways, I think you can add a custom validation callback instead - it should help.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2976140532" id="dsq-comment-2976140532">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2976140532">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-30</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2976140532" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2976140532" class="dsq-comment-text">
	                                <p>Thank you Ryan, but I tried that already and it didn't do anything. It just passes the validation. This is what my code looks like (after removing the details and translating to the blog post example):</p><p></p><pre><code><br>...<br>/**<br> * @ORM\Entity<br> * @UniqueEntity(fields={"postedBy", "postedAt"}, message="Sorry, it looks like you already posted something on this day!")<br> */<br>class Post<br>{<br>    ...<br><br>    /**<br>     * @Assert\Date()<br>     * @ORM\Column(type="date")<br>     */<br>    private $postedAt;<br><br><br>    /**<br>     * @ORM\ManyToOne(targetEntity="AppBundle\Entity\User", inversedBy="posts")<br>     * @ORM\JoinColumn(nullable=false, onDelete="CASCADE")<br>     */<br>    private $postedBy;<br><br>    ...<br>}<br></code></pre>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2975949420" id="dsq-comment-2975949420">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2975949420">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-30</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2975949420" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2975949420" class="dsq-comment-text">
	                                <p>Yo Johan!</p><p>Well, nice digging on this :). You CAN do this, it's with the same UniqueEntity annotation. The "fields" option takes an array, so you could have:</p><p></p><pre><code><br>@UniqueEntity(fields={"email"}, message="It looks like your already have an account!")<br></code></pre><p></p><p>If you ever get in a situation where the built-in constraints are not enough, then you'll need to build a custom validation constraint (<a href="http://disq.us/url?url=http%3A%2F%2Fsymfony.com%2Fdoc%2Fcurrent%2Fvalidation%2Fcustom_constraint.html%29%3Ao_CzDZ6EjYnmxrSgvNiY266d_cI&amp;cuid=1175718" rel="nofollow noopener">http://symfony.com/doc/current...</a>. It's just a little bit of work, but works great and is needed quite rarely (we have exactly 2 in the entire KnpU codebase).</p><p>Let me know if this is what you were looking for!</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2973430296" id="dsq-comment-2973430296">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2973430296">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-28</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2973430296" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2973430296" class="dsq-comment-text">
	                                <p>I see the name of the index in the message of the exception, but not stored in its own field or something like that. I could do some regex magic but that doesn't sound like a great solution to me. What if a new MySQL version uses different error messages?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2973405995" id="dsq-comment-2973405995">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2973405995">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-28</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2973405995" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2973405995" class="dsq-comment-text">
	                                <p>I found a solution but I don't think it's very great. I noticed the exception that gets thrown is UniqueConstraintViolationException so with a try catch block I detected whether the combination of "postedBy" and "postedAt" was invalid. Then I set errors on the form and return the original view. Like this:</p><p></p><pre><code><br>            try {<br>                $em-&gt;persist($post);<br>                $em-&gt;flush();<br>            } catch(UniqueConstraintViolationException $e) {<br>                $form-&gt;get('postedAt')-&gt;addError(new FormError('You already posted something on this day!'));<br><br>                return $this-&gt;render('post/create.html.twig', ['form' =&gt; $form-&gt;createView()]);<br>            }<br></code><br></pre><p></p><p>The problem I'm having with this is that when I would add more of these constraints, I would never know which constraint was violated.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2973389611" id="dsq-comment-2973389611">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_TpYLfmqdqZ/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/13756/7661/avatar92.jpg?1477237174">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2973389611">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-28</span>
	                            <span class="dsq-commenter-name">Johan</span>
	                        </div>

	                        <div id="dsq-comment-message-2973389611" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2973389611" class="dsq-comment-text">
	                                <p>Is there a way to have a unique combination instead of just one single unique field? Example: I don't want users to post more than 1 blog post a day. I would want the combination "postedBy" and "postedAt" to be unique. That would be great :)</p><p>I can do this with Doctrine using a uniqueContraints key in the @Table annotation but this only adds this integrity check at the database layer. If I try to create a second post on one day, I just get a huge "Integrity constraint violation" exception.</p><p>Is there a way to validate this combination and give the user a helpful message instead of blowing up?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2951953469" id="dsq-comment-2951953469">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/andreydvortsevoy/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2951953469">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-15</span>
	                            <span class="dsq-commenter-name">Andrey  Dvortsevoy</span>
	                        </div>

	                        <div id="dsq-comment-message-2951953469" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2951953469" class="dsq-comment-text">
	                                <p>Thanks</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2951877582" id="dsq-comment-2951877582">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2951877582">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-15</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2951877582" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2951877582" class="dsq-comment-text">
	                                <p>Hi Andrey!</p><p>About the roles problem. In our tutorial, we have a `roles` field, which is an array. In your User class, you have a `role` field, which is a string. That's ok! It simply means that you've setup your User to have a maximum of 1 role (which is ok!). But, you will need to change your `getRoles()` method to work a little bit different :). The problem, specifically, is that your getRoles() method references `$this-&gt;roles`, but you don't have this property (so this is null). Try this instead:</p><p></p><pre><code><br>public function getRoles()<br>{<br>    $roles = array();<br><br>    // if the user has a role, add it to the array!<br>    if ($this-&gt;role) {<br>        $roles[] = $this-&gt;role;<br>    }<br><br>    // give everyone ROLE_USER!<br>    if (!in_array('ROLE_USER', $roles)) {<br>        $roles[] = 'ROLE_USER';<br>    }<br><br>    return $roles;<br>}<br></code></pre><p></p><p>Let me know if this makes sense!</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2951738230" id="dsq-comment-2951738230">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/andreydvortsevoy/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2951738230">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-15</span>
	                            <span class="dsq-commenter-name">Andrey  Dvortsevoy</span>
	                        </div>

	                        <div id="dsq-comment-message-2951738230" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2951738230" class="dsq-comment-text">
	                                <p>All works a current in base data in a floor roles there is no value<br>At addition value ROLE_ADMIN there is mistake Warning: in_array () expects parameter 2 to be array, null givenи specifies<br>Entity\User.php at line 78   -</p><p></p><pre><code><br>$roles = $this-&gt;roles;<br>        <br>// give everyone ROLE_USER!<br>if (!in_array('ROLE_USER', $roles)) {<br>    $roles[] = 'ROLE_USER';<br>}<br></code></pre>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2950052779" id="dsq-comment-2950052779">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2950052779">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-14</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2950052779" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2950052779" class="dsq-comment-text">
	                                <p>Hey Andrey,</p><p>Your class annotation looks valid, I hope you don't forget to add <code>use Doctrine\ORM\Mapping as ORM;</code> line before the class User declaration. But I don't see @UniqueEntity() annotation for this class, did you add it? I mean, what annotation are caused the error you mentioned before? And please, make sure you have an email field in the table of User class.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2949009060" id="dsq-comment-2949009060">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/andreydvortsevoy/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2949009060">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-13</span>
	                            <span class="dsq-commenter-name">Andrey  Dvortsevoy</span>
	                        </div>

	                        <div id="dsq-comment-message-2949009060" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2949009060" class="dsq-comment-text">
	                                <pre><code><br>class User implements UserInterface<br>{<br>    /**<br>     * @ORM\Id<br>     * @ORM\Column(type="integer")<br>     * @ORM\GeneratedValue(strategy="AUTO")<br>     */<br>    private $id;<br><br>    /**<br>     * @var string<br>     * @Assert\Email()<br>     * @ORM\Column(type="string", unique=true)<br>     * @Assert\NotBlank()<br>     */<br>    private $email;<br><br>    /**<br>     * @var string<br>     * @ORM\Column(type="string", length=50)<br>     * @Assert\NotBlank()<br>     */<br>    private $name;<br><br>    /**<br>     * @var string<br>     * @ORM\Column(type="string", length=50)<br>     */<br>    private $role;<br><br>    /**<br>     * @var<br>     * @Assert\Length(max="4096")<br>     * @Assert\NotBlank()<br>     */<br>    private $plainPassword;<br><br>    /**<br>     * @var string<br>     * @ORM\Column(type="string", length=64)<br>     */<br>    private $password;<br></code></pre>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2948363517" id="dsq-comment-2948363517">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2948363517">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-13</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2948363517" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2948363517" class="dsq-comment-text">
	                                <p>Hey Andrey,</p><p>Please, ensure you type exactly <code>php bin/console doctrine:schema:update --force</code>: it should be `--force`, i.e. with double dash `--`! If it doesn't help - make sure you have a proper mapping: the most common error is missing the @ORM prefix, i.e. it should be something like <code>@ORM\Column(type="string")</code> above $email property and its class uses proper namespace: <code>use Doctrine\ORM\Mapping as ORM;</code>.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2948212890" id="dsq-comment-2948212890">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/andreydvortsevoy/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2948212890">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-13</span>
	                            <span class="dsq-commenter-name">Andrey  Dvortsevoy</span>
	                        </div>

	                        <div id="dsq-comment-message-2948212890" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2948212890" class="dsq-comment-text">
	                                <p>At pressing on php bin/console doctrine:schema:update - force in a database why that automatically is not created a field email, and the field id is created a current.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2948121781" id="dsq-comment-2948121781">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2948121781">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-13</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2948121781" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2948121781" class="dsq-comment-text">
	                                <p>Hey Andrey,</p><p>Do you map $email property to the database, i.e. do you have $email property and email field in the database for the entity which you're trying to validate?</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2947136014" id="dsq-comment-2947136014">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/andreydvortsevoy/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2947136014">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-12</span>
	                            <span class="dsq-commenter-name">Andrey  Dvortsevoy</span>
	                        </div>

	                        <div id="dsq-comment-message-2947136014" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2947136014" class="dsq-comment-text">
	                                <p>To see the error as click on the check<br>The field "email" is not mapped by Doctrine, so it cannot be validated for uniqueness.<br>How to solve?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944844458" id="dsq-comment-2944844458">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_kdXXgr89l9/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944844458">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Vlad</span>
	                        </div>

	                        <div id="dsq-comment-message-2944844458" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944844458" class="dsq-comment-text">
	                                <p>Thank you, Victor, I'll have a look at that.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944839793" id="dsq-comment-2944839793">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944839793">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2944839793" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944839793" class="dsq-comment-text">
	                                <p>Ah, no, unfortunately I don't. But here's a link I found: <a href="http://disq.us/url?url=http%3A%2F%2Fsymfony.com%2Fdoc%2Fcurrent%2Fcomponents%2Ftranslation%2Fcustom_formats.html%23creating-a-custom-loader%3Ar1p2bnOaQ2J4hMCm9Cg6G1fwR50&amp;cuid=1175718" rel="nofollow noopener">http://symfony.com/doc/current...</a> . Also take a look at this test: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fsymfony%2Fsymfony%2Fblob%2Fmaster%2Fsrc%2FSymfony%2FComponent%2FTranslation%2FTests%2FLoader%2FYamlFileLoaderTest.php%3Az9M9xCLEh5LZgfE5co-GPQC4GoE&amp;cuid=1175718" rel="nofollow noopener">https://github.com/symfony/sym...</a> .</p><p>BTW, there're a few bundles which probably could help you with it:<br><a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Flexik%2FLexikTranslationBundle%3AKA9TkGLCKM8YoRNUwmLeVUXWhew&amp;cuid=1175718" rel="nofollow noopener">https://github.com/lexik/Lexik...</a><br><a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fmaschmann%2FTranslationLoaderBundle%3A9A12nQYgh9AiPuTCzjn5yQ6pKzE&amp;cuid=1175718" rel="nofollow noopener">https://github.com/maschmann/T...</a></p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944717125" id="dsq-comment-2944717125">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_kdXXgr89l9/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944717125">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Vlad</span>
	                        </div>

	                        <div id="dsq-comment-message-2944717125" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944717125" class="dsq-comment-text">
	                                <p>Thanks, Victor! Do you happen to have an example of that at hand?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944676777" id="dsq-comment-2944676777">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944676777">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2944676777" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944676777" class="dsq-comment-text">
	                                <p>You can also store translations in a database (or any other storage). In this case you should provide a custom loader implementing the LoaderInterface interface. And your loader should be defined as a service with a <a href="http://disq.us/url?url=http%3A%2F%2Fsymfony.com%2Fdoc%2Fcurrent%2Freference%2Fdic_tags.html%23dic-tags-translation-loader%3AKkq0MrF0csBSSOPL0OxLfh3K60U&amp;cuid=1175718" rel="nofollow noopener">translation.loader</a> tag. But except the custom loader, everything is the same.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944635402" id="dsq-comment-2944635402">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_kdXXgr89l9/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944635402">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Vlad</span>
	                        </div>

	                        <div id="dsq-comment-message-2944635402" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944635402" class="dsq-comment-text">
	                                <p>Hello, Victor!<br>What if I want the message to be fetched from the database?<br>Thanks and 73,</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944425465" id="dsq-comment-2944425465">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944425465">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2944425465" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944425465" class="dsq-comment-text">
	                                <p>Hey, the best way is to use translation component like here: <a href="https://disq.us/url?url=https%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fsymfony-forms%2Fchanging-validation-messages%3AVIrL94D4wZcfzTZRuGveTj3gEyo&amp;cuid=1175718" rel="nofollow noopener">https://knpuniversity.com/scre...</a> , but better to use translation message key instead, something like:</p><p></p><pre><code><br>/**<br> * @UniqueEntity(fields={"email"}, message="user.email_already_taken")<br> */<br>class User implements UserInterface<br></code></pre><p></p><p>And translate this key in validation messages:</p><p><code></code></p><pre><code>#app/Resources/translations/validators.en.yml<br>user.email_already_taken: It looks like your already have an account!<br></code></pre><p></p><p>The Form component translate this message key for you if you'll have a translation message for key.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2943084928" id="dsq-comment-2943084928">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_kdXXgr89l9/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2943084928">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-10</span>
	                            <span class="dsq-commenter-name">Vlad</span>
	                        </div>

	                        <div id="dsq-comment-message-2943084928" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2943084928" class="dsq-comment-text">
	                                <p>Hi Ryan,<br>How can I pass dynamic messages (e.g. from the database) to these annotations? Let's say I want internationalization here. Is it possible?<br>Thanks and 73,</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	        </ul>
	    </div>
            </div>

    <script type="text/javascript">
    var disqus_shortname = 'knpuniversity';
    var disqus_container_id = 'disqus_thread';var disqus_developer = 1;var disqus_identifier = 'course_video_validation-unique-entity';var disqus_url = 'https://knpuniversity.com/screencast/symfony-security/validation-unique-entity';var disqus_config = function () {};

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

                                            </div>
                    <div class="pull-left-xs pull-right-md">
                                        <a class="btn btn-success"
           href="conditional-validation-groups#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                    </div>
                    <div class="pull-left addthis-module">
                        
    <div class="addthis_toolbox addthis_default_style js-analytics-addthis-wrapper addthis_32x32_style" addthis:url="http://knpuniversity.com/screencast/symfony-security/validation-unique-entity" addthis:title="Symfony Security: Beautiful Authentication, Powerful Authorization">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer class="footer footer-styling">
    <div class="container">
        <div class="row">
                        <div class="col-xs-7 col-sm-4">
                <div class="row">
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../courses/all">All Courses</a></li>
                                                            <li><a class="knp-color-black" href="../../pricing.1">Pricing</a></li>
                                                        <li><a class="knp-color-black" href="../../faq">FAQ</a></li>
                            <li><a class="knp-color-black" href="../../training">Training</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../about">About</a></li>
                            <li><a class="knp-color-black" href="../../blog">Blog</a></li>
                            <li><a class="knp-color-black" href="../../contact">Contact Us</a></li>
                            <li>
                                <a class="knp-color-black" href="../../terms">Terms</a>
                                <span class="knp-color-black">&amp;</span>
                                <a class="knp-color-black" href="../../privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="hidden-xs col-sm-4">
                <p class="disclaimer">Symfony is a registered trademark of Fabien Potencier in the United States and/or other countries.
                This product is not endorsed or sponsored by Fabien Potencier.
                </p>
            </div>
            <div class="col-xs-5 col-sm-4">
                <div class="social-icons">
                    <a class="btn btn-social-icon btn-twitter" href="https://twitter.com/KnpUniversity">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a class="btn btn-social-icon btn-facebook" href="https://www.facebook.com/KnpLabs/">
                        <i class="fa fa-facebook"></i>
                    </a>
                    <a class="btn btn-social-icon btn-github" href="https://github.com/knpuniversity">
                        <i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
                    </div>
    </div>
</footer>

<!-- JS -->
            <script>
        Core.analyticsVideoStatsUrl = '/api/analytics/video/duration';
    </script>

            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-7062980-20']);
        _gaq.push(['_trackPageview']);
    </script>
    <script>
    
    </script>
    
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    
                <script type="text/javascript">
      (function() {
        var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
        uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/pOay2WLVabhXiEffbarO6Q.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
      })();

      UserVoice = window.UserVoice || [];
      UserVoice.push(['showTab', 'classic_widget', {
          tab_position: 'bottom-right',
          tab_label: 'Ideas or Feedback?',
          tab_color: '#005E8E'
      }]);
    </script>
        
            
        <script type="text/javascript">
    var _sf_async_config={uid:54262,domain:"knpuniversity.com",useCanonical:true};
    (function(){
      function loadChartbeat() {
        window._sf_endpt=(new Date()).getTime();
        var e = document.createElement('script');
        e.setAttribute('language', 'javascript');
        e.setAttribute('type', 'text/javascript');
        e.setAttribute('src', '//static.chartbeat.com/js/chartbeat.js');
        document.body.appendChild(e);
      }
      var oldonload = window.onload;
      window.onload = (typeof window.onload != 'function') ?
         loadChartbeat : function() { oldonload(); loadChartbeat(); };
    })();
    </script>
    
            <script>
            (function(){
                var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
            })("woopra");

            woopra.config({
                domain: 'knpuniversity.com',
                download_tracking: true,
                outgoing_tracking: true
            });

                            woopra.identify({
                    userType: 'anonymous',
                    hasSubscription: 'no'
                });
                    </script>

        <script>
            woopra.track(
            'course_view_chapter',
            {"course":"symfony-security","courseIsOwned":false,"chapter":"Validation with the UniqueEntity Constraint","chapterNumber":19,"chapterIsFree":false}
        );
    </script>

        <script>
            woopra.track();
        </script>
     
        <script type="text/javascript">
    var _qevents = _qevents || [];

    (function() {
    var elem = document.createElement('script');
    elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
    })();

    _qevents.push({
    qacct:"p-8-SEHS37bhSQ0"
    });
    </script>

    <noscript>
    <div style="display:none;">
    <img src="http://pixel.quantserve.com/pixel/p-8-SEHS37bhSQ0.gif" border="0" height="1" width="1" alt="Quantcast"/>
    </div>
    </noscript>
    


    <script type="text/javascript" src="../../assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script type="text/javascript" src="../../assets/vendor/zeroclipboard/dist/ZeroClipboard.min.js"></script>
    <script type="text/javascript" src="../../js/CodeBlocks.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/underscore.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/doctools.js"></script>

    <script>
        Core.courseTitle = 'Symfony Security: Beautiful Authentication, Powerful Authorization';
        Core.courseId = 78
        Core.courseIsOwned = false;
        Core.courseSlug = 'symfony-security';
                    Core.chapterTitle = 'Validation with the UniqueEntity Constraint';
            Core.chapterNumber = 19;
            Core.chapterIsFree = false;
            Core.chapterSlug = 'validation-unique-entity';
        
                var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.0.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };

        jQuery(document).ready(function() {
            // Stick left sidebar menu
            $('.js-sticker').sticky();

            var $scriptWrapper = $('.js-script-content-wrapper');
            var codeBlocks = new Core.CodeBlocks($scriptWrapper);

            var expandList = $('.js-expand-list');

            expandList.on('click', function(){
                var target = $(this).data('target');
                var $expandArea = $('#' + target);
                $expandArea.toggleClass('expanded');

                // http://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery
                $(document).one('click', function closeExpandList (e){
                    if($expandArea.has(e.target).length === 0){
                        $expandArea.removeClass('expanded');
                    } else {
                        $(document).one('click', closeExpandList);
                    }
                });
            });
        });
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>



    <script type="text/javascript">
    var addthis_share = {
        templates: {
            twitter: '{{title}} - {{url}} | via @KnpUniversity'
        }
    }
</script>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=weaverryan"></script>

</body>
</html>
