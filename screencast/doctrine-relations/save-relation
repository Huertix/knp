<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
            <script src="https://cdn.optimizely.com/js/421270022.js"></script>
    
                    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Saving a Relationship > Mastering Doctrine Relationships in Symfony | KnpUniversity</title>

                    <link href="../../builds/main-db6835bf19d99bcc09032789f3bd39e4.css" rel="stylesheet">

        <link href='https://fonts.googleapis.com/css?family=Rokkitt' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>
    

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/tomorrow-night.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/tomorrow-night.min.css">


        <link rel="stylesheet" href="../../builds/code_block_styles-2d783e385d9dbb1ef88d9053d1b8d675.css">



    <link href="../../builds/video-6b5fa6dfb768239b226d39d08bd4867e.css" rel="stylesheet">

                        <script src="../../bundles/fosjsrouting/js/router.js"></script>

        <script src="../../builds/main-1dfa89b76a105f9c2d98.js"></script>
        <script src="../../js/routing?callback=fos.Router.setData"></script>
            

    <script>
        // video settings
        window.video = {
            isCourseChapterPaid: false,
            courseChapterId: 34754
        };

                window.video.nextDetails = {
            'type': 'video',
            'title': 'Up Next: JoinColumn\x20\x26\x20Relations\x20in\x20Fixtures <i class="fa fa-play"></i>',
            'url': '/screencast/doctrine-relations/join-column-relation-fixtures#play'
        };
            </script>

    <script src="../../builds/video-1dfa89b76a105f9c2d98.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            var hashValue = window.location.hash.substr(1);
            if (hashValue.substr(0, 7) == 'comment') {
                // this is a #comment link - open up the comment tab!
                $('.nav-tabs a[href="#tab-comment"]').click();
            }
        });
    </script>

    <link rel="alternate" type="application/rss+xml" title="Blog feed with technical articles around PHP and screencast and tutorial updates from KnpUniversity.com" href="http://feeds.feedburner.com/knpuniversity" />

    <meta name="description" content="In the [part 1 of the Doctrine Tutorial](http://knpuniversity.com/screencast/symfony-doctrine)
we got a *sweet* setup with Doctrine: entities, queries, migrations and fixtures.

But, we left out *one* big piece: database relations. Once you&#039;ve mastered these,
you&#039;ll be unstoppable. Unfortunately, a lot of information out there make Doctrine
relations look over-complicated. Actually, they&#039;re simple and beautiful. Sure,
they have some pitfalls - but they&#039;ll also help you build a complex data structure
in no time.

* ManyToOne relationships (associations)
* The OneToMany side of a relation
* The downfall of owning versus inverse sides of a relation
* Doing magic with the ArrayCollection
* Querying with Joins

... and more - like some magic with the &quot;Param Conversion&quot;.
">

    <meta property="og:site_name" content="KnpUniversity - PHP and Symfony Video Tutorial Screencasts">
    <meta name="twitter:site" content="@KnpUniversity"><link rel="shortcut icon" href="../../assets/images/favicon.ico">
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    <meta property="og:title" content="Saving a Relationship">
<meta property="og:description" content="In the [part 1 of the Doctrine Tutorial](http://knpuniversity.com/screencast/symfony-doctrine)
we got a *sweet* setup with Doctrine: entities, queries, migrations and fixtures">
<meta property="og:url" content="http://knpuniversity.com/screencast/doctrine-relations/save-relation">
    <meta property="og:image" content="http://knpuniversity.com/imagine/course_video_poster_large/uploads/screencast/doctrine-relations:00a4bff155bef69e3d39bd9c91a18e6e37c3bbac/doctrine-relationships.png">

<meta name="twitter:card" content="summary">


                            
    </head>
<body data-user-id="" >
<nav class="navbar navbar-inverse nav-margin navbar-learning-layout">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle toggle-button collapsed" data-toggle="collapse" data-target="#js-navbar" aria-expanded="false" aria-controls="js-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../logout" class="navbar-brand">
                <span class="knp-color-blue">Knp</span>
                <span class="knp-color-white">University</span>
            </a>
        </div>
        <form class="navbar-form navbar-left navbar-form-border" role="search" method="GET" action="http://knpuniversity.com/search">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search Tutorials" value="" name="q">

                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </form>
        <div id="js-navbar" class="collapse-fix collapse navbar-right navbar-collapse">
            

<ul class="nav navbar-nav nav-narrowerOnSmall">
            <li><a href="../../checkout/subscription/team_yearly/5" title="Cart"><i class="fa fa-shopping-cart"></i></a></li>
        <li class="dropdown"><a href="save-relation#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <i class="fa fa-angle-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="../../tracks.1">Tracks</a></li>
          <li><a href="../../courses/all">All Courses</a></li>
        </ul>
    </li>
            <li><a href="../../pricing.1">Pricing</a></li>
        <li><a href="../../training">Training</a></li>
                <li class="visible-xs"><a href="../../logout">My Profile</a></li>
        <li class="visible-xs"><a href="../../logout">Sign Out</a></li>

            <li><a href="../../login.1">Log In</a></li>
        <li class="btn btn-sm btn-warning signup-btn"><a class="signup" href="../../signup/index.html">Sign Up</a></li>
    </ul>

        </div>
    </div>
</nav>


    




<div class="table-contents-container">
  <div class="container expandList" id="js-chapter-list">
      <button class="table-contents-container-button js-expand-list" data-target="js-chapter-list" title="Chapter List">
          <i class="fa fa-bars"></i>
                        3.
                            Saving a Relationship
                </button>
      <div class="expandList-body">
          <div class="expandList-bodyInner">
              <h3 class="expandList-header">
                  <a class="course-title-expand" href="resume">Mastering Doctrine Relationships in Symfony</a>
              </h3>

                                <div class="watched-tut-progress-container watched-tut-progress-container-overview">
        <div class="watched-tut-progress-overview" style="width: 0%; margin-right: 100%;" title="0% complete"><span class="profile-progress-title">0%</span></div>
    </div>


              
              <div class="expand-chapter-list">
                      
    
    <!-- Table of contents -->
    <div class="chapter-list">
        <ul class="list-unstyled">
            
                
                                <li class="title chapter-list-item ">
            <a href="create-genus-note" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                1.
                        Create Genus Note
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 5:16</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="many-to-one-relation" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                2.
                        The King of Relations: ManyToOne
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:27</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item chapter-list-item-active">
            <a href="save-relation" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                3.
                        Saving a Relationship
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:18</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="join-column-relation-fixtures" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                4.
                        JoinColumn &amp; Relations in Fixtures
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:15</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="param-conversion" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                5.
                        Controller Magic: Param Conversion
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:13</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="one-to-many" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                6.
                        OneToMany: Inverse Side of the Relation
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 5:08</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="one-to-many-order-by" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                7.
                        Order By with a OneToMany
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:41</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="array-collection-tricks" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                8.
                        Tricks with ArrayCollection
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 2:43</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="relation-query" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                9.
                        Querying on a Relationship
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:24</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="query-with-join" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                10.
                        Query across a JOIN (and Love it)
                                            </div>

                                    <div class="col-xs-3 text-right">
                        <span> 3:22</span>
                    </div>
                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


                    </ul>
    </div>

    
              </div>
          </div>
      </div>
  </div>
  <div>
                <a href="../../pricing/doctrine-relations" class="btn btn-success pull-right-md download-buy-buttons">Buy <span class="hidden-xs">Access to Course</span></a>
              </div>
</div>


        <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-9 col-lg-10">
                <h1 class="account-header account-header-low-margin-top">Saving a Relationship</h1>
                
                                    <p class="hidden-xs">
                        Course:
                        <a class="knp-color-black" href="resume"><em>Mastering Doctrine Relationships in Symfony Tutorial</em></a>                    </p>
                            </div>
        </div>

                <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="full-block-container">
                    <div class="frame-padding">
                        <div id="player">
                                                                                <div>
                                                                <div class="row">
                                    <div class="end-show">
                                        <div class="xs-col-12">
                                            <p class="end-show-header">Keep learning!</p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link"><a href="../../pricing.1" class="btn btn-success btn-md">Start your All Access Pass</a></p>
                                        </div>
                                        <div class="col-xs-12">
                                            <p class="end-show-link text-center"><a href="../buy/collections" class="knp-color-white">Buy just this tutorial for $12.00</a></p>
                                        </div>
                                    </div>
                                </div>
                                                            </div>
                                                </div>
                    </div>
                </div>
            </div>
        </div>
         
        <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="pull-right">
                                    <a class="btn btn-success"
           href="join-column-relation-fixtures#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                </div>

                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a data-toggle="tab" href="save-relation#tab-script">Script</a></li>
                    <li><a data-toggle="tab" href="save-relation#tab-comment">
                        <i class="fa fa-comment-o"></i>
                                                    
                                                                                                (21)
                                                                                        Conversation
                                            </a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="tab-script">
                        <div class="js-script-content-wrapper top-margin-script markdown-content">
                                                                                        <a href="https://github.com/knpuniversity/symfony/edit/master/knpu/ep3b-doctrine-relations/save-relation.md" target="_blank" class="btn btn-default btn-circle pull-right js-tooltip" title="Edit on GitHub"><span class="fa fa-pencil"></span></a>
                                                                    <p>Doctrine will create a <code>genus_id</code> integer column for this property and a foreign key to <code>genus</code>.</p>
<p>Use the "Code"-&gt;"Generate" menu to generate the getter and setter:</p>
<p><div class="code-block-wrapper" data-code-block-guid="55b2518795">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-95" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            95 lines <span class="meta-divider"></span> <span title="src/AppBundle/Entity/GenusNote.php">src/AppBundle/Entity/GenusNote.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-10" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 10
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusNote</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="13-84" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 13 - 84
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="85"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getGenus</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="86"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="87"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;genus;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="88"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="89"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="90"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setGenus</span><span class="hljs-params">($genus)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="91"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="92"></td>
            <td class="blob-code">        <span class="hljs-keyword">$this</span>-&gt;genus = $genus;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="93"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="94"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Add a <code>Genus</code> type-hint to <code>setGenus()</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="25bc257526">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-95" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            95 lines <span class="meta-divider"></span> <span title="src/AppBundle/Entity/GenusNote.php">src/AppBundle/Entity/GenusNote.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-10" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 10
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusNote</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="13-89" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 13 - 89
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="90"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setGenus</span><span class="hljs-params">(Genus $genus)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="91"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="92"></td>
            <td class="blob-code">        <span class="hljs-keyword">$this</span>-&gt;genus = $genus;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="93"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="94"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Yes, when we call <code>setGenus()</code>, we'll pass it an entire <code>Genus</code> <em>object</em> not an ID.
More on that soon.</p>
<h2 id="generate-the-migration">Generate the Migration <a class="headerlink" href="save-relation#generate-the-migration" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Generate the migration for the change:</p>
<pre><code class="language-bash"><div class="line">./bin/console doctrine:migrations:diff</div></code></pre>
<p>And then go check it out... Wow - look at this!</p>
<p><div class="code-block-wrapper" data-code-block-guid="8eb3e76abe">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-33" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            33 lines <span class="meta-divider"></span> <span title="app/DoctrineMigrations/Version20160207091756.php">app/DoctrineMigrations/Version20160207091756.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-10" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 10
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Version20160207091756</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractMigration</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">up</span><span class="hljs-params">(Schema $schema)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="15-17" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 15 - 17
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="18"></td>
            <td class="blob-code">        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">"ALTER TABLE genus_note ADD genus_id INT DEFAULT NULL"</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">"ALTER TABLE genus_note ADD CONSTRAINT FK_6478FCEC85C4074C FOREIGN KEY (genus_id) REFERENCES genus (id)"</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="20"></td>
            <td class="blob-code">        <span class="hljs-keyword">$this</span>-&gt;addSql(<span class="hljs-string">"CREATE INDEX IDX_6478FCEC85C4074C ON genus_note (genus_id)"</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="21"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="22-31" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 22 - 31
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="32"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Even though we called the property <code>genus</code>, it sets up the database <em>exactly</em> how
you would have normally: with a <code>genus_id</code> integer column and a foreign key. And
we did this with basically 2 lines of code.</p>
<p>Run the migration to celebrate!</p>
<pre><code class="language-bash"><div class="line">./bin/console doctrine:migrations:migrate</div></code></pre>
<p>Now, how do we actually <em>save</em> this relationship?</p>
<h2 id="saving-a-relation">Saving a Relation <a class="headerlink" href="save-relation#saving-a-relation" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Head back to <code>GenusController</code>. In <code>newAction()</code>, create a new <code>GenusNote</code> - let's
see <em>how</em> we can relate this to a <code>Genus</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="87fbaafb75">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-109" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            109 lines <span class="meta-divider"></span> <span title="src/AppBundle/Controller/GenusController.php">src/AppBundle/Controller/GenusController.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-12" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 12
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="15-17" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 15 - 17
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="18"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newAction</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="20"></td>
            <td class="blob-code">        $genus = <span class="hljs-keyword">new</span> Genus();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="21"></td>
            <td class="blob-code">        $genus-&gt;setName(<span class="hljs-string">'Octopus'</span>.rand(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>));</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code">        $genus-&gt;setSubFamily(<span class="hljs-string">'Octopodinae'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">        $genus-&gt;setSpeciesCount(rand(<span class="hljs-number">100</span>, <span class="hljs-number">99999</span>));</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">        $note = <span class="hljs-keyword">new</span> GenusNote();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="26-37" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 26 - 37
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="38"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="39-107" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 39 - 107
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="108"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>I'll paste in some code here to set each of the normal properties - they're <em>all</em>
required in the database right now:</p>
<p><div class="code-block-wrapper" data-code-block-guid="0608467d0c">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-109" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            109 lines <span class="meta-divider"></span> <span title="src/AppBundle/Controller/GenusController.php">src/AppBundle/Controller/GenusController.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-24" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 24
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">        $note = <span class="hljs-keyword">new</span> GenusNote();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="26"></td>
            <td class="blob-code">        $note-&gt;setUsername(<span class="hljs-string">'AquaWeaver'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="27"></td>
            <td class="blob-code">        $note-&gt;setUserAvatarFilename(<span class="hljs-string">'ryan.jpeg'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="28"></td>
            <td class="blob-code">        $note-&gt;setNote(<span class="hljs-string">'I counted 8 legs... as they wrapped around me'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="29"></td>
            <td class="blob-code">        $note-&gt;setCreatedAt(<span class="hljs-keyword">new</span> \DateTime(<span class="hljs-string">'-1 month'</span>));</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="30-109" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 30 - 109
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>So how can we link <em>this</em> <code>GenusNote</code> to this <code>Genus</code>? Simple: <code>$note-&gt;setGenus()</code>
and pass it the entire <code>$genus</code> object:</p>
<p><div class="code-block-wrapper" data-code-block-guid="f3f17b5925">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-109" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            109 lines <span class="meta-divider"></span> <span title="src/AppBundle/Controller/GenusController.php">src/AppBundle/Controller/GenusController.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-24" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 24
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">        $note = <span class="hljs-keyword">new</span> GenusNote();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="26"></td>
            <td class="blob-code">        $note-&gt;setUsername(<span class="hljs-string">'AquaWeaver'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="27"></td>
            <td class="blob-code">        $note-&gt;setUserAvatarFilename(<span class="hljs-string">'ryan.jpeg'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="28"></td>
            <td class="blob-code">        $note-&gt;setNote(<span class="hljs-string">'I counted 8 legs... as they wrapped around me'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="29"></td>
            <td class="blob-code">        $note-&gt;setCreatedAt(<span class="hljs-keyword">new</span> \DateTime(<span class="hljs-string">'-1 month'</span>));</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="30"></td>
            <td class="blob-code">        $note-&gt;setGenus($genus);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="31-109" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 31 - 109
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>That's it. Seriously! The only tricky part is that you set the entire <em>object</em>, not
the ID. With Doctrine relations, you almost need to forget about ID's entirely: your
job is to link one object to another. When you save, Doctrine works out the details
of how this should look in the database.</p>
<p>Don't forget to persist the <code>$note</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="800117e8d5">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-109" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            109 lines <span class="meta-divider"></span> <span title="src/AppBundle/Controller/GenusController.php">src/AppBundle/Controller/GenusController.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-12" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 12
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenusController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="15-17" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 15 - 17
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="18"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newAction</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="20-32" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 20 - 32
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="33"></td>
            <td class="blob-code">        $em-&gt;persist($genus);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="34"></td>
            <td class="blob-code">        $em-&gt;persist($note);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="35"></td>
            <td class="blob-code">        $em-&gt;flush();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="36-37" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 36 - 37
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="38"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="39-107" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 39 - 107
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="108"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>And, you can persist in <em>any</em> order: Doctrine automatically knows that it needs to insert
the <code>genus</code> first and then the <code>genus_note</code>. That's really powerful.</p>
<h2 id="defaulting-the-ispublished-field">Defaulting the isPublished Field <a class="headerlink" href="save-relation#defaulting-the-ispublished-field" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>And simple! Head to the browser to check it out - <code>/genus/new</code>. Whoops - an error:
the <code>is_published</code> property cannot be null. My bad - that's totally unrelated.</p>
<p>In <code>Genus</code>, give the <code>$isPublished</code> field a default value of <code>true</code>:</p>
<p><div class="code-block-wrapper" data-code-block-guid="9781a1ad33">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-95" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            95 lines <span class="meta-divider"></span> <span title="src/AppBundle/Entity/Genus.php">src/AppBundle/Entity/Genus.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-10" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 10
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Genus</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="13-39" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 13 - 39
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="40"></td>
            <td class="blob-code">    <span class="hljs-comment">/**</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="41"></td>
            <td class="blob-code">     * <span class="hljs-doctag">@ORM</span>\Column(type="boolean")</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="42"></td>
            <td class="blob-code">     */</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="43"></td>
            <td class="blob-code">    <span class="hljs-keyword">private</span> $isPublished = <span class="hljs-keyword">true</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="44-93" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 44 - 93
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="94"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Now, if you forget to set this field - it'll default to <code>true</code> instead of <code>null</code>.</p>
<p>Woo! No errors this time. Check out the queries for the page. Nice! Two insert queries:
<code>INSERT INTO genus</code> and then <code>INSERT INTO genus_note</code> using 46: the new genus's ID.</p>
<p>With two lines to setup the relationship, and one line to link a <code>GenusNote</code> to a
<code>Genus</code>, you've got a fantastic new relationship.</p>

    
                        </div>
                    </div>
                    <div class="tab-pane" id="tab-comment">
                        <h3>Leave a comment!</h3>
                                                        <div id="disqus_thread">
                <style type="text/css">
            #dsq-comments {padding: 10px 0 0}
            .dsq-comment {position: relative;clear: both;margin: 0 0 1.5em;}
            .dsq-avatar {left: 0;position: absolute;}
            .dsq-avatar img {border: 0 none;border-radius: 3px;height: 36px;width: 36px;}
            .dsq-comment-body {padding: 0 0 0 46px;}
            .dsq-comment-header {border: 1px solid rgba(0, 0, 0, 0.15);border-radius: 3px;font-size: 13px;line-height: 14px;margin: 0 0 1em;max-height: 36px;overflow: hidden;padding: 10px;position: relative;text-overflow: ellipsis;white-space: nowrap;}
            .dsq-comment-message {word-wrap: break-word;}
            .dsq-comment-message {line-height: 1.5em;margin: 0 0 1em;}
            .dsq-comment-text {display: inline;}
            .dsq-comment-date {float: right;font-size: 90%;margin: 0 12px 0 0;}
        </style>

	    <div id="dsq-content">
	        <ul id="dsq-comments">
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2971163703" id="dsq-comment-2971163703">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2971163703">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-27</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2971163703" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2971163703" class="dsq-comment-text">
	                                <p>Hey Max!</p><p>Another cool question :). So Doctrine uses prepared statements to make the queries (which everyone should do, no matter what libs you're using, as it prevents SQL injection attacks). This means that Doctrine itself never actually makes the full query string - it literally creates this query string with ? and sends that, along with an array of parameters as the "query". What you're seeing here is a representation of that. Of course, it's kind of annoying if you want to copy these queries and manually run them to help debug, so that's why we also have the "View runnable query" link.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2971039407" id="dsq-comment-2971039407">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_gQPoYRRcKl/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2971039407">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-27</span>
	                            <span class="dsq-commenter-name">Max</span>
	                        </div>

	                        <div id="dsq-comment-message-2971039407" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2971039407" class="dsq-comment-text">
	                                <p>Hey Ryan,<br>I was wondering why the debugger shows a SQL Statement, with VALUES (?, ?, ?, ...). I guess the parameters replace the question marks at some point but why not simply put the parameters in there directly?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2873099928" id="dsq-comment-2873099928">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_JCtZflEB6H/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/21962/5304/avatar92.jpg?1472831156">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2873099928">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-09-02</span>
	                            <span class="dsq-commenter-name">Paolo Piazza</span>
	                        </div>

	                        <div id="dsq-comment-message-2873099928" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2873099928" class="dsq-comment-text">
	                                <p>Hi <a data-dsq-mention="weaverryan:disqus" href="https://disqus.com/by/weaverryan/" rel="nofollow noopener">weaverryan</a>, thank you very much for your kind reply!<br>Take care!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2858885223" id="dsq-comment-2858885223">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2858885223">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-08-25</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2858885223" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2858885223" class="dsq-comment-text">
	                                <p>Hey @Paolo!</p><p>Cool question! And yes! This is done with the JoinColumn: <a href="https://disq.us/url?url=https%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fdoctrine-relations%2Fjoin-column-relation-fixtures%3AtJrvSTQiGooDqfPfrUy6afNgFGk&amp;cuid=1175718" rel="nofollow noopener">https://knpuniversity.com/scre...</a>, specifically the onDelete setting. I usually let it stay as RESTRICT, until I know that I definitely want CASCADE (since that's inherently a little more dangerous). As far as I know, there is no onUpdate control, which might be on purpose, as you should really never have a reason to update the id of a row in a table.</p><p>Oh, and obviously, after you add the onDelete, don't forget to generate a migration to actually tweak things in the table!</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2857111031" id="dsq-comment-2857111031">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_JCtZflEB6H/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/21962/5304/avatar92.jpg?1472831156">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2857111031">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-08-24</span>
	                            <span class="dsq-commenter-name">Paolo Piazza</span>
	                        </div>

	                        <div id="dsq-comment-message-2857111031" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2857111031" class="dsq-comment-text">
	                                <p>Hi @weaverryan ,</p><p>thanks very much for your nice tutorials, they are really helping me a lot!<br>I've got a quick question for you; so, ok, I've created and saved the relationship as in your example, but when examining the relations for the genus_note table via phpmyadmin, I've notice that for the genus_id field I have ON DELETE RESTRICT and ON UPDATE RESTRICT.</p><p>How is it possible to set up this relationship in such a manner to have, for instance, ON DELETE SET NULL and ON UPDATE CASCADE?</p><p>Thanks!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2832359247" id="dsq-comment-2832359247">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2832359247">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-08-11</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2832359247" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2832359247" class="dsq-comment-text">
	                                <p>Hey Zoé!</p><p>You're right! The code doesn't match up with the video variable name :). I've just fixed this (<a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fknpuniversity%2Fsymfony%2Fcommit%2F4d10a16dff0de34ed75ee6e43ce05f83e5665af5%29%3AZ5Fxa2B8A6_XF84OvpMb80gjylc&amp;cuid=1175718" rel="nofollow noopener">https://github.com/knpuniversi...</a> and it should be up shortly.</p><p>Thanks!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2831795095" id="dsq-comment-2831795095">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/zobelleton/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/21306/2072/avatar92.jpg?1472144793">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2831795095">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-08-11</span>
	                            <span class="dsq-commenter-name">Zoé Belleton</span>
	                        </div>

	                        <div id="dsq-comment-message-2831795095" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2831795095" class="dsq-comment-text">
	                                <p>In the Script code there is an error ( it's $genusNote-&gt;setSomething not $note )</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2810663253" id="dsq-comment-2810663253">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2810663253">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-29</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2810663253" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2810663253" class="dsq-comment-text">
	                                <p>Hey Nate!</p><p>This is probably just a small mapping thing. The PHP code in GenusNote should look identical to mine and so will all the rest of the code (controller, form, etc). I think you already know that - but just for others :).</p><p>For the YAML-equivalent of the annotations, check out the first code-block here: <a href="http://disq.us/url?url=http%3A%2F%2Fsymfony.com%2Fdoc%2Fcurrent%2Fdoctrine%2Fassociations.html%23relationship-mapping-metadata%3AOay4q7LO3t4wYnyJKSlSVtxhpuM&amp;cuid=1175718" rel="nofollow noopener">http://symfony.com/doc/current...</a>. there's a YAML tab: you can use that to compare YAML with annotations. As you can see, the genus property should *not* be under the "fields" key, like normal properties/columns.</p><p>One quick word of warning with YAML: for various reasons, the Doctrine core team will remove YAML support from Doctrine version 3. So, unfortunately, YAML is not a great long-term plan (however, Doctrine already has tools to convert to different formats, like XML or annotations).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2810411199" id="dsq-comment-2810411199">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/nathanielkolenberg/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/6637/7775/avatar92.jpg?1469806477">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2810411199">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-29</span>
	                            <span class="dsq-commenter-name">Nathaniel Kolenberg</span>
	                        </div>

	                        <div id="dsq-comment-message-2810411199" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2810411199" class="dsq-comment-text">
	                                <p>Hi <a data-dsq-mention="weaverryan:disqus" href="https://disqus.com/by/weaverryan/" rel="nofollow noopener">weaverryan</a>,</p><p>Thanks for the great tutorial! I've followed along but tried a slightly different route, by creating the entities via doctrine using ```bin/console doctrine:generate:entity``` and choosing yml as the mapping format. This basically worked the same up until now when we're trying to save the relationships.</p><p>The problem that I'm having is that in this way, I need to map all the GenusNote entity's properties via GenusNote.orm.yml. Specifically, I need to define a type for the genus property on the GenusNote entity, but no matter what type I choose, I keep getting either that genus can't be converted to the type I choose or that the data for column genus in the database is too long.</p><p>Could you give me any advice on this? Should I just start over with the entities and follow your directions?</p><p>Thanks in advance!</p><p>N8</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2808640241" id="dsq-comment-2808640241">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/artjanvanhorssen/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2808640241">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-28</span>
	                            <span class="dsq-commenter-name">Artjan van Horssen</span>
	                        </div>

	                        <div id="dsq-comment-message-2808640241" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2808640241" class="dsq-comment-text">
	                                <p>Hi Ryan.</p><p>Thanx for the quick response and the good explanation about the relationships. Everything works fine now!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2808517695" id="dsq-comment-2808517695">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2808517695">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-28</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2808517695" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2808517695" class="dsq-comment-text">
	                                <p>Hi Artjan!</p><p>Actually, this is expected! For a detailed explanation, check out our Symfony2 tutorial, which talks about OneToMany relationships: <a href="http://disq.us/url?url=http%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fsymfony2-ep3%2Fdoctrine-inverse-relation%3Amk90gbZEaDurOeuWaLPSQzHCH7s&amp;cuid=1175718" rel="nofollow noopener">http://knpuniversity.com/scree...</a></p><p>Basically, when you create a ManyToOne relation, this will cause the foreign key column to be added to the database (e.g. genus_id). But, when you add a OneToMany relation, this is *not* a new relationship: it's the *same* relationship seen from the opposite direction. In other words, you can say that "many GenusNote have one Genus" (ManyToOne) or you can say "one Genus has many GenusNotes" (OneToMany). So when you map the OneToMany, there is no change to the database: you're simply adding a convenience layer on Doctrine so that it's easier to use your relationship (e.g. you can now say $genus-&gt;getNotes() and it will query for all the related GenusNote objects).</p><p>Let me know if this makes sense! Understanding the "owning" versus "inverse" side of a relation is quite difficult. We're planning on making a Doctrine relations tutorial that will talk about this and ManyToMany relationships.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2808283773" id="dsq-comment-2808283773">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/artjanvanhorssen/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2808283773">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-07-28</span>
	                            <span class="dsq-commenter-name">Artjan van Horssen</span>
	                        </div>

	                        <div id="dsq-comment-message-2808283773" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2808283773" class="dsq-comment-text">
	                                <p>Hi Ryan,<br>Thanx voor de great and easy to follow tutorials!</p><p>I have a little weird thing with the migrations. When i run ./bin/console doctrine:migrations:diff i get the message that a mappedBy attribute is needed. When adding this "@ORM\OneToMany(targetEntity="Genus", mappedBy="genus_note")" and run again; i get the message that there are no changes detected. Unfortunately i can't run the migrate because there is no new file.</p><p>Any suggestion what's wrong?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2743409626" id="dsq-comment-2743409626">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2743409626">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-21</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2743409626" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2743409626" class="dsq-comment-text">
	                                <p>Hey <a data-dsq-mention="jlchafardet:disqus" href="https://disqus.com/by/JLChafardet/" rel="nofollow noopener">JLChafardet</a>!</p><p>Ok cool! It sounds to me like you have the following relationships (just looking at the owning sides):</p><p>1) Operation is ManyToOne to OperationType (so it will have an operation_type_id).<br>This means that each Operation will have *one* OperationType. And if you looked in the database, you'll find that one OperationType may be assigned to many Operations.</p><p>2)  Transaction is ManyToOne to Operation (so it will have an operation_id)<br>This means that each Transaction will have *one* Operation. And if you looked in the database, you'll find that one Operation may be assigned to (own) many Transactions.</p><p>So you asked basically "how do I get a Transaction from an OperationType?". But the better question is, "Howe can I find *all* Transactions for an OperationType". This is because 1 OperationType will potentially have many Operations, and each Operation will potentially have many Transactions.</p><p>The answer is to map the inverse - OneToMany side of both relationships. Specifically, you would:</p><p>A) Add an operations property to OperationType that is a OneToMany relation to Operation.<br>B) Add a transactions property to Operation that is a OneToMany relation to Transaction.</p><p>Then, you could have code like this:</p><p></p><pre><code><br>$operationType = // some way to get a single OperationType<br>$allOperations = $operationType-&gt;getOperations(); // use the OneToMany relationship property<br><br>$allTransactions =[];<br>foreach ($allOperations as $operation) {<br>    $allTransactions = array_merge(<br>        $operation-&gt;getTransactions(), // use the OneToMany relationship property<br>        $allTransactions<br>    );<br>}<br></code></pre><p></p><p>This would give you a giant array. You could also create a query in the database to do this directly. We have some details about those types of queries here: <a href="http://disq.us/url?url=http%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fdoctrine-queries%2Fjoins%3A_8v1CgnYDWhQqdLULv5QnZFWEvE&amp;cuid=1175718" rel="nofollow noopener">http://knpuniversity.com/scree...</a></p><p>Good lucks! This stuff is the hardest part of Doctrine in my opinion: trying to keep your head straight about all the different directions for each relationship. Always think back to how you want it to look in the database. Wherever you have the foreign key column (e.g. operation_type_id) will be the entity that should have the ManyToOne side of the relationship.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2738135393" id="dsq-comment-2738135393">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/JLChafardet/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/239/4757/avatar92.jpg?1465781626">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2738135393">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-18</span>
	                            <span class="dsq-commenter-name">JLChafardet</span>
	                        </div>

	                        <div id="dsq-comment-message-2738135393" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2738135393" class="dsq-comment-text">
	                                <p>well TableA is the one with relationships to both TableAType and <br>TableB, TableAType shouldnt have any way to get to TableB without going <br>through TableA</p><p>see it this way, a bit more natural</p><p>operation (TableA)<br>OperationType(TableAType)<br>Transaction(TableB)</p><p>Each Operation has an operation Type (but the owner should be Operation not OperationType)<br>each Operation can have MANY transaction, but each Transaction can belong to a single operation.</p><p>so in this spirit, to get a Transaction from an Operation Type, it would have to go through Operation first, as there is no relation at all other than the OperationId on the Transaction ?</p><p>hmmm I'm starting to see a way to "join" these 2 columns.(gota learn more on doctrine joins tho.)</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2737641204" id="dsq-comment-2737641204">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2737641204">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-18</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2737641204" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2737641204" class="dsq-comment-text">
	                                <p>Yo <a data-dsq-mention="jlchafardet:disqus" href="https://disqus.com/by/JLChafardet/" rel="nofollow noopener">JLChafardet</a>!</p><p>First, you described all the relationships perfectly - so nice job - your pretend setup is very clear. But I'm not completely clear on the question - but let me take a shot.</p><p>First, with OneToOne relationships, you can choose which side is the "owning" side and which side is the "inverse" side. Make the "owning" side which ever side of the relationship you will more likely want to set.</p><p>Suppose you have a `$tableA` object, then you can do things like this:</p><p></p><pre><code><br>// this assume you've called your property tableAtType inside TableA (and made a corresponding getter function for it)<br>// depending on your setup, this may be the inverse side of your relationship. If you want to do something like this,<br>// then you *must* map the inverse side<br>echo $tableA-&gt;getTableAType()-&gt;getName(); // print some make-believe getName() method<br><br>// this assumes you have mapped the *inverse* (optional), OneToMany relationship in TableAType to TableB on a property called tableBs, with a corresponding getter function.<br>$tableBs = $tableA-&gt;getTableAType()-&gt;getTableBs();<br>foreach ($tableBs as $tableB) {<br><br>}<br></code></pre><p></p><p>I hope that helps a bit!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2735083067" id="dsq-comment-2735083067">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/JLChafardet/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/239/4757/avatar92.jpg?1465781626">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2735083067">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-16</span>
	                            <span class="dsq-commenter-name">JLChafardet</span>
	                        </div>

	                        <div id="dsq-comment-message-2735083067" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2735083067" class="dsq-comment-text">
	                                <p><a data-dsq-mention="weaverryan:disqus" href="https://disqus.com/by/weaverryan/" rel="nofollow noopener">weaverryan</a></p><p>a question here on relationships.</p><p>lets assume the following scenario.</p><p>I have a relationship between a couple of tables</p><p>TableA and TableA-type in a 1-1 relationship (too many TableA-types to really repeat them over and over in the db)</p><p>and TableA at the same time is on a 1 - n relationship with TableB, <br>where Many TableB records belong to a single TableA record.</p><p>how would I do, to get the information from TableA  and get me its TableA-type and its TableB childrens?</p><p>the inverse view isnt a bad idea to have, but for the time beign i can live without it.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2681244596" id="dsq-comment-2681244596">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/kostaandonovski/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/20682/4070/avatar92.jpg?1481681865">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2681244596">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-18</span>
	                            <span class="dsq-commenter-name">Kosta Andonovski</span>
	                        </div>

	                        <div id="dsq-comment-message-2681244596" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2681244596" class="dsq-comment-text">
	                                <p>hey brother I figured it out over the weekend. Thanks so much for the reply though awesome work man awesome.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2681235617" id="dsq-comment-2681235617">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2681235617">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-18</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2681235617" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2681235617" class="dsq-comment-text">
	                                <p>Hi Kosta!</p><p>No matter what, if you want to link a GenusNote to its Genus, you will do it via `$genusNote-&gt;setGenus($genus)`. If you imagine an endpoint that the user can submit to in order to create a new GenusNote, it might look like this:</p><p></p><pre><code><br>/**<br> * @Route("/genus/{id}/notes")<br> */<br>public function newNoteAction(Genus $genus, Request $request)<br>{<br>    // Symfony queries for the Genus object automatically<br>    $genusNote = new GenusNote();<br>    // populate this object with data from the request, probably<br>    // with a Form<br><br>    $genusNote-&gt;setGenus($genus);<br>    // get the entity manager, persist($genusNote), flush() and redirect<br>}<br></code></pre><p></p><p>So ultimately, you just need to get a Genus object. You might create this (like we did in this chapter). Or more likely, you will query for the Genus object and then set it on the GenusNote.</p><p>Let me know if this helps!</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2674846858" id="dsq-comment-2674846858">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/kostaandonovski/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/20682/4070/avatar92.jpg?1481681865">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2674846858">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-14</span>
	                            <span class="dsq-commenter-name">Kosta Andonovski</span>
	                        </div>

	                        <div id="dsq-comment-message-2674846858" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2674846858" class="dsq-comment-text">
	                                <p>Hello again Ryan, what if I didn't want to make a genusnote everytime I made a genus. so lets say the note is added at a later time. How would you link the correct $user then?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2595333721" id="dsq-comment-2595333721">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2595333721">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-03-29</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2595333721" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2595333721" class="dsq-comment-text">
	                                <p>Hi Ziad!</p><p>Ah, that makes things a bit more complex :). I'm sure you're aware, but OpenSky was the company that famously setup their Doctrine to do types of things like this. There are some resources out there (<a href="http://disq.us/url?url=http%3A%2F%2Fdoctrine-orm.readthedocs.org%2Fprojects%2Fdoctrine-mongodb-odm%2Fen%2Flatest%2Fcookbook%2Fblending-orm-and-mongodb-odm.html%3AWl6zlmmUEdaKyntzQ-f5l7_7rQU&amp;cuid=1175718" rel="nofollow noopener">http://doctrine-orm.readthedoc...</a>, <a href="http://disq.us/url?url=http%3A%2F%2Fwww.slideshare.net%2Fspf13%2Fhybrid-mongodb-and-rdbms-applications%29%3AsE_ZaFPVfIrmSJ3X0o-GZFaZCQE&amp;cuid=1175718" rel="nofollow noopener">http://www.slideshare.net/spf1...</a>, but I've never done it myself. I would certainly see if you can hook this up like the cookbook article. BUT, if that gives you any trouble, personally, I would go a very old-fashioned route: do *not* map relationships between the ORM and ODM. Instead, I would map the id's only (e.g. I would have a GenusNote.genusId normal column, and it would contain the mongo ID of the related Genus object). It would be *your* job to manually query for the Genus whenever you needed it (of course, you'd have some service functions to make this easy and not repeat yourself). This is much less convenient, but way more predictable. You *would* need to also control the order that things are persisted. And yes, you *could* also add a listener - I think on postLoad - and use it to automatically use the genusId value to query for the Genus object from Mongo, for example. You just need to weigh if that's worth it, since you may not always need this object.</p><p>That's a long way of saying that I don't have personal experience here. So if you can follow the cookbook and have good success, then awesome! Otherwise, treat these like two unrelated data stores (imagine storing some things in Redis and other things in MySQL - we probably wouldn't try to hook up some fancy relation system).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2591642609" id="dsq-comment-2591642609">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/ZiadJammal/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/9139/5758/avatar92.jpg?1390203166">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2591642609">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-03-27</span>
	                            <span class="dsq-commenter-name">Ziad Jammal</span>
	                        </div>

	                        <div id="dsq-comment-message-2591642609" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2591642609" class="dsq-comment-text">
	                                <p>Hi Ryan,<br>Thank you for the great tutorial.<br>Assuming that the Genus object and the GenusNote Object are both persisted in different databases. One in  MySQL and one in Mongo.<br>At which level do you you control how the GenusNote document should be persisted (key and value structure). Would you do that in a doctrine listener such as pre-persist? and upon fetching the relation, at what stage would you convert the document to an object?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	        </ul>
	    </div>
            </div>

    <script type="text/javascript">
    var disqus_shortname = 'knpuniversity';
    var disqus_container_id = 'disqus_thread';var disqus_developer = 1;var disqus_identifier = 'course_video_save-relation';var disqus_url = 'https://knpuniversity.com/screencast/doctrine-relations/save-relation';var disqus_config = function () {};

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

                                            </div>
                    <div class="pull-left-xs pull-right-md">
                                        <a class="btn btn-success"
           href="join-column-relation-fixtures#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                    </div>
                    <div class="pull-left addthis-module">
                        
    <div class="addthis_toolbox addthis_default_style js-analytics-addthis-wrapper addthis_32x32_style" addthis:url="http://knpuniversity.com/screencast/doctrine-relations/save-relation" addthis:title="Mastering Doctrine Relationships in Symfony">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer class="footer footer-styling">
    <div class="container">
        <div class="row">
                        <div class="col-xs-7 col-sm-4">
                <div class="row">
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../courses/all">All Courses</a></li>
                                                            <li><a class="knp-color-black" href="../../pricing.1">Pricing</a></li>
                                                        <li><a class="knp-color-black" href="../../faq">FAQ</a></li>
                            <li><a class="knp-color-black" href="../../training">Training</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../about">About</a></li>
                            <li><a class="knp-color-black" href="../../blog">Blog</a></li>
                            <li><a class="knp-color-black" href="../../contact">Contact Us</a></li>
                            <li>
                                <a class="knp-color-black" href="../../terms">Terms</a>
                                <span class="knp-color-black">&amp;</span>
                                <a class="knp-color-black" href="../../privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="hidden-xs col-sm-4">
                <p class="disclaimer">Symfony is a registered trademark of Fabien Potencier in the United States and/or other countries.
                This product is not endorsed or sponsored by Fabien Potencier.
                </p>
            </div>
            <div class="col-xs-5 col-sm-4">
                <div class="social-icons">
                    <a class="btn btn-social-icon btn-twitter" href="https://twitter.com/KnpUniversity">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a class="btn btn-social-icon btn-facebook" href="https://www.facebook.com/KnpLabs/">
                        <i class="fa fa-facebook"></i>
                    </a>
                    <a class="btn btn-social-icon btn-github" href="https://github.com/knpuniversity">
                        <i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
                    </div>
    </div>
</footer>

<!-- JS -->
            <script>
        Core.analyticsVideoStatsUrl = '/api/analytics/video/duration';
    </script>

            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-7062980-20']);
        _gaq.push(['_trackPageview']);
    </script>
    <script>
    
    </script>
    
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    
                <script type="text/javascript">
      (function() {
        var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
        uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/pOay2WLVabhXiEffbarO6Q.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
      })();

      UserVoice = window.UserVoice || [];
      UserVoice.push(['showTab', 'classic_widget', {
          tab_position: 'bottom-right',
          tab_label: 'Ideas or Feedback?',
          tab_color: '#005E8E'
      }]);
    </script>
        
            
        <script type="text/javascript">
    var _sf_async_config={uid:54262,domain:"knpuniversity.com",useCanonical:true};
    (function(){
      function loadChartbeat() {
        window._sf_endpt=(new Date()).getTime();
        var e = document.createElement('script');
        e.setAttribute('language', 'javascript');
        e.setAttribute('type', 'text/javascript');
        e.setAttribute('src', '//static.chartbeat.com/js/chartbeat.js');
        document.body.appendChild(e);
      }
      var oldonload = window.onload;
      window.onload = (typeof window.onload != 'function') ?
         loadChartbeat : function() { oldonload(); loadChartbeat(); };
    })();
    </script>
    
            <script>
            (function(){
                var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
            })("woopra");

            woopra.config({
                domain: 'knpuniversity.com',
                download_tracking: true,
                outgoing_tracking: true
            });

                            woopra.identify({
                    userType: 'anonymous',
                    hasSubscription: 'no'
                });
                    </script>

        <script>
            woopra.track(
            'course_view_chapter',
            {"course":"doctrine-relations","courseIsOwned":false,"chapter":"Saving a Relationship","chapterNumber":3,"chapterIsFree":false}
        );
    </script>

        <script>
            woopra.track();
        </script>
     
        <script type="text/javascript">
    var _qevents = _qevents || [];

    (function() {
    var elem = document.createElement('script');
    elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
    })();

    _qevents.push({
    qacct:"p-8-SEHS37bhSQ0"
    });
    </script>

    <noscript>
    <div style="display:none;">
    <img src="http://pixel.quantserve.com/pixel/p-8-SEHS37bhSQ0.gif" border="0" height="1" width="1" alt="Quantcast"/>
    </div>
    </noscript>
    


    <script type="text/javascript" src="../../assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script type="text/javascript" src="../../assets/vendor/zeroclipboard/dist/ZeroClipboard.min.js"></script>
    <script type="text/javascript" src="../../js/CodeBlocks.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/underscore.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/doctools.js"></script>

    <script>
        Core.courseTitle = 'Mastering Doctrine Relationships in Symfony';
        Core.courseId = 81
        Core.courseIsOwned = false;
        Core.courseSlug = 'doctrine-relations';
                    Core.chapterTitle = 'Saving a Relationship';
            Core.chapterNumber = 3;
            Core.chapterIsFree = false;
            Core.chapterSlug = 'save-relation';
        
                var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.0.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };

        jQuery(document).ready(function() {
            // Stick left sidebar menu
            $('.js-sticker').sticky();

            var $scriptWrapper = $('.js-script-content-wrapper');
            var codeBlocks = new Core.CodeBlocks($scriptWrapper);

            var expandList = $('.js-expand-list');

            expandList.on('click', function(){
                var target = $(this).data('target');
                var $expandArea = $('#' + target);
                $expandArea.toggleClass('expanded');

                // http://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery
                $(document).one('click', function closeExpandList (e){
                    if($expandArea.has(e.target).length === 0){
                        $expandArea.removeClass('expanded');
                    } else {
                        $(document).one('click', closeExpandList);
                    }
                });
            });
        });
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>



    <script type="text/javascript">
    var addthis_share = {
        templates: {
            twitter: '{{title}} - {{url}} | via @KnpUniversity'
        }
    }
</script>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=weaverryan"></script>

</body>
</html>
