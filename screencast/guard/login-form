<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
            <script src="https://cdn.optimizely.com/js/421270022.js"></script>
    
                    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>How to Create a Login Form > KnpUGuard: Symfony Authentication with a Smile | KnpUniversity</title>

                    <link href="../../builds/main-db6835bf19d99bcc09032789f3bd39e4.css" rel="stylesheet">

        <link href='https://fonts.googleapis.com/css?family=Rokkitt' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>
    

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/tomorrow-night.min.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/tomorrow-night.min.css">


        <link rel="stylesheet" href="../../builds/code_block_styles-2d783e385d9dbb1ef88d9053d1b8d675.css">



    <link href="../../builds/video-6b5fa6dfb768239b226d39d08bd4867e.css" rel="stylesheet">

                        <script src="../../bundles/fosjsrouting/js/router.js"></script>

        <script src="../../builds/main-1dfa89b76a105f9c2d98.js"></script>
        <script src="../../js/routing?callback=fos.Router.setData"></script>
            

    <script>
        // video settings
        window.video = {
            isCourseChapterPaid: true,
            courseChapterId: 5298
        };

                window.video.nextDetails = {
            'type': 'video',
            'title': 'Up Next: How\x20to\x20Authenticate\x20via\x20an\x20API\x20Token <i class="fa fa-play"></i>',
            'url': '/screencast/guard/api-token#play'
        };
            </script>

    <script src="../../builds/video-1dfa89b76a105f9c2d98.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            var hashValue = window.location.hash.substr(1);
            if (hashValue.substr(0, 7) == 'comment') {
                // this is a #comment link - open up the comment tab!
                $('.nav-tabs a[href="#tab-comment"]').click();
            }
        });
    </script>

    <link rel="alternate" type="application/rss+xml" title="Blog feed with technical articles around PHP and screencast and tutorial updates from KnpUniversity.com" href="http://feeds.feedburner.com/knpuniversity" />

    <meta name="description" content="Symfony&#039;s authentication is definitely powerful, but if you
need to do something complex, you might pull your hair out.

Introducing KnpUGuard authentication, which puts all the complexities of any
authentication scheme right at your finger-tips. The code you right will be
easy to understand and customizing things to any whim will be simple:

* Authentication via an API token
* &quot;Social login&quot; / OAuth authentication
* Creating a traditional login form
* Customizing success/failure behavior
* Customizing error messages
* Loading users in complex ways
* ... probably anything else

If all goes well, Guard will become a core part of Symfony. If you like it, let
people know it worked for you at [symfony/symfony#14673](https://github.com/symfony/symfony/pull/14673).
And if it doesn&#039;t cover a use-case, [open an issue](https://github.com/knpuniversity/KnpUGuard)
and let me know!
">

    <meta property="og:site_name" content="KnpUniversity - PHP and Symfony Video Tutorial Screencasts">
    <meta name="twitter:site" content="@KnpUniversity"><link rel="shortcut icon" href="../../assets/images/favicon.ico">
    <link rel="icon" type="image/png" href="../../assets/images/favicon.png">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->    <meta property="og:title" content="How to Create a Login Form">
<meta property="og:description" content="Symfony&amp;#039;s authentication is definitely powerful, but if you
need to do something complex, you might pull your hair out.

Introducing KnpUGuard authentication, which puts all the complexities of any
authentication scheme right at your finger-tips">
<meta property="og:url" content="http://knpuniversity.com/screencast/guard/login-form">
    <meta property="og:image" content="http://knpuniversity.com/imagine/course_video_poster_large/uploads/screencast/guard:a326b83b22fcc1c6da3b2fdda75ead60b37c0c4f/guard-auth.png">

<meta name="twitter:card" content="summary">


                            
    </head>
<body data-user-id="" >
<nav class="navbar navbar-inverse nav-margin navbar-learning-layout">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle toggle-button collapsed" data-toggle="collapse" data-target="#js-navbar" aria-expanded="false" aria-controls="js-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../logout" class="navbar-brand">
                <span class="knp-color-blue">Knp</span>
                <span class="knp-color-white">University</span>
            </a>
        </div>
        <form class="navbar-form navbar-left navbar-form-border" role="search" method="GET" action="http://knpuniversity.com/search">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Search Tutorials" value="" name="q">

                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </form>
        <div id="js-navbar" class="collapse-fix collapse navbar-right navbar-collapse">
            

<ul class="nav navbar-nav nav-narrowerOnSmall">
            <li><a href="../../checkout/subscription/team_yearly/5" title="Cart"><i class="fa fa-shopping-cart"></i></a></li>
        <li class="dropdown"><a href="login-form#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <i class="fa fa-angle-down"></i></a>
        <ul class="dropdown-menu">
          <li><a href="../../tracks.1">Tracks</a></li>
          <li><a href="../../courses/all">All Courses</a></li>
        </ul>
    </li>
            <li><a href="../../pricing.1">Pricing</a></li>
        <li><a href="../../training">Training</a></li>
                <li class="visible-xs"><a href="../../logout">My Profile</a></li>
        <li class="visible-xs"><a href="../../logout">Sign Out</a></li>

            <li><a href="../../login.1">Log In</a></li>
        <li class="btn btn-sm btn-warning signup-btn"><a class="signup" href="../../signup/index.html">Sign Up</a></li>
    </ul>

        </div>
    </div>
</nav>


    




<div class="table-contents-container">
  <div class="container expandList" id="js-chapter-list">
      <button class="table-contents-container-button js-expand-list" data-target="js-chapter-list" title="Chapter List">
          <i class="fa fa-bars"></i>
                        2.
                            How to Create a Login Form
                </button>
      <div class="expandList-body">
          <div class="expandList-bodyInner">
              <h3 class="expandList-header">
                  <a class="course-title-expand" href="../guard.1">KnpUGuard: Symfony Authentication with a Smile</a>
              </h3>

                                <div class="watched-tut-progress-container watched-tut-progress-container-overview">
        <div class="watched-tut-progress-overview" style="width: 0%; margin-right: 100%;" title="0% complete"><span class="profile-progress-title">0%</span></div>
    </div>


              
              <div class="expand-chapter-list">
                      
    
    <!-- Table of contents -->
    <div class="chapter-list">
        <ul class="list-unstyled">
            
                
                                <li class="title chapter-list-item ">
            <a href="install" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                1.
                        Installation
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item chapter-list-item-active">
            <a href="login-form" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                2.
                        How to Create a Login Form
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="api-token" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                3.
                        How to Authenticate via an API Token
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-form#" class="js-no-follow-link">
                <div class="row">
                    <div class="col-xs-9">
                                                4.
                        Social Login with Facebook
                                                    <small><em>(coming soon)</em></small>
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-form-customize-user" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                5.
                        How to Login with a username *or* email (or crazier)
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="error-messages" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                6.
                        Customizing Authentication Failure Messages
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="failure-handling" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                7.
                        Customizing Failure Handling
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="success-handling" class="">
                <div class="row">
                    <div class="col-xs-9">
                                                8.
                        Customizing Success Handling
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-form#" class="js-no-follow-link">
                <div class="row">
                    <div class="col-xs-9">
                                                9.
                        Login Form: Adding a CSRF Token
                                                    <small><em>(coming soon)</em></small>
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-form#" class="js-no-follow-link">
                <div class="row">
                    <div class="col-xs-9">
                                                10.
                        How can I use Multiple Authenticators?
                                                    <small><em>(coming soon)</em></small>
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-form#" class="js-no-follow-link">
                <div class="row">
                    <div class="col-xs-9">
                                                11.
                        How can I use this in Silex?
                                                    <small><em>(coming soon)</em></small>
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-form#" class="js-no-follow-link">
                <div class="row">
                    <div class="col-xs-9">
                                                12.
                        FOSUserBundle
                                                    <small><em>(coming soon)</em></small>
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


            
                
                                <li class="title chapter-list-item ">
            <a href="login-form#" class="js-no-follow-link">
                <div class="row">
                    <div class="col-xs-9">
                                                13.
                        How can I Manually Authenticate a User?
                                                    <small><em>(coming soon)</em></small>
                                            </div>

                                </div>
            </a>
            <div class="row">
                <div class="col-xs-12">
                                    </div>
            </div>
        </li>


                    </ul>
    </div>

    
              </div>
          </div>
      </div>
  </div>
  <div>
                <div class="dropdown download-buy-buttons">
              <button class="btn btn-success dropdown-toggle" type="button" id="downloadDropdown" data-toggle="dropdown" aria-expanded="true">
                  <span><i class="fa fa-download"></i></span>
                  <span class="hidden-xs">Download</span>
                  <span class="caret"></span>
              </button>
              <ul class="list-unstyled dropdown-menu pull-right" role="menu" aria-labelledby="downloadDropdown">
                  
                  <li><a href="../get/guard/code/a326b83b22fcc1c6da3b2fdda75ead60b37c0c4f" class="js-analytics-download" data-download-type="code"><i class="fa fa-code"></i> Course Code</a></li>

                                        <li><a href="../get/guard/script/a326b83b22fcc1c6da3b2fdda75ead60b37c0c4f" class="js-analytics-download" data-download-type="script"><i class="fa fa-book"></i> Course Script</a></li>              </ul>
          </div>
              </div>
</div>


        <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-9 col-lg-10">
                <h1 class="account-header account-header-low-margin-top">How to Create a Login Form</h1>
                
                                    <p class="hidden-xs">
                        Course:
                        <a class="knp-color-black" href="../guard.1"><em>KnpUGuard: Symfony Authentication with a Smile Tutorial</em></a>                    </p>
                            </div>
        </div>

         
        <div class="row">
            <div class="col-xs-12 col-md-10 col-md-offset-1">
                <div class="pull-right">
                                    <a class="btn btn-success"
           href="api-token#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                </div>

                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a data-toggle="tab" href="login-form#tab-script">Script</a></li>
                    <li><a data-toggle="tab" href="login-form#tab-comment">
                        <i class="fa fa-comment-o"></i>
                                                    
                                                                                                (25+)
                                                                                        Conversation
                                            </a></li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane active" id="tab-script">
                        <div class="js-script-content-wrapper top-margin-script markdown-content">
                                                                                        <a href="https://github.com/knpuniversity/guard-tutorial/edit/master/knpu/login-form.md" target="_blank" class="btn btn-default btn-circle pull-right js-tooltip" title="Edit on GitHub"><span class="fa fa-pencil"></span></a>
                                                                    <p>So you want a login form? That's simple. And along the way, you'll learn all the
steps that happen during authentication, and how you can customize what happens
at each one.</p>
<p>You still have to do some work, but you're going to be really happy with the result.</p>
<div class="admonition tip"><p class="admonition-title"><span class="fa fa-lightbulb-o"></span> Tip</p><p>Click <strong>Download</strong> to get the starting or finished code of this tutorial.</p>
</div><p><a name="SecurityController-loginAction"></a></p>
<h2 id="create-the-login-form">Create the Login Form <a class="headerlink" href="login-form#create-the-login-form" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Don't think about security yet! Instead, start by creating a Symfony controller with
two action methods: one for rendering the login form and another that'll handle the
login submit:</p>
<p><div class="code-block-wrapper" data-code-block-guid="586d873109">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-33" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            33 lines <span class="meta-divider"></span> <span title="src/AppBundle/Controller/SecurityController.php">src/AppBundle/Controller/SecurityController.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-2" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 2
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="3"></td>
            <td class="blob-code"><span class="hljs-keyword">namespace</span> <span class="hljs-title">AppBundle</span>\<span class="hljs-title">Controller</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="4"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="5"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Sensio</span>\<span class="hljs-title">Bundle</span>\<span class="hljs-title">FrameworkExtraBundle</span>\<span class="hljs-title">Configuration</span>\<span class="hljs-title">Route</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="6"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Bundle</span>\<span class="hljs-title">FrameworkBundle</span>\<span class="hljs-title">Controller</span>\<span class="hljs-title">Controller</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecurityController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="9"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="10"></td>
            <td class="blob-code">    <span class="hljs-comment">/**</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code">     * <span class="hljs-doctag">@Route</span>("/login", name="security_login")</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code">     */</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loginAction</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">        $helper = <span class="hljs-keyword">$this</span>-&gt;get(<span class="hljs-string">'security.authentication_utils'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;render(<span class="hljs-string">'security/login.html.twig'</span>, <span class="hljs-keyword">array</span>(</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="18"></td>
            <td class="blob-code">            <span class="hljs-comment">// last username entered by the user (if any)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">            <span class="hljs-string">'last_username'</span> =&gt; $helper-&gt;getLastUsername(),</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="20"></td>
            <td class="blob-code">            <span class="hljs-comment">// last authentication error (if any)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="21"></td>
            <td class="blob-code">            <span class="hljs-string">'error'</span> =&gt; $helper-&gt;getLastAuthenticationError(),</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code">        ));</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">    <span class="hljs-comment">/**</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="26"></td>
            <td class="blob-code">     * <span class="hljs-doctag">@Route</span>("/login_check", name="security_login_check")</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="27"></td>
            <td class="blob-code">     */</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="28"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loginCheckAction</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="29"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="30"></td>
            <td class="blob-code">        <span class="hljs-comment">// will never be executed</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="31"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="32"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>So far, this is just a lovely, but boring set of actions. The only interesting
parts are the <code>last_username</code> and <code>error</code> variables. Where are those coming from?
You'll see. Also, <code>loginCheckAction()</code> doesn't do anything - and it never will. Another
layer will handle the login submit.</p>
<p><a name="create-login-form-template"></a></p>
<p>Next, create the login template:</p>
<p><div class="code-block-wrapper" data-code-block-guid="771878ae65">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
            
            25 lines <span class="meta-divider"></span> <span title="app/Resources/views/security/login.html.twig">app/Resources/views/security/login.html.twig</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="1"></td>
            <td class="blob-code"><span class="xml"></span><span class="hljs-template-tag">{% <span class="hljs-name"><span class="hljs-keyword">extends</span></span> 'base.html.twig' %}</span><span class="xml"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="2"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="3"></td>
            <td class="blob-code"></span><span class="hljs-template-tag">{% <span class="hljs-name"><span class="hljs-keyword">block</span></span> body %}</span><span class="xml"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="4"></td>
            <td class="blob-code">    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{ path('security_login_check') }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="5"></td>
            <td class="blob-code">        </span><span class="hljs-template-tag">{% <span class="hljs-name"><span class="hljs-keyword">if</span></span> error %}</span><span class="xml"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="6"></td>
            <td class="blob-code">            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"alert alert-danger"</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code">                </span><span class="hljs-template-variable">{{ error.messageKey|trans(error.messageData) }}</span><span class="xml"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="9"></td>
            <td class="blob-code">        </span><span class="hljs-template-tag">{% <span class="hljs-name"><span class="hljs-keyword">endif</span></span> %}</span><span class="xml"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="10"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code">            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"username"</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code">            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"_username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"</span></span></span><span class="hljs-template-variable">{{ last_username }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span> /&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code">        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"password"</span>&gt;</span>Password:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="18"></td>
            <td class="blob-code">            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"_password"</span> /&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="20"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="21"></td>
            <td class="blob-code">        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Login<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code"></span><span class="hljs-template-tag">{% <span class="hljs-name"><span class="hljs-keyword">endblock</span></span> %}</span><span class="xml"></td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>This form submits to the <code>/login_check</code> URL and the field names are <code>_username</code> and
<code>_password</code>. Remember these - they'll be important in a minute (see <a href="login-form#getCredentials">getCredentials()</a>).</p>
<h2 id="installing-guard">Installing Guard <a class="headerlink" href="login-form#installing-guard" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Read the short <a href="install">Installation</a> chapter to make sure you've got the
bundle installed and enabled.</p>
<h2 id="creating-an-authenticator">Creating an Authenticator <a class="headerlink" href="login-form#creating-an-authenticator" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>With Guard, the whole authentication process - fetching the username/password POST
values, validating the password, redirecting after success, etc - is handled in a
single class called an "Authenticator". Your authenticator can be as crazy as you
want, as long as it implements <a href="https://github.com/knpuniversity/KnpUGuard/blob/master/src/GuardAuthenticatorInterface.php">KnpU\Guard\GuardAuthenticatorInterface</a>.</p>
<p>For login forms, life is easier, thanks to a convenience class called <code>AbstractFormLoginAuthenticator</code>.
Create a new <code>FormLoginAuthenticator</code> class, make it extend this class, and add all
the missing methods (from the interface and abstract class):</p>
<p><div class="code-block-wrapper" data-code-block-guid="1334f477a3">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-37" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            37 lines <span class="meta-divider"></span> <span title="src/AppBundle/Security/FormLoginAuthenticator.php">src/AppBundle/Security/FormLoginAuthenticator.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-2" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 2
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="3"></td>
            <td class="blob-code"><span class="hljs-keyword">namespace</span> <span class="hljs-title">AppBundle</span>\<span class="hljs-title">Security</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="4"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="5"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">KnpU</span>\<span class="hljs-title">Guard</span>\<span class="hljs-title">Authenticator</span>\<span class="hljs-title">AbstractFormLoginAuthenticator</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="6"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Request</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">User</span>\<span class="hljs-title">UserInterface</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">User</span>\<span class="hljs-title">UserProviderInterface</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="9"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="10"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormLoginAuthenticator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFormLoginAuthenticator</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCredentials</span><span class="hljs-params">(Request $request)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code">        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Implement getCredentials() method.</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span><span class="hljs-params">($credentials, UserProviderInterface $userProvider)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="18"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code">        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Implement getUser() method.</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="20"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="21"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkCredentials</span><span class="hljs-params">($credentials, UserInterface $user)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code">        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Implement checkCredentials() method.</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="26"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="27"></td>
            <td class="blob-code">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLoginUrl</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="28"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="29"></td>
            <td class="blob-code">        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Implement getLoginUrl() method.</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="30"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="31"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="32"></td>
            <td class="blob-code">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDefaultSuccessRedirectUrl</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="33"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="34"></td>
            <td class="blob-code">        <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Implement getDefaultSuccessRedirectUrl() method.</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="35"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="36"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Your mission: fill in each method. We'll get to that in a second.</p>
<p>To fill in those methods, we're going to need some services. To keep this tutorial
simple, let's pass the entire container into our authenticator:</p>
<p><div class="code-block-wrapper" data-code-block-guid="7a83cbc309">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-45" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            45 lines <span class="meta-divider"></span> <span title="src/AppBundle/Security/FormLoginAuthenticator.php">src/AppBundle/Security/FormLoginAuthenticator.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-5" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 5
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="6"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">ContainerInterface</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="7-10" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 7 - 10
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormLoginAuthenticator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFormLoginAuthenticator</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="13"></td>
            <td class="blob-code">    <span class="hljs-keyword">private</span> $container;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(ContainerInterface $container)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="16"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="17"></td>
            <td class="blob-code">        <span class="hljs-keyword">$this</span>-&gt;container = $container;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="18"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="19-43" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 19 - 43
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="44"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<div class="admonition tip"><p class="admonition-title"><span class="fa fa-lightbulb-o"></span> Tip</p><p>For seasoned-Symfony devs, you can of course inject <em>only</em> the services you need.</p>
</div><h2 id="registering-your-authenticator">Registering your Authenticator <a class="headerlink" href="login-form#registering-your-authenticator" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Before filling in the methods, let's tell Symfony about our fancy new authenticator.
First, register it as a service:</p>
<p><div class="code-block-wrapper" data-code-block-guid="a83921bba1">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-10" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            10 lines <span class="meta-divider"></span> <span title="app/config/services.yml">app/config/services.yml</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-5" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 5
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="6"></td>
            <td class="blob-code"><span class="hljs-attr">services:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code">    app.form_login_authenticator:</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code"><span class="hljs-attr">        class:</span> AppBundle\Security\FormLoginAuthenticator</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="9"></td>
            <td class="blob-code"><span class="hljs-attr">        arguments:</span> [<span class="hljs-string">"@service_container"</span>]</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Next, update your <code>security.yml</code> file to use the new service:</p>
<p><div class="code-block-wrapper" data-code-block-guid="b5384b49a0">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-24" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            24 lines <span class="meta-divider"></span> <span title="app/config/security.yml">app/config/security.yml</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="1"></td>
            <td class="blob-code"><span class="hljs-attr">security:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="2-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 2 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-attr">    firewalls:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="15-18" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 15 - 18
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="19"></td>
            <td class="blob-code"><span class="hljs-attr">        main:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="20"></td>
            <td class="blob-code"><span class="hljs-attr">            anonymous:</span> ~</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="21"></td>
            <td class="blob-code"><span class="hljs-attr">            knpu_guard:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="22"></td>
            <td class="blob-code"><span class="hljs-attr">                authenticators:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code"><span class="hljs-bullet">                    -</span> app.form_login_authenticator</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Your firewall (called <code>main</code> here) can look however you want, as long as it has a
<code>knpu_guard</code> section under it with an <code>authenticators</code> key that includes the service
name that you setup a second ago (<code>app.form_login_authenticator</code> in my example).</p>
<p><a name="security-providers"></a></p>
<p>I've also setup my "user provider" to load my users from the database:</p>
<p><div class="code-block-wrapper" data-code-block-guid="0f206d4cda">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-24" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            24 lines <span class="meta-divider"></span> <span title="app/config/security.yml">app/config/security.yml</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="1"></td>
            <td class="blob-code"><span class="hljs-attr">security:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="2"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="3"></td>
            <td class="blob-code"><span class="hljs-attr">    encoders:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="4"></td>
            <td class="blob-code">        <span class="hljs-comment"># Our user class and the algorithm we'll use to encode passwords</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="5"></td>
            <td class="blob-code">        <span class="hljs-comment"># http://symfony.com/doc/current/book/security.html#encoding-the-user-s-password</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="6"></td>
            <td class="blob-code">        AppBundle\Entity\User: bcrypt</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="8"></td>
            <td class="blob-code"><span class="hljs-attr">    providers:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="9"></td>
            <td class="blob-code">        <span class="hljs-comment"># Simple example of loading users via Doctrine</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="10"></td>
            <td class="blob-code">        <span class="hljs-comment"># To load users from somewhere else: http://symfony.com/doc/current/cookbook/security/custom_provider.html</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-attr">        database_users:</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code"><span class="hljs-attr">            entity:</span> { class: AppBundle:User, property: username }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="13-24" data-last="1">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 13 - 24
                            </td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>In a minute, you'll see where that's used.</p>
<h2 id="filling-in-the-authenticator-methods">Filling in the Authenticator Methods <a class="headerlink" href="login-form#filling-in-the-authenticator-methods" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Your authenticator is now being used by Symfony. So let's fill in each method:</p>
<p><a name="getCredentials"></a></p>
<h3 id="getcredentials">getCredentials() <a class="headerlink" href="login-form#getcredentials" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p><div class="code-block-wrapper" data-code-block-guid="2bc735ebfe">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-68" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            68 lines <span class="meta-divider"></span> <span title="src/AppBundle/Security/FormLoginAuthenticator.php">src/AppBundle/Security/FormLoginAuthenticator.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-6" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 6
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="7"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">HttpFoundation</span>\<span class="hljs-title">Request</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="8-9" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 8 - 9
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="10"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Security</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="11-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 11 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormLoginAuthenticator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFormLoginAuthenticator</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-22" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 16 - 22
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="23"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCredentials</span><span class="hljs-params">(Request $request)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="24"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="25"></td>
            <td class="blob-code">        <span class="hljs-keyword">if</span> ($request-&gt;getPathInfo() != <span class="hljs-string">'/login_check'</span>) {</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="26"></td>
            <td class="blob-code">            <span class="hljs-keyword">return</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="27"></td>
            <td class="blob-code">        }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="28"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="29"></td>
            <td class="blob-code">        $username = $request-&gt;request-&gt;get(<span class="hljs-string">'_username'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="30"></td>
            <td class="blob-code">        $request-&gt;getSession()-&gt;set(Security::LAST_USERNAME, $username);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="31"></td>
            <td class="blob-code">        $password = $request-&gt;request-&gt;get(<span class="hljs-string">'_password'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="32"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="33"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">array</span>(</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="34"></td>
            <td class="blob-code">            <span class="hljs-string">'username'</span> =&gt; $username,</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="35"></td>
            <td class="blob-code">            <span class="hljs-string">'password'</span> =&gt; $password</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="36"></td>
            <td class="blob-code">        );</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="37"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="38-66" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 38 - 66
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="67"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>The <code>getCredentials()</code> method is called on <strong>every single request</strong> and its job is
either to fetch the username/password from the request and return them.</p>
<p>So, from here, there are 2 possibilities:</p>
<table class="table table-striped">
<thead>
<tr><th>&#35;  </th><th>Conditions            </th><th>Result                    </th><th>Next Step</th></tr>
</thead>
<tbody>
<tr><td>A)     </td><td>Return non-null value </td><td>Authentication continues  </td><td><a href="login-form#getUser">getUser()</a></td></tr>
<tr><td>B)     </td><td>Return null           </td><td>Authentication is skipped </td><td>Nothing! But if the user is anonymous and tries to access a secure page, <a href="login-form#getLoginUrl">getLoginUrl()</a> will be called</td></tr>
</tbody>
</table>
<p><strong>A)</strong> If the URL is <code>/login_check</code> (that's the URL that our login form submits to),
then we fetch the <code>_username</code> and <code>_password</code> post parameters (these were our
<a href="login-form#create-login-form-template">form field names</a>) and return them. Whatever you return
here will be passed to a few other methods later. In this case - since we returned
a non-null value from <code>getCredentials()</code> - the <a href="login-form#getUser">getUser()</a> method is called
next.</p>
<p><strong>B)</strong> If the URL is <em>not</em> <code>/login_check</code>, we return <code>null</code>. In this case, the request
continues anonymously - no other methods are called on the authenticator. If the
page the user is accessing requires login, they'll be redirected to the login form:
see <a href="login-form#getLoginUrl">getLoginUrl()</a>.</p>
<div class="admonition tip"><p class="admonition-title"><span class="fa fa-lightbulb-o"></span> Tip</p><p>We also set a <code>Security::LAST_USERNAME</code> key into the session. This is optional, but
it lets you pre-fill the login form with this value (see the
<a href="login-form#SecurityController-loginAction">SecurityController::loginAction</a> from earlier).</p>
</div><p><a name="getUser"></a></p>
<h3 id="getuser">getUser() <a class="headerlink" href="login-form#getuser" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>If <code>getCredentials()</code> returns a non-null value, then <code>getUser()</code> is called next.
Its job is simple: return a user (an object implementing <a href="http://symfony.com/doc/current/cookbook/security/entity_provider.html#what-s-this-userinterface">UserInterface</a>):</p>
<p><div class="code-block-wrapper" data-code-block-guid="ce30843cf7">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-68" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            68 lines <span class="meta-divider"></span> <span title="src/AppBundle/Security/FormLoginAuthenticator.php">src/AppBundle/Security/FormLoginAuthenticator.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-11" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 11
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="12"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">User</span>\<span class="hljs-title">UserProviderInterface</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="13-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormLoginAuthenticator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFormLoginAuthenticator</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-38" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 16 - 38
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="39"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span><span class="hljs-params">($credentials, UserProviderInterface $userProvider)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="40"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="41"></td>
            <td class="blob-code">        $username = $credentials[<span class="hljs-string">'username'</span>];</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="42"></td>
            <td class="blob-code"></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="43"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> $userProvider-&gt;loadUserByUsername($username);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="44"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="45-66" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 45 - 66
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="67"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>The <code>$credentials</code> argument is whatever you returned from <code>getCredentials()</code> and
the <code>$userProvider</code> is whatever you've configured in security.yml under the
<a href="login-form#security-providers">providers</a> key. My provider queries the database and returns
the <code>User</code> entity.</p>
<p>There are 2 paths from there:</p>
<table class="table table-striped">
<thead>
<tr><th>&#35; </th><th>Conditions                                        </th><th>Result                    </th><th>Next Step</th></tr>
</thead>
<tbody>
<tr><td>A)    </td><td>Return a User object                              </td><td>Authentication continues  </td><td><a href="login-form#checkCredentials">checkCredentials()</a></td></tr>
<tr><td>B)    </td><td>Return null or throw an <code>AuthenticationException</code> </td><td>Authentication fails      </td><td>Redirect to  <a href="login-form#getLoginUrl">getLoginUrl()</a></td></tr>
</tbody>
</table>
<p><strong>A)</strong> If you return some <code>User</code> object (using whatever method you want) - then
you'll continue on to <a href="login-form#checkCredentials">checkCredentials()</a>.</p>
<p><strong>B</strong>  If you return <code>null</code> or throw any <code>Symfony\Component\Security\Core\Exception\AuthenticationException</code>,
authentication will fail and the user will be redirected back to the login page:
see <a href="login-form#getLoginUrl">getLoginUrl()</a>.</p>
<p><a name="checkCredentials"></a></p>
<h3 id="checkcredentials">checkCredentials() <a class="headerlink" href="login-form#checkcredentials" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>If you return a user from <code>getUser()</code>, then <code>checkCredentials()</code> is called next.
Your job is simple: check if the username/password combination is valid. If it isn't,
throw a <code>BadCredentialsException</code> (or any <code>AuthenticationException</code>):</p>
<p><div class="code-block-wrapper" data-code-block-guid="95ef4c0238">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-68" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            68 lines <span class="meta-divider"></span> <span title="src/AppBundle/Security/FormLoginAuthenticator.php">src/AppBundle/Security/FormLoginAuthenticator.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-8" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 8
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="9"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">Exception</span>\<span class="hljs-title">BadCredentialsException</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="10-10" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... line 10
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="11"></td>
            <td class="blob-code"><span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">Security</span>\<span class="hljs-title">Core</span>\<span class="hljs-title">User</span>\<span class="hljs-title">UserInterface</span>;</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="12-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 12 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormLoginAuthenticator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFormLoginAuthenticator</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-45" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 16 - 45
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="46"></td>
            <td class="blob-code">    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkCredentials</span><span class="hljs-params">($credentials, UserInterface $user)</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="47"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="48"></td>
            <td class="blob-code">        $plainPassword = $credentials[<span class="hljs-string">'password'</span>];</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="49"></td>
            <td class="blob-code">        $encoder = <span class="hljs-keyword">$this</span>-&gt;container-&gt;get(<span class="hljs-string">'security.password_encoder'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="50"></td>
            <td class="blob-code">        <span class="hljs-keyword">if</span> (!$encoder-&gt;isPasswordValid($user, $plainPassword)) {</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="51"></td>
            <td class="blob-code">            <span class="hljs-comment">// throw any AuthenticationException</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="52"></td>
            <td class="blob-code">            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BadCredentialsException();</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="53"></td>
            <td class="blob-code">        }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="54"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="55-66" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 55 - 66
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="67"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>Like before, <code>$credentials</code> is whatever you returned from <code>getCredentials()</code>. And
now, the <code>$user</code> argument is what you just returned from <code>getUser()</code>. To check the
user, you can use the <code>security.password_encoder</code>, which automatically hashes the
plain password based on your <code>security.yml</code> configuration.</p>
<p>Want to do some other custom checks beyond the password? Go crazy! Based on what
you do, there are 2 paths:</p>
<table class="table table-striped">
<thead>
<tr><th>&#35; </th><th>Conditions                                                 </th><th>Result                    </th><th>Next Step</th></tr>
</thead>
<tbody>
<tr><td>A)    </td><td>do anything <em>except</em> throwing an <code>AuthenticationException</code> </td><td>Authentication successful </td><td>Redirect the user (may involve <a href="login-form#getDefaultSuccessRedirectUrl">getDefaultSuccessRedirectUrl()</a>)</td></tr>
<tr><td>B)    </td><td>Throw any type of <code>AuthenticationException</code>                </td><td>Authentication fails      </td><td>Redirect to <a href="login-form#getLoginUrl">getLoginUrl()</a></td></tr>
</tbody>
</table>
<p>If you <em>don't</em> throw an exception, congratulations! You're user is now authenticated,
and will be redirected somewhere...</p>
<p><a name="getDefaultSuccessRedirectUrl"></a></p>
<h3 id="getdefaultsuccessredirecturl">getDefaultSuccessRedirectUrl() <a class="headerlink" href="login-form#getdefaultsuccessredirecturl" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>Your user is now authenticated. Woot! But, where should we redirect them? The <code>AbstractFormLoginAuthenticator</code>
class takes care of <em>most</em> of this automatically. If the user originally tried to
access a protected page (e.g. <code>/admin</code>) but was redirected to the login page, then
they'll now be redirected back to that URL (so, <code>/admin</code>).</p>
<p>But what if the user went to <code>/login</code> directly? In that case, you'll need to decide
where they should go. How about the homepage?</p>
<p><div class="code-block-wrapper" data-code-block-guid="845a83722f">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-68" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            68 lines <span class="meta-divider"></span> <span title="src/AppBundle/Security/FormLoginAuthenticator.php">src/AppBundle/Security/FormLoginAuthenticator.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormLoginAuthenticator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFormLoginAuthenticator</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-61" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 16 - 61
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="62"></td>
            <td class="blob-code">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDefaultSuccessRedirectUrl</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="63"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="64"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;container-&gt;get(<span class="hljs-string">'router'</span>)</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="65"></td>
            <td class="blob-code">            -&gt;generate(<span class="hljs-string">'homepage'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="66"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="67"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>This fetches the <code>router</code> service and redirects to a <code>homepage</code> route (change this
to a real route in your application). But note: this method is <em>only</em> called if there
isn't some previous page that user should be redirected to.</p>
<p><a name="getLoginUrl"></a></p>
<h3 id="getloginurl">getLoginUrl() <a class="headerlink" href="login-form#getloginurl" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>If authentication fails in <code>getUser()</code> or <code>checkCredentials()</code>, the user will be
redirected back to the login page. In this method, you just need to tell Symfony
where your login page lives:</p>
<p><div class="code-block-wrapper" data-code-block-guid="362a033205">
    <div class="meta">
        <div class="actions">
            <span class="fa fa-clipboard js-activate-clipboard" data-toggle="tooltip" title="Copy Code" data-placement="top"></span>
        </div>
        <div class="info">
                        <span class="js-expand-all" data-range="1-68" data-toggle="tooltip" title="Show All Lines" data-placement="top">
                <i class="fa fa-expand js-icon-load-more"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </span>
            
            68 lines <span class="meta-divider"></span> <span title="src/AppBundle/Security/FormLoginAuthenticator.php">src/AppBundle/Security/FormLoginAuthenticator.php</span>
        </div>
    </div>
    <table class="hljs code-block-table">
        <tbody class="js-tr-container">
                <tr>
                    <td class="line-number line-number-expandable" data-range="1-13" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 1 - 13
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="14"></td>
            <td class="blob-code"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormLoginAuthenticator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractFormLoginAuthenticator</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="15"></td>
            <td class="blob-code"></span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="16-55" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 16 - 55
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="56"></td>
            <td class="blob-code">    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLoginUrl</span><span class="hljs-params">()</span></td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="57"></td>
            <td class="blob-code">    </span>{</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="58"></td>
            <td class="blob-code">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;container-&gt;get(<span class="hljs-string">'router'</span>)</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="59"></td>
            <td class="blob-code">            -&gt;generate(<span class="hljs-string">'security_login'</span>);</td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="60"></td>
            <td class="blob-code">    }</td>
            </tr>
    <tr>
                    <td class="line-number line-number-expandable" data-range="61-66" data-last="0">
                <i class="fa fa-arrows-v js-icon-load-more" data-toggle="tooltip" title="Show Lines" data-placement="left"></i>
                <i class="fa fa-spinner fa-spin js-icon-loading"></i>
            </td>
            <td class="gap-line">
                                                    ... lines 61 - 66
                            </td>
            </tr>
    <tr>
                    <td class="line-number line-number-displayed" data-line-number-displayed="67"></td>
            <td class="blob-code">}</td>
            </tr>

        </tbody>
    </table>
</div>
</p>
<p>In our case, the login page route name is <code>security_login</code>.</p>
<h2 id="customize">Customize! <a class="headerlink" href="login-form#customize" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Try it out! You should be able to login, see login errors, and control most of the
process. So what else can we customize?</p>
<ul>
<li><a href="login-form-customize-user">How can I login by username <em>or</em> email (or any other weird way)?</a></li>
<li><a href="http://knpuniversity.com/screencast/guard/login-form-error-messages">How can I customize the error messages?</a></li>
<li><a href="http://knpuniversity.com/screencast/guard/login-form-failure-handling">How can I control/hook into what happens when login fails?</a></li>
<li><a href="http://knpuniversity.com/screencast/guard/login-form-success-handling">How can I control/hook into what happens on login success?</a></li>
<li><a href="login-form-csrf">How can I add a CSRF token?</a></li>
</ul>

    
                        </div>
                    </div>
                    <div class="tab-pane" id="tab-comment">
                        <h3>Leave a comment!</h3>
                                                        <div id="disqus_thread">
                <style type="text/css">
            #dsq-comments {padding: 10px 0 0}
            .dsq-comment {position: relative;clear: both;margin: 0 0 1.5em;}
            .dsq-avatar {left: 0;position: absolute;}
            .dsq-avatar img {border: 0 none;border-radius: 3px;height: 36px;width: 36px;}
            .dsq-comment-body {padding: 0 0 0 46px;}
            .dsq-comment-header {border: 1px solid rgba(0, 0, 0, 0.15);border-radius: 3px;font-size: 13px;line-height: 14px;margin: 0 0 1em;max-height: 36px;overflow: hidden;padding: 10px;position: relative;text-overflow: ellipsis;white-space: nowrap;}
            .dsq-comment-message {word-wrap: break-word;}
            .dsq-comment-message {line-height: 1.5em;margin: 0 0 1em;}
            .dsq-comment-text {display: inline;}
            .dsq-comment-date {float: right;font-size: 90%;margin: 0 12px 0 0;}
        </style>

	    <div id="dsq-content">
	        <ul id="dsq-comments">
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2984810107" id="dsq-comment-2984810107">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2984810107">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-04</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2984810107" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2984810107" class="dsq-comment-text">
	                                <p>Yes, that's great! Actually, I use both access_control list and <code>@Security</code> annotation to be sure with proper security. Even more, you can double check if user has access with custom call of isGranted() method in actions. ;)</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2984796990" id="dsq-comment-2984796990">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/cristicitea/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/5942/6555/avatar92.jpg?1478277490">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2984796990">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-04</span>
	                            <span class="dsq-commenter-name">cristicitea</span>
	                        </div>

	                        <div id="dsq-comment-message-2984796990" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2984796990" class="dsq-comment-text">
	                                <p>ok, I figure it out. the roles field in the db takes an array </p><pre>["ROLE_USER"]</pre><p>. And using an annotation works as well </p><pre>@Security("is_granted('ROLE_USER')")</pre>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2984689414" id="dsq-comment-2984689414">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2984689414">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-04</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2984689414" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2984689414" class="dsq-comment-text">
	                                <p>Hey <a data-dsq-mention="cristicitea:disqus" href="https://disq.us/url?url=https%3A%2F%2Fdisqus.com%2Fby%2Fcristicitea%2F%3A5KqzXG69hYEAeHnmlDf4dq56TOE&amp;cuid=1175718" rel="nofollow noopener">cristicitea</a> ,</p><p>Yes, you should store user roles in database, for example when you store user information during registration. And yes, Symfony app should understand, but try it to double check - sometimes you could miss something in config. Take a look at our course <a href="http://disq.us/url?url=http%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fsymfony-security%3AZ8v99VcpwacioDMoVpj41JgLX_8&amp;cuid=1175718" rel="nofollow noopener"> Symfony Security: Beautiful Authentication, Powerful Authorization </a> - it has nice example about dynamic user roles at the end.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2984617061" id="dsq-comment-2984617061">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/cristicitea/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/5942/6555/avatar92.jpg?1478277490">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2984617061">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-04</span>
	                            <span class="dsq-commenter-name">cristicitea</span>
	                        </div>

	                        <div id="dsq-comment-message-2984617061" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2984617061" class="dsq-comment-text">
	                                <p>so, do I literally add ROLE_USER in the `roles` field in the database? Also, will the security file catch that role in the </p><pre><code>access_control</code></pre><p> automatically?</p><p>for example, if i am logged in as an admin, will this code understand that I am logged in as admin?</p><p></p><pre><code> { path: ^/test, roles: ROLE_ADMIN }</code></pre>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2984231631" id="dsq-comment-2984231631">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2984231631">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-04</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2984231631" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2984231631" class="dsq-comment-text">
	                                <p>Hey <a data-dsq-mention="cristicitea:disqus" href="https://disqus.com/by/cristicitea/" rel="nofollow noopener">cristicitea</a> ,</p><p>What do you mean in the first question? What type of the roles field should you use? or something different?</p><p>Actually, you should add a role for user before he will be logged in. The most common way is to set some role, like ROLE_USER when user is doing registration, i.e. when you're creating a new user in the DB. So when users are logging in - they _already_ have some role. Then you can easily check wether a logged in user has the required role with isGranted() method, i.e. $this-&gt;isGranted('ROLE_USER') in your controller (but only if you extends the Symfony\Bundle\FrameworkBundle\Controller\Controller class) or use @security.authorization_checker service otherwise.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2983324939" id="dsq-comment-2983324939">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/cristicitea/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/5942/6555/avatar92.jpg?1478277490">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2983324939">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-11-03</span>
	                            <span class="dsq-commenter-name">cristicitea</span>
	                        </div>

	                        <div id="dsq-comment-message-2983324939" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2983324939" class="dsq-comment-text">
	                                <p>What do I use for the roles field in the user table? And how to I tell what role is the user logged in as after login?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944491457" id="dsq-comment-2944491457">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/dancostinel/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/19746/1394/avatar92.jpg?1480942412">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944491457">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Dan Costinel</span>
	                        </div>

	                        <div id="dsq-comment-message-2944491457" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944491457" class="dsq-comment-text">
	                                <p>It worked! Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944394482" id="dsq-comment-2944394482">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944394482">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2944394482" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944394482" class="dsq-comment-text">
	                                <p>Hey Dan,</p><p>You should use "print something - {{ }}" syntax instead of "do something {% %}", here's a right solution:<br></p><pre><code><br>{{ render(controller('AppBundle:Security:login')) }}<br></code></pre><p></p><p>This will fix "Unexpected render tag..." error.</p><p>Use is defined test or default Twig filter in template:<br></p><pre><code><br>{% if error is defined %}<br>{# or #}<br>{% if error|default(false) %}<br></code></pre><p></p><p>Btw, you could only render both forms on homepage, but process them on its separate pages, just use the correct action in your forms. If user leaves some validation errors - he'll end up on form login page/ registration page. But if user fills form correct - he will be processed and won't see login/registration pages at all.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2944095710" id="dsq-comment-2944095710">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/dancostinel/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/19746/1394/avatar92.jpg?1480942412">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2944095710">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-10-11</span>
	                            <span class="dsq-commenter-name">Dan Costinel</span>
	                        </div>

	                        <div id="dsq-comment-message-2944095710" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2944095710" class="dsq-comment-text">
	                                <p>Hello guys!</p><p>Right now, the only way I saw is to create a SecurityController and inside it a loginAction() method which has it's own path (/login), and which, at the end, will render a security/login.html.twig template containing the login form. Also in security.yml there is an access_control with - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY } entry.</p><p>How can I change all this behavior? As I want to have the login and register forms in my homepage, and not each of them in their separate pages.</p><p>Tried to use, in my index.html.twig (which is my homepage template), something like:</p><p>{% block body %}<br>{# ... #}<br>{% render(controller('AppBundle:Security:login')) %}<br>{# ... #}<br>{% endblock %}</p><p>but this throws an error:<br>Unexpected "render" tag (expecting closing tag for the "block" tag defined near line X) in default/index.html.twig at line Y.</p><p>I also tried to change the template of the loginAction() method to 'default/index.html.twig', and write the login form in this template, as:<br>{% if error %}<br>                &lt;div&gt;{{ error.messageKey|trans(error.messageData, 'security') }}&lt;/div&gt;<br>            {% endif %}</p><p>            &lt;form action="{{ path('login') }}" method="post"&gt;<br>                &lt;input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}"&gt;</p><p>                &lt;div class="form-group"&gt;<br>                    &lt;label for="email"&gt;Your E-mail&lt;/label&gt;<br>                    &lt;input type="email" class="form-control" name="email" id="email"&gt;<br>                &lt;/div&gt;<br>                &lt;div class="form-group"&gt;<br>                    &lt;label for="first_name"&gt;Your First Name&lt;/label&gt;<br>                    &lt;input type="text" class="form-control" name="first_name" id="first_name" value="{{ last_username }}"&gt;<br>                &lt;/div&gt;<br>                &lt;div class="form-group"&gt;<br>                    &lt;label for="password"&gt;Your Password&lt;/label&gt;<br>                    &lt;input type="password" class="form-control" name="_password" id="password"&gt;<br>                &lt;/div&gt;<br>                &lt;button type="button" class="btn btn-primary"&gt;Submit&lt;/button&gt;<br>            &lt;/form&gt;<br>The errors where:<br>1. Variable "error" does not exist in default/index.html.twig at line Z. (tried to fix this by adding "if error is defined" - the error was gone, but I think is not the right way to fix it)<br>2. Variable "last_username" does not exist in default/index.html.twig at line T. (and I don't know why this variable is not being send from loginAction() to 'default/index.html.twig' as is specified there)</p><p>I'll appreciate any suggestion!<br>Thanks!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2840280759" id="dsq-comment-2840280759">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2840280759">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-08-16</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2840280759" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2840280759" class="dsq-comment-text">
	                                <p>Yes it is! But it's a simple deprecation :) - the constants were moved to a class called Security. So, the new way is:</p><p>use Symfony\Component\Security\Core\Security;</p><p>// ...<br>Security::AUTHENTICATION_ERROR</p><p>Btw - this is the tutorial for Symfony 2 - we have an updated Security tutorial for Symfony 3: <a href="http://disq.us/url?url=http%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fsymfony-security%3AZ8v99VcpwacioDMoVpj41JgLX_8&amp;cuid=1175718" rel="nofollow noopener">http://knpuniversity.com/scree...</a> - it has all the latest and greatest ways of doing things :).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2840008994" id="dsq-comment-2840008994">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_9GbeoXZ0jz/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/21870/1886/avatar92.jpg?1474668219">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2840008994">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-08-16</span>
	                            <span class="dsq-commenter-name">PJoy</span>
	                        </div>

	                        <div id="dsq-comment-message-2840008994" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2840008994" class="dsq-comment-text">
	                                <p>Seems that SecurityContextInterface is deprecated...</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2744684443" id="dsq-comment-2744684443">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bocharsky25/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/11445/2822/avatar92.jpg?1482506193">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2744684443">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-22</span>
	                            <span class="dsq-commenter-name">Victor Bocharsky</span>
	                        </div>

	                        <div id="dsq-comment-message-2744684443" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2744684443" class="dsq-comment-text">
	                                <p>Hey, Daniel!</p><p>Are you talking about <code>checkCredentials()</code> method which should be implemented from <code>AbstractGuardAuthenticator</code>? If so, then yes, you should return "true" to cause authentication success.</p><p></p><blockquote>If getCredentials() returns a non-null value, then this method is called and its return value is passed here as the $credentials argument. Your job is to return an object that implements UserInterface. If you do, then checkCredentials() will be called. If you return null (or throw an AuthenticationException) authentication will fail.<br></blockquote><p></p><p>You can find explanation of other methods on <a href="http://disq.us/url?url=http%3A%2F%2Fsymfony.com%2Fdoc%2Fcurrent%2Fcookbook%2Fsecurity%2Fguard-authentication.html%23the-guard-authenticator-methods%3Aq-izu8mDQQqpF10N3dgPIZNVOlc&amp;cuid=1175718" rel="nofollow noopener">The Guard Authenticator Methods</a> page.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2744505236" id="dsq-comment-2744505236">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="login-form">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2744505236">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-22</span>
	                            <span class="dsq-commenter-name">Daniel Weise</span>
	                        </div>

	                        <div id="dsq-comment-message-2744505236" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2744505236" class="dsq-comment-text">
	                                <p>To complete the authentication is necessary to return the value true on method checkCredentials</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2737736952" id="dsq-comment-2737736952">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2737736952">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-18</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2737736952" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2737736952" class="dsq-comment-text">
	                                <p>Oh no!</p><p>Let's debug this :). How far are you through the tutorial? I'm asking because in the beginning, we're still loading users from our "hardcoded" list in security.yml. Later, we load from the database. But in more recent versions of Symfony, we've *changed* what the out-of-box security.yml file looks like - and it *no* longer includes these "hardcoded" users by default. That *might* be the cause of the problem. Here's what the entire security.yml file originally looked like in this tutorial at the end of the next chapter (so, after we finish the login form stuff): <a href="https://disq.us/url?url=https%3A%2F%2Fgist.github.com%2Fweaverryan%2F6d80273fe7d3ae964292e7135345d789%3AWro1QtOKnUdFV8P9_7KaIQ2Q_iU&amp;cuid=1175718" rel="nofollow noopener">https://gist.github.com/weaver...</a></p><p>Or, it could be something entirely different - let me know what your setup looks like :). The good news is that this error tells us that the User couldn't be found - so we can rule out there being some problem with checking the user's password.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2736423336" id="dsq-comment-2736423336">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/cj5/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/17/1047/avatar92.jpg?1281549414">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2736423336">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-17</span>
	                            <span class="dsq-commenter-name">cj5</span>
	                        </div>

	                        <div id="dsq-comment-message-2736423336" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2736423336" class="dsq-comment-text">
	                                <p>Followed this tutorial to the 'T' and still cannot login. No errors, just tells me 'Username could not be found.'</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2707023676" id="dsq-comment-2707023676">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/fodhilasma/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2707023676">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-06-01</span>
	                            <span class="dsq-commenter-name">FODHIL ASMA</span>
	                        </div>

	                        <div id="dsq-comment-message-2707023676" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2707023676" class="dsq-comment-text">
	                                <p>Thanks for you response. I finally implemented the check login method and generated the JWT in it.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2704946771" id="dsq-comment-2704946771">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2704946771">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-31</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2704946771" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2704946771" class="dsq-comment-text">
	                                <p>Hi there!</p><p>If you're building an API, then there's limited useful ness to using FOSUserBundle (you can use it still for your User document, but you won't use any of its other features). In this case, your error is just because you have a bad namespace (or something) with your authenticator. The namespace and services.yml look good to me. So, does this file live in the correct location? It should be "src/Arably/RestBundle/Security/FormLoginAuthenticator.php".</p><p>Btw, we do have a tutorial about API authentication - it might be helpful! <a href="http://disq.us/url?url=http%3A%2F%2Fknpuniversity.com%2Fscreencast%2Fsymfony-rest4%3AIH2jcSiQAkXYCTXZ5cgdHZasqfo&amp;cuid=1175718" rel="nofollow noopener">http://knpuniversity.com/scree...</a></p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2701256143" id="dsq-comment-2701256143">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/fodhilasma/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2701256143">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-29</span>
	                            <span class="dsq-commenter-name">FODHIL ASMA</span>
	                        </div>

	                        <div id="dsq-comment-message-2701256143" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2701256143" class="dsq-comment-text">
	                                <p>when i submit submit the form to the "login_check" path i get this error:</p><p>ClassNotFoundException in appDevDebugProjectContainer.php line 1654: Attempted to load class "FormLoginAuthenticator" from namespace "Arably\RestBundle\Security".<br>Did you forget a "use" statement for another namespace?</p><p>I use symfony2.8, FosUserBundle as the user provider and mongodb odm</p><p>and this is my services file:</p><p>services:<br>  form_login_authenticator:<br>    class: Arably\RestBundle\Security\FormLoginAuthenticator<br>    autowire: true</p><p>FormLoginAuthenticator class:</p><p>namespace Arably\RestBundle\Security;</p><p>use Symfony\Component\Security\Guard\AbstractGuardAuthenticator;</p><p>use Symfony\Component\HttpFoundation\Request;</p><p>use Symfony\Component\HttpFoundation\Response;</p><p>use Symfony\Component\Security\Core\User\UserInterface;</p><p>use Symfony\Component\Security\Core\User\UserProviderInterface;</p><p>class FormLoginAuthenticator extends AbstractGuardAuthenticator<br>{<br>The methods implemented<br>}</p><p>SecurityController:</p><p>namespace Arably\RestBundle\Controller;</p><p>use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;</p><p>use Symfony\Bundle\FrameworkBundle\Controller\Controller;</p><p>class SecurityController extends Controller</p><p>{</p><p>    public function loginAction()</p><p>    {</p><p>    }</p><p>    public function loginCheckAction()</p><p>    {</p><p>        // will never be executed</p><p>    }</p><p>}</p><p>i am using a rest API so i don't  have a login page provided by the server</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2670808835" id="dsq-comment-2670808835">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bondashmaster/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/20619/7730/avatar92.jpg?1476329498">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2670808835">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-11</span>
	                            <span class="dsq-commenter-name">BondashMaster</span>
	                        </div>

	                        <div id="dsq-comment-message-2670808835" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2670808835" class="dsq-comment-text">
	                                <p>Dude.  My browser save /Login instead of /login. Dammit XD</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2670661826" id="dsq-comment-2670661826">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2670661826">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-11</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2670661826" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2670661826" class="dsq-comment-text">
	                                <p>Hey dash!</p><p>You already guessed my first debugging technique - bin/console debug:router. If you see /login listed, then you should not be getting this "No route found for GET /login" error. I mean, really, it's basically impossible - so something *very* strange is happening! I would click the web debug toolbar to go into the profiler. Then, go to the Routing tab. This will show you all of the routes that were searched. Do you see /login there?</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2669200154" id="dsq-comment-2669200154">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bondashmaster/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/20619/7730/avatar92.jpg?1476329498">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2669200154">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-10</span>
	                            <span class="dsq-commenter-name">BondashMaster</span>
	                        </div>

	                        <div id="dsq-comment-message-2669200154" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2669200154" class="dsq-comment-text">
	                                <p>I also use the php bin/console debug:router command and I get the /login listed :/</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2669085932" id="dsq-comment-2669085932">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/bondashmaster/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/20619/7730/avatar92.jpg?1476329498">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2669085932">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-05-10</span>
	                            <span class="dsq-commenter-name">BondashMaster</span>
	                        </div>

	                        <div id="dsq-comment-message-2669085932" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2669085932" class="dsq-comment-text">
	                                <p>This is my app config routing:</p><p>user:<br>    resource: "@UserBundle/Resources/config/routing.yml"<br>    prefix:   /</p><p>app:<br>    resource: "@AppBundle/Controller/"<br>    type:     annotation</p><p>user_routes:<br>    resource: "@UserBundle/Controller"<br>    type: annotation</p><p>I'm still getting the error:<br>No route found for "GET /login"</p><p>Any idea.  I read the other comments but I check twice and I have all my @</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2439056335" id="dsq-comment-2439056335">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2439056335">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-01-04</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2439056335" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2439056335" class="dsq-comment-text">
	                                <p>That's awesome! Thanks for sharing your efforts!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2436528177" id="dsq-comment-2436528177">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_T80uu0HX0v/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/15234/6092/avatar92.jpg?1451777021">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2436528177">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2016-01-02</span>
	                            <span class="dsq-commenter-name">Scott Collier</span>
	                        </div>

	                        <div id="dsq-comment-message-2436528177" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2436528177" class="dsq-comment-text">
	                                <p>Thanks again!</p><p>I was able to implement Login, API, and Facebook authentication. Initial versions here: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fonlinespaces%2Fsymfony-guard-project%3AXW4_7XEFcThATu9y9WbQ-oZwgk4&amp;cuid=1175718" rel="nofollow noopener">https://github.com/onlinespace...</a></p><p>Wouldn't have been able to finish this so quickly without your help!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2429450515" id="dsq-comment-2429450515">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2429450515">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-12-28</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2429450515" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2429450515" class="dsq-comment-text">
	                                <p>Wow, that's awesome!!!</p><p>It's on my todo list to add some things for social (Facebook) auth, but I haven't gotten there quite yet. I *do*, however, have a WIP code implementation of Facebook auth using the KnpGuardBundle (which is very close to the core Guard). If it's helpful, you can see that final code here: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fknpuniversity%2Fguard-tutorial%2Ftree%2Ffinished%3A26rWecDdLnop26duKCrquKgfkac&amp;cuid=1175718" rel="nofollow noopener">https://github.com/knpuniversi...</a>, with step-by-step commits: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fknpuniversity%2Fguard-tutorial%2Fcommits%2Ffinished%3ABA2LJeQ_GWBfufUIBnFHCkYj3ms&amp;cuid=1175718" rel="nofollow noopener">https://github.com/knpuniversi...</a></p><p>Good luck!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2429421803" id="dsq-comment-2429421803">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_T80uu0HX0v/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/15234/6092/avatar92.jpg?1451777021">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2429421803">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-12-28</span>
	                            <span class="dsq-commenter-name">Scott Collier</span>
	                        </div>

	                        <div id="dsq-comment-message-2429421803" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2429421803" class="dsq-comment-text">
	                                <p>I really appreciate your help with this and all the other stuff you do for the community!</p><p>I thought that was what the application was doing (logging in and logging back out) but didn't know about the intercept_redirects setting. Your explanation makes sense.</p><p>I merged the change in the pull request, deleted the UserRepository and references to it, and removed the "form_login" stuff and everything is working. Yay!</p><p>Now off to implement API and Facebook authentication!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2429272437" id="dsq-comment-2429272437">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2429272437">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-12-28</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2429272437" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2429272437" class="dsq-comment-text">
	                                <p>Hey Scott!</p><p>Yea, I think this issue :). Actually, when you login, you *are* logged in for a moment, but then you lose the login on the next request. You can see this by setting intercept_redirects (<a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fsymfony%2Fsymfony-standard%2Fblob%2Fmaster%2Fapp%2Fconfig%2Fconfig_dev.yml%23L12%29%3AJU66hUUXgja6q2lBkUMV-4-8vhk&amp;cuid=1175718" rel="nofollow noopener">https://github.com/symfony/sym...</a> to true temporarily. After login, it will stop and *not* redirect you. And on this page, you'll see that you *were* successfully authenticated.</p><p>So, why is this lost on the next request? It's a gotcha (one that hopefully we can make less of a gotcha in the future - it's tricky). Three things happen at the beginning of each request after you're logged in:</p><p>A) The User object is deserialized from the session (that's when the User::unserialize method is called)</p><p>B) That User object is used to query for a new one: refreshUser is called on your user provider. Usually, you use the id of the serialized User to query for a fresh one.</p><p>C) (and here's the tricky one): the deserialized User object is compared with the fresh User object. If they are not deemed "equal", you are logged out. What??? The purpose of this is to allow you to change your password in the database and cause a remote bad person who has stolen your account to be automatically logged out. Basically, you need to make sure that several properties are serialized: username, password, salt (not relevant in your case) and any values that fuel the AdvancedUserInterface methods. As long as these are serialized, then the two User objects will look equal. Here's the code in Symfony that checks this: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fsymfony%2Fsymfony%2Fblob%2Fmaster%2Fsrc%2FSymfony%2FComponent%2FSecurity%2FCore%2FAuthentication%2FToken%2FAbstractToken.php%23L244%3AStkJ5NN4MGHzDC6L_-Z9A6RORi8&amp;cuid=1175718" rel="nofollow noopener">https://github.com/symfony/sym...</a>.</p><p>The most common problem is not serializing some properties you need in User::serialize(). But you did a perfect job! The issue is smaller, and I've described it more on this pull request: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fonlinespaces%2Fsymfony-guard-project%2Fpull%2F1%3Alu3C4QS3Z5-UCJphGgKSEupy6fo&amp;cuid=1175718" rel="nofollow noopener">https://github.com/onlinespace...</a></p><p>I hope that helps! Also, to make your code simpler, you could delete your UserProvider (and associated code in UserRepository) and instead user the built-in entity user provider (you have some commented-out code for this - it looks like you *were* using it. Anymore, I don't really think that *anyone* needs a custom user provider if they're using Doctrine. If you need to do some crazy query for your User in your "authenticator", just call a custom method on your repository. You're already doing this: <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fweaverryan%2Fsymfony-guard-project%2Fblob%2Fmaster%2Fsrc%2FAppBundle%2FSecurity%2FFormLoginAuthenticator.php%23L78%3AA7Hg_m0VtJDXn21kS-Ya3QpxFbo&amp;cuid=1175718" rel="nofollow noopener">https://github.com/weaverryan/...</a></p><p>Also, you can remove the "form_login" stuff if you're using guard as your login form - it's just not needed. You *will* still you need your login routes, template, etc.</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2425350111" id="dsq-comment-2425350111">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/disqus_T80uu0HX0v/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/15234/6092/avatar92.jpg?1451777021">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2425350111">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-12-25</span>
	                            <span class="dsq-commenter-name">Scott Collier</span>
	                        </div>

	                        <div id="dsq-comment-message-2425350111" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2425350111" class="dsq-comment-text">
	                                <p>I am having an issue getting form login to work in Symfony 3 using Guard for authentication and mysql database.</p><p>I have read everything on this site, <a href="http://disq.us/url?url=http%3A%2F%2Fsymfony.com%3ApH9-PHrefZWrOqMkea6bhN-JLf4&amp;cuid=1175718" rel="nofollow noopener">symfony.com</a> and your awesome slideshare @ <a href="http://disq.us/url?url=http%3A%2F%2Fwww.slideshare.net%2Fweaverryan%2Fguard-authentication-powerful-beautiful-security%3APsLke4ezkxtdtCgIv1jlnOORYvU&amp;cuid=1175718" rel="nofollow noopener">http://www.slideshare.net/weav...</a>. But, I think I am missing something.</p><p>What I am trying to do:</p><p>- Allow user to log in</p><p>- Redirect user to home page upon login</p><p>I have created a login form. But, when I try to log in with the users I have created, I am redirected back to the login page and the user is only authenticated as Anonymous.</p><p>I also have a registration page. And, when I register a new user, I am able to authenticate the user in the registerAction function of the RegistrationController and the user is sent to the home page as expected and shows as authenticated as the user.</p><p>But, after logging the user out and trying to log in the newly created user, I am redirected back to the login page and the user is only authenticated as Anonymous.</p><p>Trying to debug, the checkCredentials function in the FormLoginAuthenticator seems to pass and is returning true and the onAuthenticationSuccess function is called.</p><p>I am relatively new to Symfony and am sure that I am missing something. But, after looking over it many times, I can't seem to figure out what is going on.</p><p>Anyway you could take a quick look at it?</p><p><a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fonlinespaces%2Fsymfony-guard-project%3AXW4_7XEFcThATu9y9WbQ-oZwgk4&amp;cuid=1175718" rel="nofollow noopener">https://github.com/onlinespace...</a></p><p>Thanks in advance,<br>Scott</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2409118593" id="dsq-comment-2409118593">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2409118593">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-12-14</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2409118593" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2409118593" class="dsq-comment-text">
	                                <p>Hey Marco!</p><p>What's the error? The SecurityContextInterface *is* deprecated, but it obviously still exists (unless you're using Symfony 3.0, then it's removed). Either way, use the Symfony\Component\Security\Core\Security class instead. We'll be releasing updated tutorials with all the new classes you should use soon :).</p><p>Cheers!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2403126202" id="dsq-comment-2403126202">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/marcobobbi/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/18683/1208/avatar92.jpg?1449758223">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2403126202">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-12-10</span>
	                            <span class="dsq-commenter-name">Marco Bobbi</span>
	                        </div>

	                        <div id="dsq-comment-message-2403126202" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2403126202" class="dsq-comment-text">
	                                <p>Hi i have a problem! I i use SecurityContextInterface the code give me an error! but SecurityContextInterface is not deprecated??</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2234613615" id="dsq-comment-2234613615">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/sjhuda/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2234613615">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-09-03</span>
	                            <span class="dsq-commenter-name">Syed</span>
	                        </div>

	                        <div id="dsq-comment-message-2234613615" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2234613615" class="dsq-comment-text">
	                                <p>No worries on the delay. It actually gave me a better understanding of Routing (and especially annotations).</p><p>Keep up the good work, love all your videos.</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2234595123" id="dsq-comment-2234595123">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2234595123">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-09-03</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2234595123" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2234595123" class="dsq-comment-text">
	                                <p>Bah, bummer! But good debugging! And sorry for the late reply! I especially liked that you ran router:debug - that is always what I do first when something happens that I don't expect with routing.</p><p>Good luck! At least you won't make that mistake again :)</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2227777521" id="dsq-comment-2227777521">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/sjhuda/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2227777521">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-08-31</span>
	                            <span class="dsq-commenter-name">Syed</span>
	                        </div>

	                        <div id="dsq-comment-message-2227777521" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2227777521" class="dsq-comment-text">
	                                <p>Soooo, after a day of debugging...I looked at the other annotation routes in the Event Controller and I missed the @ infront of 'Route'. *facepalm*</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2226218896" id="dsq-comment-2226218896">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/sjhuda/">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2226218896">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-08-30</span>
	                            <span class="dsq-commenter-name">Syed</span>
	                        </div>

	                        <div id="dsq-comment-message-2226218896" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2226218896" class="dsq-comment-text">
	                                <p>Is anybody else having difficulty getting the route /login to register with Symfony? I get a "No route found for "GET /login". Also the route isn't listed when using route:debug!</p><p>If it helps, you can view my Controller and routing file on my GitHub - <a href="https://disq.us/url?url=https%3A%2F%2Fgithub.com%2Fsjhuda%2Fknp-starwarsevents%2Fcommit%2F77bbfc2407d70ca88dee2096ff6129e58c53be08%3AYWB1J7ljGjmlTE6PjinHOuaQTU4&amp;cuid=1175718" rel="nofollow noopener">https://github.com/sjhuda/knp-...</a></p><p>Any ideas? :/</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2153797041" id="dsq-comment-2153797041">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="https://disqus.com/by/weaverryan/">
	                            	                                <img alt="" src="http://a.disquscdn.com/uploads/users/32/6480/avatar92.jpg?1482356913">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2153797041">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-07-23</span>
	                            <span class="dsq-commenter-name">weaverryan</span>
	                        </div>

	                        <div id="dsq-comment-message-2153797041" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2153797041" class="dsq-comment-text">
	                                <p>There's a use statement at the top of that file:</p><p>use Symfony\Component\Security\Core\Security;</p><p>I just forgot to "show" it in the code-block. I'll fix that now!</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	                <li class="dsq-comment dsq-clearfix" data-dsq-comment-id="2153787589" id="dsq-comment-2153787589">
	                    <div class="dsq-avatar dsq-tt">
	                        <a href="login-form">
	                            	                                <img alt="" src="http://a.disquscdn.com/1479321018/images/noavatar92.png">
	                            	                        </a>
	                    </div>
	                    <div class="dsq-comment-body" id="dsq-comment-body-2153787589">
	                        <div class="dsq-comment-header">
	                            <span class="dsq-comment-date">2015-07-23</span>
	                            <span class="dsq-commenter-name">dpatterson</span>
	                        </div>

	                        <div id="dsq-comment-message-2153787589" class="dsq-comment-message">
	                            <div id="dsq-comment-text-2153787589" class="dsq-comment-text">
	                                <p>Color me a bit confused. The FormLoginAuthenticator::getCredentials() method includes this line:<br>    $request-&gt;getSession()-&gt;set(Security::LAST_USERNAME, $username);</p><p>but I don't see a use for Anything\...\Security.</p><p>Where does it come from?</p>
	                            </div>
	                        </div>
	                    </div>
	                </li>
	            	        </ul>
	    </div>
            </div>

    <script type="text/javascript">
    var disqus_shortname = 'knpuniversity';
    var disqus_container_id = 'disqus_thread';var disqus_developer = 1;var disqus_identifier = 'course_video_login-form';var disqus_url = 'https://knpuniversity.com/screencast/symfony2-ep2/login-form';var disqus_config = function () {};

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

                                            </div>
                    <div class="pull-left-xs pull-right-md">
                                        <a class="btn btn-success"
           href="api-token#play">
            Next Chapter <i class="fa fa-caret-right"></i>
        </a>
    
                    </div>
                    <div class="pull-left addthis-module">
                        
    <div class="addthis_toolbox addthis_default_style js-analytics-addthis-wrapper addthis_32x32_style" addthis:url="http://knpuniversity.com/screencast/guard/login-form" addthis:title="KnpUGuard: Symfony Authentication with a Smile">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer class="footer footer-styling">
    <div class="container">
        <div class="row">
                        <div class="col-xs-7 col-sm-4">
                <div class="row">
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../courses/all">All Courses</a></li>
                                                            <li><a class="knp-color-black" href="../../pricing.1">Pricing</a></li>
                                                        <li><a class="knp-color-black" href="../../faq">FAQ</a></li>
                            <li><a class="knp-color-black" href="../../training">Training</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-6">
                        <ul class="list-unstyled footer-link">
                            <li><a class="knp-color-black" href="../../about">About</a></li>
                            <li><a class="knp-color-black" href="../../blog">Blog</a></li>
                            <li><a class="knp-color-black" href="../../contact">Contact Us</a></li>
                            <li>
                                <a class="knp-color-black" href="../../terms">Terms</a>
                                <span class="knp-color-black">&amp;</span>
                                <a class="knp-color-black" href="../../privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="hidden-xs col-sm-4">
                <p class="disclaimer">Symfony is a registered trademark of Fabien Potencier in the United States and/or other countries.
                This product is not endorsed or sponsored by Fabien Potencier.
                </p>
            </div>
            <div class="col-xs-5 col-sm-4">
                <div class="social-icons">
                    <a class="btn btn-social-icon btn-twitter" href="https://twitter.com/KnpUniversity">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a class="btn btn-social-icon btn-facebook" href="https://www.facebook.com/KnpLabs/">
                        <i class="fa fa-facebook"></i>
                    </a>
                    <a class="btn btn-social-icon btn-github" href="https://github.com/knpuniversity">
                        <i class="fa fa-github"></i>
                    </a>
                </div>
            </div>
                    </div>
    </div>
</footer>

<!-- JS -->
            <script>
        Core.analyticsVideoStatsUrl = '/api/analytics/video/duration';
    </script>

            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-7062980-20']);
        _gaq.push(['_trackPageview']);
    </script>
    <script>
    
    </script>
    
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    
                <script type="text/javascript">
      (function() {
        var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
        uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/pOay2WLVabhXiEffbarO6Q.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
      })();

      UserVoice = window.UserVoice || [];
      UserVoice.push(['showTab', 'classic_widget', {
          tab_position: 'bottom-right',
          tab_label: 'Ideas or Feedback?',
          tab_color: '#005E8E'
      }]);
    </script>
        
            
        <script type="text/javascript">
    var _sf_async_config={uid:54262,domain:"knpuniversity.com",useCanonical:true};
    (function(){
      function loadChartbeat() {
        window._sf_endpt=(new Date()).getTime();
        var e = document.createElement('script');
        e.setAttribute('language', 'javascript');
        e.setAttribute('type', 'text/javascript');
        e.setAttribute('src', '//static.chartbeat.com/js/chartbeat.js');
        document.body.appendChild(e);
      }
      var oldonload = window.onload;
      window.onload = (typeof window.onload != 'function') ?
         loadChartbeat : function() { oldonload(); loadChartbeat(); };
    })();
    </script>
    
            <script>
            (function(){
                var t,i,e,n=window,o=document,a=arguments,s="script",r=["config","track","identify","visit","push","call"],c=function(){var t,i=this;for(i._e=[],t=0;r.length>t;t++)(function(t){i[t]=function(){return i._e.push([t].concat(Array.prototype.slice.call(arguments,0))),i}})(r[t])};for(n._w=n._w||{},t=0;a.length>t;t++)n._w[a[t]]=n[a[t]]=n[a[t]]||new c;i=o.createElement(s),i.async=1,i.src="//static.woopra.com/js/w.js",e=o.getElementsByTagName(s)[0],e.parentNode.insertBefore(i,e)
            })("woopra");

            woopra.config({
                domain: 'knpuniversity.com',
                download_tracking: true,
                outgoing_tracking: true
            });

                            woopra.identify({
                    userType: 'anonymous',
                    hasSubscription: 'no'
                });
                    </script>

        <script>
            woopra.track(
            'course_view_chapter',
            {"course":"guard","courseIsOwned":true,"chapter":"How to Create a Login Form","chapterNumber":2,"chapterIsFree":false}
        );
    </script>

        <script>
            woopra.track();
        </script>
     
        <script type="text/javascript">
    var _qevents = _qevents || [];

    (function() {
    var elem = document.createElement('script');
    elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
    elem.async = true;
    elem.type = "text/javascript";
    var scpt = document.getElementsByTagName('script')[0];
    scpt.parentNode.insertBefore(elem, scpt);
    })();

    _qevents.push({
    qacct:"p-8-SEHS37bhSQ0"
    });
    </script>

    <noscript>
    <div style="display:none;">
    <img src="http://pixel.quantserve.com/pixel/p-8-SEHS37bhSQ0.gif" border="0" height="1" width="1" alt="Quantcast"/>
    </div>
    </noscript>
    


    <script type="text/javascript" src="../../assets/vendor/jquery-sticky/jquery.sticky.js"></script>
    <script type="text/javascript" src="../../assets/vendor/zeroclipboard/dist/ZeroClipboard.min.js"></script>
    <script type="text/javascript" src="../../js/CodeBlocks.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/underscore.js"></script>
    <script type="text/javascript" src="../../bundles/knpuniversity/sphinx/js/doctools.js"></script>

    <script>
        Core.courseTitle = 'KnpUGuard: Symfony Authentication with a Smile';
        Core.courseId = 65
        Core.courseIsOwned = true;
        Core.courseSlug = 'guard';
                    Core.chapterTitle = 'How to Create a Login Form';
            Core.chapterNumber = 2;
            Core.chapterIsFree = false;
            Core.chapterSlug = 'login-form';
        
                var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '1.0.0',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };

        jQuery(document).ready(function() {
            // Stick left sidebar menu
            $('.js-sticker').sticky();

            var $scriptWrapper = $('.js-script-content-wrapper');
            var codeBlocks = new Core.CodeBlocks($scriptWrapper);

            var expandList = $('.js-expand-list');

            expandList.on('click', function(){
                var target = $(this).data('target');
                var $expandArea = $('#' + target);
                $expandArea.toggleClass('expanded');

                // http://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery
                $(document).one('click', function closeExpandList (e){
                    if($expandArea.has(e.target).length === 0){
                        $expandArea.removeClass('expanded');
                    } else {
                        $(document).one('click', closeExpandList);
                    }
                });
            });
        });
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>



    <script type="text/javascript">
    var addthis_share = {
        templates: {
            twitter: '{{title}} - {{url}} | via @KnpUniversity'
        }
    }
</script>
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=weaverryan"></script>

</body>
</html>
